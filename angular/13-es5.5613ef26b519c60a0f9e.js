!function(){function t(t,n){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var c=0,a=function(){};return{s:a,n:function(){return c>=t.length?{done:!0}:{done:!1,value:t[c++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){s=!0,o=t},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw o}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Iab2:function(t,e,n){var i,c;void 0===(c="function"==typeof(i=function(){"use strict";function e(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){o(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var c="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=c.saveAs||("object"!=typeof window||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,a,o){var r=c.URL||c.webkitURL,s=document.createElement("a");s.download=a=a||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?i(s):n(s.href)?e(t,a,o):i(s,s.target="_blank")):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){i(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,c,a){if(c=c||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),c);else if(n(t))e(t,c,a);else{var o=document.createElement("a");o.href=t,o.target="_blank",setTimeout(function(){i(o)})}}:function(t,n,i,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,i);var r="application/octet-stream"===t.type,s=/constructor/i.test(c.HTMLElement)||c.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&s||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},u.readAsDataURL(t)}else{var b=c.URL||c.webkitURL,g=b.createObjectURL(t);o?o.location=g:location.href=g,o=null,setTimeout(function(){b.revokeObjectURL(g)},4e4)}});c.saveAs=o.saveAs=o,t.exports=o})?i.apply(e,[]):i)||(t.exports=c)},X2wh:function(t,e,i){"use strict";i.d(e,"a",function(){return Kt});var a=i("fXoL"),o=i("tyNb"),r=i("gbi4"),s=i("Avyq"),l=i("yTNM"),u=i("ofXK"),b=i("UXJo"),g=i("NFeN"),f=i("wZkO"),d=i("IU+r"),m=i("Qu3c"),p=i("uZ1F"),h=i("loSA"),v=i("gaSO");function k(t,e){1&t&&(a.Vb(0,"p",6),a.Rc(1,"Ch\u01b0a c\xf3 h\u1ecdc sinh n\xe0o tham gia thi"),a.Ub())}function y(t,e){if(1&t){var n=a.Wb();a.Vb(0,"a",7),a.cc("click",function(){return a.Dc(n),a.gc(2).showCopySuccess()}),a.Vb(1,"mat-icon",8),a.Rc(2,"share"),a.Ub(),a.Vb(3,"span",8),a.Rc(4,"\xa0Copy link \u0111\u1ec1 thi"),a.Ub(),a.Ub()}if(2&t){var i=a.gc(2);a.nc("cdkCopyToClipboard",i.copyLinkToClipboard())}}function w(t,e){1&t&&(a.Vb(0,"p",6),a.Rc(1,"Ch\u01b0a c\xf3 h\u1ecdc sinh n\xe0o n\u1ed9p b\xe0i t\u1eadp"),a.Ub())}function x(t,e){if(1&t){var n=a.Wb();a.Vb(0,"a",7),a.cc("click",function(){return a.Dc(n),a.gc(2).showCopySuccess()}),a.Vb(1,"mat-icon",8),a.Rc(2,"share"),a.Ub(),a.Vb(3,"span",8),a.Rc(4,"\xa0Copy link b\xe0i t\u1eadp"),a.Ub(),a.Ub()}if(2&t){var i=a.gc(2);a.nc("cdkCopyToClipboard",i.copyLinkHomeWorkToClipboard())}}function C(t,e){if(1&t&&(a.Vb(0,"div"),a.Vb(1,"div",3),a.Pc(2,k,2,0,"p",4),a.Pc(3,y,5,1,"a",5),a.Pc(4,w,2,0,"p",4),a.Pc(5,x,5,1,"a",5),a.Ub(),a.Ub()),2&t){var n=a.gc();a.Db(2),a.nc("ngIf",!n.isHomeworkFlow),a.Db(1),a.nc("ngIf",!n.isHomeworkFlow),a.Db(1),a.nc("ngIf",n.isHomeworkFlow),a.Db(1),a.nc("ngIf",n.isHomeworkFlow)}}function R(t,e){if(1&t&&(a.Vb(0,"span",21),a.Qb(1,"azt-create-avatar",22),a.Ub()),2&t){var n=a.gc().$implicit;a.Db(1),a.oc("matTooltip",n.classObj.teacherAvatar.fullName),a.nc("nameCreateAvatar",n.classObj.teacherAvatar.fullName)("size",25)("linkAvatar",n.classObj.teacherAvatar.avatar)}}function T(t,e){if(1&t){var n=a.Wb();a.Vb(0,"div",37),a.cc("click",function(){a.Dc(n);var t=a.gc().$implicit;return a.gc(5).openResultHistoryReview(t)}),a.Vb(1,"mat-icon",38),a.Rc(2,"history"),a.Ub(),a.Ub()}}function P(t,e){1&t&&(a.Vb(0,"span",39),a.Rc(1," (\u0110ang Thi)"),a.Ub())}function I(t,e){1&t&&(a.Vb(0,"p",46),a.Rc(1," Ch\u01b0a ch\u1ea5m "),a.Ub())}function U(t,e){1&t&&(a.Vb(0,"p",47),a.Rc(1," \u0110ang thi "),a.Ub())}function V(t,e){1&t&&a.Qb(0,"span",50)}function S(t,e){if(1&t&&(a.Vb(0,"p",48),a.Rc(1," Ch\u01b0a thi "),a.Pc(2,V,1,0,"span",49),a.Ub()),2&t){var n=a.gc(7);a.Db(2),a.nc("ngIf",n.hasEssayQuestion)}}function D(t,e){if(1&t&&(a.Vb(0,"p",51),a.Rc(1," \u0110i\u1ec3m: "),a.Vb(2,"b"),a.Rc(3),a.Ub(),a.Ub()),2&t){var n=a.gc(2).$implicit;a.Db(3),a.Sc(n.mark)}}function M(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(2).$implicit,i=a.gc(5);a.Db(1),a.Tc(" ",i.calculationTime(n.createdAt)," tr\u01b0\u1edbc ")}}function O(t,e){if(1&t&&(a.Vb(0,"div",40),a.Pc(1,I,2,0,"p",41),a.Pc(2,U,2,0,"p",42),a.Pc(3,S,3,1,"p",43),a.Pc(4,D,4,1,"p",44),a.Pc(5,M,2,1,"p",45),a.Ub()),2&t){var n=a.gc().$implicit;a.Db(1),a.nc("ngIf",n.isNotMarked),a.Db(1),a.nc("ngIf",n.isOnTest),a.Db(1),a.nc("ngIf",n.isNotTested),a.Db(1),a.nc("ngIf",n.isMarked),a.Db(1),a.nc("ngIf",n.isMarked||n.isNotMarked)}}function A(t,e){1&t&&(a.Vb(0,"p",52),a.Rc(1," Th\u1eddi gian l\xe0m b\xe0i: "),a.Ub())}function N(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(2).$implicit,i=a.gc(5);a.Db(1),a.Tc(" ",i.calculationTestedTime(n.startedTest,n.createdAt)," ")}}function L(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(2).$implicit,i=a.gc(5);a.Db(1),a.Tc(" ",i.calculationTestedTime(n.startedTest)," ")}}function B(t,e){if(1&t&&(a.Vb(0,"div",53),a.Pc(1,A,2,0,"p",45),a.Pc(2,N,2,1,"p",45),a.Pc(3,L,2,1,"p",45),a.Ub()),2&t){var n=a.gc().$implicit;a.Db(1),a.nc("ngIf",!n.isNotTested),a.Db(1),a.nc("ngIf",n.isMarked||n.isNotMarked),a.Db(1),a.nc("ngIf",n.isOnTest)}}function E(t,e){1&t&&(a.Vb(0,"p",52),a.Rc(1," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),a.Ub())}function j(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(2).$implicit,i=a.gc(5);a.Db(1),a.Tc(" ",n.files&&i.checkArray(n.files)&&n.files.length>0?n.files.length:0," ")}}function H(t,e){if(1&t&&(a.Vb(0,"div",53),a.Pc(1,E,2,0,"p",45),a.Pc(2,j,2,1,"p",45),a.Ub()),2&t){var n=a.gc().$implicit;a.Db(1),a.nc("ngIf",n.isMarked||n.isNotMarked),a.Db(1),a.nc("ngIf",n.isMarked||n.isNotMarked)}}var _=function(t){return{"col-lg-4":t}},F=function(t){return{disableClick:t}},z=function(t){return[t]},$=function(t){return{backto:t}};function Q(t,e){if(1&t&&(a.Vb(0,"div",23),a.Vb(1,"div",24),a.Vb(2,"div",25),a.Vb(3,"span",26),a.Qb(4,"azt-create-avatar",27),a.Pc(5,T,3,0,"div",28),a.Ub(),a.Vb(6,"div",29),a.Vb(7,"a",30),a.hc(8,"mylocalize"),a.Vb(9,"div",31),a.Vb(10,"span",32),a.Vb(11,"span",33),a.Rc(12),a.Pc(13,P,2,0,"span",34),a.Ub(),a.Ub(),a.Ub(),a.Pc(14,O,6,5,"div",35),a.Pc(15,B,4,3,"div",36),a.Pc(16,H,3,2,"div",36),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t){var n=e.$implicit,i=a.gc(5);a.nc("ngClass",a.sc(15,_,i.isOpenSideNav)),a.Db(1),a.nc("ngClass",a.sc(17,F,n.isNotSubmit||n.mustReSubmit)),a.Db(3),a.nc("linkAvatar",n.avatar)("nameCreateAvatar",n.fullName)("size",30),a.Db(1),a.nc("ngIf",i.checkShowIconHistory(n)),a.Db(2),a.nc("routerLink",a.sc(19,z,a.ic(8,13,"/admin/testbank/test-review/"+i.obj.id+"/"+n.userId+"/"+n.studentId+"/0")))("queryParams",a.sc(21,$,i.backToLink)),a.Db(5),a.Tc("",n.fullName," "),a.Db(1),a.nc("ngIf",1==n.status&&(n.isMarked||n.isNotMarked)),a.Db(1),a.nc("ngIf",!i.isHomeworkFlow),a.Db(1),a.nc("ngIf",!i.isHomeworkFlow),a.Db(1),a.nc("ngIf",!i.isHomeworkFlow&&i.hasEssayQuestion)}}function q(t,e){if(1&t){var n=a.Wb();a.Vb(0,"div",15),a.Vb(1,"div",16),a.Vb(2,"p",17),a.cc("click",function(){a.Dc(n);var t=e.$implicit;return a.gc(4).goToStudentList(t.classObj.id)}),a.Vb(3,"span"),a.Rc(4),a.Ub(),a.Pc(5,R,2,4,"span",18),a.Ub(),a.Ub(),a.Vb(6,"div",19),a.Pc(7,Q,17,23,"div",20),a.Ub(),a.Ub()}if(2&t){var i=e.$implicit;a.Db(4),a.Sc(i.classObj.name+"("+i.countSubmitted+"/"+i.classObj.countStudents+")"),a.Db(1),a.nc("ngIf",i.classObj.teacherAvatar),a.Db(2),a.nc("ngForOf",i.results)}}function W(t,e){if(1&t&&(a.Vb(0,"mat-tab",13),a.Pc(1,q,8,3,"div",14),a.Ub()),2&t){var n=a.gc(3);a.oc("label","Theo l\u1edbp ("+n.totalSubmitByClass+")"),a.Db(1),a.nc("ngForOf",n.studentListsInClass)}}function J(t,e){if(1&t){var n=a.Wb();a.Vb(0,"div",37),a.cc("click",function(){a.Dc(n);var t=a.gc(2).$implicit;return a.gc(4).openResultHistoryReview(t)}),a.Vb(1,"mat-icon",38),a.Rc(2,"history"),a.Ub(),a.Ub()}}function G(t,e){1&t&&(a.Vb(0,"span",39),a.Rc(1," (\u0110ang Thi)"),a.Ub())}function K(t,e){1&t&&(a.Vb(0,"p",46),a.Rc(1," Ch\u01b0a ch\u1ea5m "),a.Ub())}function X(t,e){1&t&&(a.Vb(0,"p",63),a.Rc(1," \u0110ang thi "),a.Ub())}function Y(t,e){1&t&&a.Qb(0,"span",50)}function Z(t,e){if(1&t&&(a.Vb(0,"p",48),a.Rc(1," Ch\u01b0a thi "),a.Pc(2,Y,1,0,"span",49),a.Ub()),2&t){var n=a.gc(7);a.Db(2),a.nc("ngIf",n.hasEssayQuestion)}}function tt(t,e){if(1&t&&(a.Vb(0,"p",51),a.Rc(1," \u0110i\u1ec3m: "),a.Vb(2,"b"),a.Rc(3),a.Ub(),a.Ub()),2&t){var n=a.gc(3).$implicit;a.Db(3),a.Sc(n.mark)}}function et(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(3).$implicit,i=a.gc(4);a.Db(1),a.Tc(" ",i.calculationTime(n.createdAt)," tr\u01b0\u1edbc ")}}function nt(t,e){if(1&t&&(a.Vb(0,"div",53),a.Pc(1,K,2,0,"p",41),a.Pc(2,X,2,0,"p",62),a.Pc(3,Z,3,1,"p",43),a.Pc(4,tt,4,1,"p",44),a.Pc(5,et,2,1,"p",45),a.Ub()),2&t){var n=a.gc(2).$implicit;a.Db(1),a.nc("ngIf",n.isNotMarked),a.Db(1),a.nc("ngIf",n.isOnTest),a.Db(1),a.nc("ngIf",n.isNotTested),a.Db(1),a.nc("ngIf",n.isMarked),a.Db(1),a.nc("ngIf",n.isMarked||n.isNotMarked)}}function it(t,e){1&t&&(a.Vb(0,"p",52),a.Rc(1," Th\u1eddi gian l\xe0m b\xe0i: "),a.Ub())}function ct(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(3).$implicit,i=a.gc(4);a.Db(1),a.Tc(" ",i.calculationTestedTime(n.startedTest,n.createdAt)," ")}}function at(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(3).$implicit,i=a.gc(4);a.Db(1),a.Tc(" ",i.calculationTestedTime(n.startedTest)," ")}}function ot(t,e){if(1&t&&(a.Vb(0,"div",53),a.Pc(1,it,2,0,"p",45),a.Pc(2,ct,2,1,"p",45),a.Pc(3,at,2,1,"p",45),a.Ub()),2&t){var n=a.gc(2).$implicit;a.Db(1),a.nc("ngIf",!n.isNotTested),a.Db(1),a.nc("ngIf",n.isMarked||n.isNotMarked),a.Db(1),a.nc("ngIf",n.isOnTest)}}function rt(t,e){1&t&&(a.Vb(0,"p",52),a.Rc(1," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),a.Ub())}function st(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(3).$implicit,i=a.gc(4);a.Db(1),a.Tc(" ",n.files&&i.checkArray(n.files)&&n.files.length>0?n.files.length:0," ")}}function lt(t,e){if(1&t&&(a.Vb(0,"div",53),a.Pc(1,rt,2,0,"p",45),a.Pc(2,st,2,1,"p",45),a.Ub()),2&t){var n=a.gc(2).$implicit;a.Db(1),a.nc("ngIf",n.isMarked||n.isNotMarked),a.Db(1),a.nc("ngIf",n.isMarked||n.isNotMarked)}}function ut(t,e){if(1&t){var n=a.Wb();a.Vb(0,"div"),a.Vb(1,"div",60),a.Vb(2,"div",25),a.Vb(3,"span",26),a.Qb(4,"azt-create-avatar",27),a.Pc(5,J,3,0,"div",28),a.Ub(),a.Vb(6,"div",61),a.cc("click",function(){a.Dc(n);var t=a.gc().$implicit;return a.gc(4).goToResultReview(t)}),a.Vb(7,"div",31),a.Vb(8,"span",32),a.Vb(9,"span",33),a.Rc(10),a.Pc(11,G,2,0,"span",34),a.Ub(),a.Ub(),a.Ub(),a.Pc(12,nt,6,5,"div",36),a.Pc(13,ot,4,3,"div",36),a.Pc(14,lt,3,2,"div",36),a.Ub(),a.Ub(),a.Ub(),a.Ub()}if(2&t){var i=a.gc().$implicit,c=a.gc(4);a.Db(1),a.nc("ngClass",a.sc(10,F,i.isNotSubmit||i.mustReSubmit)),a.Db(3),a.nc("linkAvatar",i.avatar)("nameCreateAvatar",i.fullName)("size",30),a.Db(1),a.nc("ngIf",c.checkShowIconHistory(i)),a.Db(5),a.Tc("",i.fullName," "),a.Db(1),a.nc("ngIf",1==i.status&&(i.isMarked||i.isNotMarked)),a.Db(1),a.nc("ngIf",!c.isHomeworkFlow),a.Db(1),a.nc("ngIf",!c.isHomeworkFlow),a.Db(1),a.nc("ngIf",!c.isHomeworkFlow&&c.hasEssayQuestion)}}function bt(t,e){if(1&t){var n=a.Wb();a.Vb(0,"div",37),a.cc("click",function(){a.Dc(n);var t=a.gc(2).$implicit;return a.gc(4).openResultHistoryReview(t)}),a.Vb(1,"mat-icon",38),a.Rc(2,"history"),a.Ub(),a.Ub()}}function gt(t,e){1&t&&(a.Vb(0,"span",39),a.Rc(1," (\u0110ang Thi)"),a.Ub())}function ft(t,e){1&t&&(a.Vb(0,"p",46),a.Rc(1," Ch\u01b0a ch\u1ea5m "),a.Ub())}function dt(t,e){1&t&&(a.Vb(0,"p",63),a.Rc(1," \u0110ang thi "),a.Ub())}function mt(t,e){1&t&&a.Qb(0,"span",50)}function pt(t,e){if(1&t&&(a.Vb(0,"p",48),a.Rc(1," Ch\u01b0a thi "),a.Pc(2,mt,1,0,"span",49),a.Ub()),2&t){var n=a.gc(7);a.Db(2),a.nc("ngIf",n.hasEssayQuestion)}}function ht(t,e){if(1&t&&(a.Vb(0,"p",51),a.Rc(1," \u0110i\u1ec3m: "),a.Vb(2,"b"),a.Rc(3),a.Ub(),a.Ub()),2&t){var n=a.gc(3).$implicit;a.Db(3),a.Sc(n.mark)}}function vt(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(3).$implicit,i=a.gc(4);a.Db(1),a.Tc(" ",i.calculationTime(n.createdAt)," tr\u01b0\u1edbc ")}}function kt(t,e){if(1&t&&(a.Vb(0,"div",53),a.Pc(1,ft,2,0,"p",41),a.Pc(2,dt,2,0,"p",62),a.Pc(3,pt,3,1,"p",43),a.Pc(4,ht,4,1,"p",44),a.Pc(5,vt,2,1,"p",45),a.Ub()),2&t){var n=a.gc(2).$implicit;a.Db(1),a.nc("ngIf",n.isNotMarked),a.Db(1),a.nc("ngIf",n.isOnTest),a.Db(1),a.nc("ngIf",n.isNotTested),a.Db(1),a.nc("ngIf",n.isMarked),a.Db(1),a.nc("ngIf",n.isMarked||n.isNotMarked)}}function yt(t,e){1&t&&(a.Vb(0,"p",52),a.Rc(1," Th\u1eddi gian l\xe0m b\xe0i: "),a.Ub())}function wt(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(3).$implicit,i=a.gc(4);a.Db(1),a.Tc(" ",i.calculationTestedTime(n.startedTest,n.createdAt)," ")}}function xt(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(3).$implicit,i=a.gc(4);a.Db(1),a.Tc(" ",i.calculationTestedTime(n.startedTest)," ")}}function Ct(t,e){if(1&t&&(a.Vb(0,"div",53),a.Pc(1,yt,2,0,"p",45),a.Pc(2,wt,2,1,"p",45),a.Pc(3,xt,2,1,"p",45),a.Ub()),2&t){var n=a.gc(2).$implicit;a.Db(1),a.nc("ngIf",!n.isNotTested),a.Db(1),a.nc("ngIf",n.isMarked||n.isNotMarked),a.Db(1),a.nc("ngIf",n.isOnTest)}}function Rt(t,e){1&t&&(a.Vb(0,"p",52),a.Rc(1," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),a.Ub())}function Tt(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(3).$implicit,i=a.gc(4);a.Db(1),a.Tc(" ",n.files&&i.checkArray(n.files)&&n.files.length>0?n.files.length:0," ")}}function Pt(t,e){if(1&t&&(a.Vb(0,"div",53),a.Pc(1,Rt,2,0,"p",45),a.Pc(2,Tt,2,1,"p",45),a.Ub()),2&t){var n=a.gc(2).$implicit;a.Db(1),a.nc("ngIf",n.isMarked||n.isNotMarked),a.Db(1),a.nc("ngIf",n.isMarked||n.isNotMarked)}}function It(t,e){if(1&t){var n=a.Wb();a.Vb(0,"div",60),a.Vb(1,"div",25),a.Vb(2,"span",26),a.Qb(3,"azt-create-avatar",27),a.Pc(4,bt,3,0,"div",28),a.Ub(),a.Vb(5,"div",61),a.cc("click",function(){a.Dc(n);var t=a.gc().$implicit;return a.gc(4).goToResultReview(t)}),a.Vb(6,"a",64),a.hc(7,"mylocalize"),a.Vb(8,"div",31),a.Vb(9,"span",32),a.Vb(10,"span",33),a.Rc(11),a.Pc(12,gt,2,0,"span",34),a.Ub(),a.Ub(),a.Ub(),a.Pc(13,kt,6,5,"div",36),a.Pc(14,Ct,4,3,"div",36),a.Pc(15,Pt,3,2,"div",36),a.Ub(),a.Ub(),a.Ub(),a.Ub()}if(2&t){var i=a.gc().$implicit,c=a.gc(4);a.nc("ngClass",a.sc(14,F,i.isNotSubmit||i.mustReSubmit)),a.Db(3),a.nc("linkAvatar",i.avatar)("nameCreateAvatar",i.fullName)("size",30),a.Db(1),a.nc("ngIf",c.checkShowIconHistory(i)),a.Db(2),a.nc("routerLink",a.sc(16,z,a.ic(7,12,"/admin/testbank/test-review/"+c.obj.id+"/"+i.userId+"/"+i.studentId+"/0")))("queryParams",a.sc(18,$,c.backToLink)),a.Db(5),a.Tc("",i.fullName," "),a.Db(1),a.nc("ngIf",1==i.status&&(i.isMarked||i.isNotMarked)),a.Db(1),a.nc("ngIf",!c.isHomeworkFlow),a.Db(1),a.nc("ngIf",!c.isHomeworkFlow),a.Db(1),a.nc("ngIf",!c.isHomeworkFlow&&c.hasEssayQuestion)}}function Ut(t,e){if(1&t&&(a.Vb(0,"div",58),a.Pc(1,ut,15,12,"div",10),a.Pc(2,It,16,20,"ng-template",null,59,a.Qc),a.Ub()),2&t){var n=e.$implicit,i=a.zc(3),c=a.gc(4);a.nc("ngClass",a.sc(3,_,c.isOpenSideNav)),a.Db(1),a.nc("ngIf",n.isNotSubmit||n.mustReSubmit)("ngIfElse",i)}}function Vt(t,e){if(1&t){var n=a.Wb();a.Vb(0,"div",65),a.Vb(1,"azt-paging",66),a.cc("SendPage",function(t){return a.Dc(n),a.gc(4).clickPage(t)}),a.Ub(),a.Ub()}if(2&t){var i=a.gc(4);a.Db(1),a.nc("lengthPage",i.totalPage)("paging",i.curPage)}}function St(t,e){if(1&t&&(a.Vb(0,"mat-tab",13),a.Vb(1,"div",54),a.Pc(2,Ut,4,5,"div",55),a.Vb(3,"div",56),a.Pc(4,Vt,2,2,"div",57),a.Ub(),a.Ub(),a.Ub()),2&t){var n=a.gc(3);a.oc("label","T\u1ef1 do ("+n.studentLists.length+")"),a.Db(2),a.nc("ngForOf",n.studentListPage),a.Db(2),a.nc("ngIf",n.totalPage>1)}}function Dt(t,e){if(1&t&&(a.Vb(0,"mat-tab-group"),a.Pc(1,W,2,2,"mat-tab",12),a.Pc(2,St,5,3,"mat-tab",12),a.Ub()),2&t){var n=a.gc(2);a.Db(1),a.nc("ngIf",n.examHasClass),a.Db(1),a.nc("ngIf",n.studentLists&&n.studentLists.length>0)}}function Mt(t,e){1&t&&(a.Vb(0,"p",46),a.Rc(1," Ch\u01b0a ch\u1ea5m "),a.Ub())}function Ot(t,e){1&t&&(a.Vb(0,"p",47),a.Rc(1," Ch\u01b0a n\u1ed9p "),a.Ub())}function At(t,e){1&t&&(a.Vb(0,"p",47),a.Rc(1," \u0110\xe3 y\xeau c\u1ea7u n\u1ed9p l\u1ea1i "),a.Ub())}function Nt(t,e){if(1&t&&(a.Vb(0,"p",51),a.Rc(1," \u0110i\u1ec3m: "),a.Vb(2,"b"),a.Qb(3,"azt-check-mark",69),a.Ub(),a.Ub()),2&t){var n=a.gc(2).$implicit;a.Db(3),a.nc("mark",n.point)}}function Lt(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(2).$implicit,i=a.gc(3);a.Db(1),a.Tc(" ",i.calculationTime(n.createdAt)," tr\u01b0\u1edbc ")}}function Bt(t,e){if(1&t&&(a.Vb(0,"div",53),a.Vb(1,"p",52),a.Rc(2," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),a.Ub(),a.Vb(3,"p",52),a.Rc(4),a.Ub(),a.Ub()),2&t){var n=a.gc(2).$implicit,i=a.gc(3);a.Db(4),a.Tc(" ",n.answer.files&&i.formatArray(n.answer.files).length>0?i.formatArray(n.answer.files).length:0," ")}}function Et(t,e){if(1&t&&(a.Vb(0,"div"),a.Vb(1,"a",64),a.hc(2,"mylocalize"),a.Vb(3,"div",60),a.Vb(4,"div",25),a.Vb(5,"span",26),a.Qb(6,"azt-create-avatar",27),a.Ub(),a.Vb(7,"div",29),a.Vb(8,"div",31),a.Vb(9,"span",32),a.Vb(10,"span",33),a.Rc(11),a.Ub(),a.Ub(),a.Ub(),a.Vb(12,"div",53),a.Pc(13,Mt,2,0,"p",41),a.Pc(14,Ot,2,0,"p",42),a.Pc(15,At,2,0,"p",42),a.Pc(16,Nt,4,1,"p",44),a.Pc(17,Lt,2,1,"p",45),a.Ub(),a.Pc(18,Bt,5,1,"div",36),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t){var n=a.gc().$implicit,i=a.gc(3);a.Db(1),a.nc("routerLink",a.sc(15,z,a.ic(2,13,"/admin/homework/mark-exercise/"+n.answer.id)))("queryParams",a.sc(17,$,i.backToLink)),a.Db(2),a.nc("ngClass",a.sc(19,F,n.isNotSubmit||n.mustReSubmit)),a.Db(3),a.nc("linkAvatar",n.avatar)("nameCreateAvatar",n.fullName)("size",30),a.Db(5),a.Sc(n.fullName),a.Db(2),a.nc("ngIf",n.isSubmitted),a.Db(1),a.nc("ngIf",n.isNotSubmit),a.Db(1),a.nc("ngIf",n.mustReSubmit),a.Db(1),a.nc("ngIf",n.isMarked),a.Db(1),a.nc("ngIf",null!=n.createdAt),a.Db(1),a.nc("ngIf",n.isMarked||n.isSubmitted)}}function jt(t,e){1&t&&(a.Vb(0,"p",46),a.Rc(1," Ch\u01b0a ch\u1ea5m "),a.Ub())}function Ht(t,e){1&t&&(a.Vb(0,"p",47),a.Rc(1," Ch\u01b0a n\u1ed9p "),a.Ub())}function _t(t,e){1&t&&(a.Vb(0,"p",47),a.Rc(1," \u0110\xe3 y\xeau c\u1ea7u n\u1ed9p l\u1ea1i "),a.Ub())}function Ft(t,e){if(1&t&&(a.Vb(0,"p",51),a.Rc(1," \u0110i\u1ec3m: "),a.Vb(2,"b"),a.Rc(3),a.Ub(),a.Ub()),2&t){var n=a.gc(2).$implicit;a.Db(3),a.Sc(n.point)}}function zt(t,e){if(1&t&&(a.Vb(0,"p",52),a.Rc(1),a.Ub()),2&t){var n=a.gc(2).$implicit,i=a.gc(3);a.Db(1),a.Tc(" ",i.calculationTime(n.createdAt)," tr\u01b0\u1edbc ")}}function $t(t,e){if(1&t&&(a.Vb(0,"div",53),a.Vb(1,"p",52),a.Rc(2," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),a.Ub(),a.Vb(3,"p",52),a.Rc(4),a.Ub(),a.Ub()),2&t){var n=a.gc(2).$implicit,i=a.gc(3);a.Db(4),a.Tc(" ",n.answer.files&&i.formatArray(n.answer.files).length>0?i.formatArray(n.answer.files).length:0," ")}}function Qt(t,e){if(1&t){var n=a.Wb();a.Vb(0,"div",60),a.Vb(1,"div",25),a.Vb(2,"span",26),a.Qb(3,"azt-create-avatar",27),a.Ub(),a.Vb(4,"div",61),a.cc("click",function(){a.Dc(n);var t=a.gc().$implicit;return a.gc(3).goToResultReview(t)}),a.Vb(5,"div",31),a.Vb(6,"span",32),a.Vb(7,"span",33),a.Rc(8),a.Ub(),a.Ub(),a.Ub(),a.Vb(9,"div",53),a.Pc(10,jt,2,0,"p",41),a.Pc(11,Ht,2,0,"p",42),a.Pc(12,_t,2,0,"p",42),a.Pc(13,Ft,4,1,"p",44),a.Pc(14,zt,2,1,"p",45),a.Ub(),a.Pc(15,$t,5,1,"div",36),a.Ub(),a.Ub(),a.Ub()}if(2&t){var i=a.gc().$implicit;a.nc("ngClass",a.sc(11,F,i.isNotSubmit||i.mustReSubmit)),a.Db(3),a.nc("linkAvatar",i.avatar)("nameCreateAvatar",i.fullName)("size",30),a.Db(5),a.Sc(i.fullName),a.Db(2),a.nc("ngIf",i.isSubmitted),a.Db(1),a.nc("ngIf",i.isNotSubmit),a.Db(1),a.nc("ngIf",i.mustReSubmit),a.Db(1),a.nc("ngIf",i.isMarked),a.Db(1),a.nc("ngIf",null!=i.createdAt),a.Db(1),a.nc("ngIf",i.isMarked||i.isSubmitted)}}function qt(t,e){if(1&t&&(a.Vb(0,"div",58),a.Pc(1,Et,19,21,"div",10),a.Pc(2,Qt,16,13,"ng-template",null,68,a.Qc),a.Ub()),2&t){var n=e.$implicit,i=a.zc(3),c=a.gc(3);a.nc("ngClass",a.sc(3,_,c.isOpenSideNav)),a.Db(1),a.nc("ngIf",n.answer)("ngIfElse",i)}}function Wt(t,e){if(1&t&&(a.Vb(0,"div",67),a.Pc(1,qt,4,5,"div",55),a.Ub()),2&t){var n=a.gc(2);a.Db(1),a.nc("ngForOf",n.studentLists)}}function Jt(t,e){if(1&t&&(a.Vb(0,"div",9),a.Pc(1,Dt,3,2,"mat-tab-group",10),a.Pc(2,Wt,2,1,"ng-template",null,11,a.Qc),a.Ub()),2&t){var n=a.zc(3),i=a.gc();a.Db(1),a.nc("ngIf",!i.isHomeworkFlow)("ngIfElse",n)}}var Gt=function(t){return{"mt-3":t}},Kt=function(){var t=function(){function t(e,i,c,o,r){n(this,t),this.activeRoute=e,this.router=i,this.commonService=c,this.localize=o,this.apiService=r,this.studentLists=[],this.studentListsInClass=[],this.classObj={},this.obj={},this.backToLink="",this.totalSubmitted=0,this.totalSubmitByClass=0,this.examHasClass=!1,this.hasEssayQuestion=!1,this.isNotTestedYet=!1,this.isHomeworkFlow=!1,this.isSortByMark=!1,this.isSortByTime=!1,this.isSortByName=!1,this.searchKey="",this.isOpenSideNav=!0,this.goToResult=new a.o,this.openResultHistory=new a.o,this.studentListPage=[],this.isLoadingPage=!1,this.checkPaging=!1,this.curPage=1,this.totalPage=0,this.studentListsOfSort=[]}return c(t,[{key:"goToResultReview",value:function(t){t.isNotSubmit||t.mustReSubmit||this.checkExecuteViewTest()||this.goToResult.emit(t)}},{key:"clickPage",value:function(t){this.createPageStudent(t)}},{key:"openResultHistoryReview",value:function(t){this.openResultHistory.emit(t)}},{key:"checkValidClickLink",value:function(t){return"[]"!=t.answers&&null!=t.answers}},{key:"checkExecuteViewTest",value:function(){return this.commonService.hasConfigAndViewClassroomPermission("exam",this.obj.permissionObj)}},{key:"checkShowIconHistory",value:function(t){var e=!1;return 1!=t.status&&(t.isMarked||t.isNotMarked)&&(e=!0),0==this.obj.examType||1==this.obj.examType?!(!e||!this.commonService.checkEmptyAnswerExamAll(t)):!(!e||""!=t.files&&null!=t.files&&!this.commonService.checkEmptyAnswerExamAll(t))}},{key:"createPageStudent",value:function(t){if(this.studentListPage=[],this.studentLists){var e=this.studentLists.length;if(this.totalPage=Math.ceil(e/100),e>100)for(var n=100*(t-1);n<100*t;n++)this.studentLists.length-1>=n&&this.studentListPage.push(this.studentLists[n]);else this.checkPaging=!1,this.studentListPage=this.studentLists;this.isLoadingPage=!1}}},{key:"copyLinkToClipboard",value:function(){return"".concat(location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),"/de-thi/").concat(this.obj.hashId)}},{key:"copyLinkHomeWorkToClipboard",value:function(){return"".concat(location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),"/bai-tap/").concat(this.obj.hashId)}},{key:"showCopySuccess",value:function(){this.commonService.snackSuccess("Sao ch\xe9p th\xe0nh c\xf4ng","")}},{key:"checkArray",value:function(t){return!!Array.isArray(t)}},{key:"calculationTime",value:function(t,e){return this.commonService.calculationTime(t,e)}},{key:"calculationTestedTime",value:function(t,e){return this.commonService.calculationTestedTime(t,e)}},{key:"formatArray",value:function(t){return JSON.parse(t)}},{key:"goToStudentList",value:function(t){this.commonService.myNavigation("/admin/student/class-details/"+t)}},{key:"isSearch",value:function(t){return 0==t.length}},{key:"checkSortListStudent",value:function(){for(var t=0;t<this.studentListsInClass.length;t++)this.studentListsInClass[t].results=0==this.studentListsInClass[t].classObj.sortType?this.commonService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(this.studentListsInClass[t].results),"pos","id"):this.commonService.sortFirstNameStudents(this.commonService.myClone(this.studentListsInClass[t].results))}},{key:"ngOnInit",value:function(){this.createPageStudent(this.curPage),this.isSortByMark||this.isSortByTime||this.isSortByName||this.checkSortListStudent()}},{key:"ngOnChanges",value:function(){this.createPageStudent(this.curPage)}},{key:"ngOnDestroy",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)(a.Pb(o.a),a.Pb(o.i),a.Pb(r.a),a.Pb(s.e),a.Pb(l.a))},t.\u0275cmp=a.Jb({type:t,selectors:[["app-student-result-view"]],inputs:{studentLists:"studentLists",studentListsInClass:"studentListsInClass",classObj:"classObj",obj:"obj",backToLink:"backToLink",totalSubmitted:"totalSubmitted",totalSubmitByClass:"totalSubmitByClass",examHasClass:"examHasClass",hasEssayQuestion:"hasEssayQuestion",isNotTestedYet:"isNotTestedYet",isHomeworkFlow:"isHomeworkFlow",isSortByMark:"isSortByMark",isSortByTime:"isSortByTime",isSortByName:"isSortByName",searchKey:"searchKey",isOpenSideNav:"isOpenSideNav"},outputs:{goToResult:"goToResult",openResultHistory:"openResultHistory"},features:[a.Bb],decls:3,vars:5,consts:[[1,"box-content","py-2","scrollable-content",3,"ngClass"],[4,"ngIf"],["class","pt-0 pb-2 px-3 ",4,"ngIf"],[1,"text-center","mt-3"],["class","h5",4,"ngIf"],["class","clickable","style","user-select: none;",3,"cdkCopyToClipboard","click",4,"ngIf"],[1,"h5"],[1,"clickable",2,"user-select","none",3,"cdkCopyToClipboard","click"],[2,"vertical-align","middle","color","#333333"],[1,"pt-0","pb-2","px-3"],[4,"ngIf","ngIfElse"],["HomeworkFlow",""],[3,"label",4,"ngIf"],[3,"label"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"row","ml-0","mr-0","pl-3"],[1,"h5","clickable","link-stu",3,"click"],["class","ml-2",4,"ngIf"],[1,"row","ml-0","mr-0","pl-0","pr-0"],["class","col-12 col-sm-12 col-md-4 col-lg-3 mb-2 d-flex","style","align-items: stretch;",3,"ngClass",4,"ngFor","ngForOf"],[1,"ml-2"],[2,"cursor","pointer",3,"matTooltip","nameCreateAvatar","size","linkAvatar"],[1,"col-12","col-sm-12","col-md-4","col-lg-3","mb-2","d-flex",2,"align-items","stretch",3,"ngClass"],[1,"box-item",2,"align-self","stretch","width","100%",3,"ngClass"],[1,"student-item"],[1,"stdimg","align-self-center"],[3,"linkAvatar","nameCreateAvatar","size"],["class","text-center",3,"click",4,"ngIf"],[1,"stdinfo"],[2,"width","100%",3,"routerLink","queryParams"],[1,"stdinfo-fullname"],[2,"vertical-align","middle"],[2,"vertical-align","middle","color","#333333","font-weight","400","font-size","15px","word-break","break-word"],["style","vertical-align: middle; color: #9F0000; font-size: 12px;","matTooltip","H\u1ecdc sinh \u0111ang thi l\u1ea1i",4,"ngIf"],["class","d-flex justify-content-between","style","padding-top: 3px;",4,"ngIf"],["class","d-flex justify-content-between",4,"ngIf"],[1,"text-center",3,"click"],["matTooltip","L\u1ecbch s\u1eed thi",2,"vertical-align","middle","margin-top","2px","color","#cccccc"],["matTooltip","H\u1ecdc sinh \u0111ang thi l\u1ea1i",2,"vertical-align","middle","color","#9F0000","font-size","12px"],[1,"d-flex","justify-content-between",2,"padding-top","3px"],["style","color: #F39C12; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","color: #9F0000; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","color: #9C9C9C; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","font-size: 13px; margin-bottom: 2px; color: #9C9C9C",4,"ngIf"],[2,"color","#F39C12","font-size","13px","margin-bottom","2px"],[2,"color","#9F0000","font-size","13px","margin-bottom","2px"],[2,"color","#9C9C9C","font-size","13px","margin-bottom","2px"],["style","padding: 7px;margin-bottom: 2px;",4,"ngIf"],[2,"padding","7px","margin-bottom","2px"],[2,"font-size","13px","margin-bottom","2px"],[2,"font-size","13px","margin-bottom","2px","color","#9C9C9C"],[1,"d-flex","justify-content-between"],[1,"row","ml-0","mr-0","pl-0","pr-0","mt-2",2,"overflow-y","hidden"],["class","col-12 col-sm-12 col-md-4 col-lg-3 mb-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-12","mt-2"],["class","col-md-11 text-left mt-2",4,"ngIf"],[1,"col-12","col-sm-12","col-md-4","col-lg-3","mb-2",3,"ngClass"],["dataDone",""],[1,"box-item",3,"ngClass"],[1,"stdinfo",3,"click"],["style","color: #9F0000; font-size: 13px; margin-bottom: 0px;",4,"ngIf"],[2,"color","#9F0000","font-size","13px","margin-bottom","0px"],[3,"routerLink","queryParams"],[1,"col-md-11","text-left","mt-2"],[3,"lengthPage","paging","SendPage"],[1,"row","ml-0","mr-0","pl-0","pr-0","mt-2"],["answerIdNull",""],[3,"mark"]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Pc(1,C,6,4,"div",1),a.Pc(2,Jt,4,2,"div",2),a.Ub()),2&t&&(a.nc("ngClass",a.sc(3,Gt,!e.isHomeworkFlow)),a.Db(1),a.nc("ngIf",e.isNotTestedYet),a.Db(1),a.nc("ngIf",!e.isNotTestedYet))},directives:[u.k,u.m,b.a,g.a,f.b,f.a,u.l,d.a,m.a,o.k,p.a,h.a],pipes:[v.p],styles:[".box-content[_ngcontent-%COMP%]{background:inherit;background-color:#f9f9f9;box-sizing:border-box;border:1px solid #e9e9e9;border-radius:5px;box-shadow:none}a[_ngcontent-%COMP%]{color:#000}.disableClick[_ngcontent-%COMP%]{cursor:default!important}.scrollable-content[_ngcontent-%COMP%]{height:calc(100vh - 166px);overflow-y:scroll}.scrollable-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;margin:5px}.scrollable-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 5px #cecece;border-radius:10px}.scrollable-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cfcece;border-radius:10px}.box-item[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border:1px solid #ccc;border-radius:4px;margin-bottom:10px;cursor:pointer;position:relative}.badge-testing[_ngcontent-%COMP%]{position:absolute;top:0;right:6px;border-radius:4px;padding:0 3px}.student-item[_ngcontent-%COMP%]{display:flex;position:relative}.link-stu[_ngcontent-%COMP%], .student-item[_ngcontent-%COMP%]   .deleteBtn[_ngcontent-%COMP%], .student-item[_ngcontent-%COMP%]   .enterClsWrap[_ngcontent-%COMP%]{display:flex}.link-stu[_ngcontent-%COMP%]{align-items:center}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.stdimg[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-right:10px}.stdinfo[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto}.menu-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#828282}.create-avatar[_ngcontent-%COMP%]{vertical-align:middle;display:inline-block;margin-top:2px;border-radius:50%;width:30px;text-transform:uppercase;height:30px;background:#ddd;text-align:center;padding-top:5px}@media screen and (max-width:750px){.scrollable-content[_ngcontent-%COMP%]{min-height:calc(100vh - 170px);height:auto;overflow-y:inherit}.tested_list_container[_ngcontent-%COMP%]{height:auto}}"]}),t}()},unp7:function(e,i,a){"use strict";a.d(i,"a",function(){return b});var o=a("mrSG"),r=a("fXoL"),s=a("gbi4"),l=a("yTNM"),u=function(t){return t[t.Cdn=0]="Cdn",t[t.CdnTimestamp=1]="CdnTimestamp",t[t.Rawlink=2]="Rawlink",t[t.RawlinkTimestamp=3]="RawlinkTimestamp",t}({}),b=function(){var e=function(){function e(t,i){n(this,e),this.commonService=t,this.apiService=i}return c(e,[{key:"isSupportedBrowswer",value:function(){var t,e,n;navigator.sayswho=(n=(e=navigator.userAgent).match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(n[1])?"IE "+((t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===n[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" ")));var i=navigator.sayswho.toString();return!(!["chrome"].includes(i.split(" ")[0].toLowerCase())||parseInt(i.split(" ")[1])<80)}},{key:"getExtensionFile",value:function(t){if(!t)return"";var e=t.split(".");return e.length<=1?"":e[e.length-1].toLocaleLowerCase().split("_")[0]}},{key:"translateMetaTitle",value:function(t){this.commonService.translateMetaData({title:"Export PDF: "+t.data.examObj.name,description:"Export PDF: "+t.data.examObj.name,image:"lang_cms_test_image"})}},{key:"handleError",value:function(t){var e=this;this.commonService.myTranslate([t.message,"lang_cms_common_ok"]).subscribe(function(n){e.commonService.snackError(n[t.message],n.lang_cms_common_ok)})}},{key:"convertAnswersArr",value:function(t,e){0!=t.length&&t.forEach(function(t){e["id_"+t.QuestionId]=t.AnswerContent[0].Content})}},{key:"create_pdf",value:function(t,e,n){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var c;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!n){i.next=4;break}this.convertMargitPagePdf_forHomeWork(),i.next=6;break;case 4:return i.next=6,this.convertMargitPagePdf(t);case 6:if(!(c=document.getElementById(e))){i.next=11;break}return i.next=10,html2pdf().set({pagebreak:{mode:"avoid-all"},image:{type:"jpeg",quality:1},html2canvas:{logging:!0,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"p"}}).from(c).output("blob");case 10:return i.abrupt("return",i.sent);case 11:case"end":return i.stop()}},i,this)}))}},{key:"convertToBase64",value:function(t,e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,c,a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=t,n.t0=e,n.next=n.t0===u.Cdn?4:n.t0===u.CdnTimestamp?6:n.t0===u.RawlinkTimestamp?8:9;break;case 4:return i=this.commonService.getMyCdn(t),n.abrupt("break",9);case 6:return i=this.commonService.getMyCdn(t)+"?t="+Date.now(),n.abrupt("break",9);case 8:i=t+"?t="+Date.now();case 9:return n.next=11,fetch(i);case 11:return c=n.sent,n.next=14,c.blob();case 14:return a=n.sent,n.next=17,new Promise(function(t){var e=new FileReader;e.readAsDataURL(a),e.onloadend=function(){t(e.result)}});case 17:return o=n.sent,n.abrupt("return",o&&"string"==typeof o?o:(console.log("kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh chu\u1ed7i base64: "+t),t));case 19:case"end":return n.stop()}},n,this)}))}},{key:"convertAndRetryToBase64",value:function(t){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getExtensionFile(t),!["pdf","jpg","jpeg","png"].includes(n)){e.next=60;break}if(i=[u.Cdn,u.CdnTimestamp,u.Rawlink,u.RawlinkTimestamp],!this.commonService.isViettelCDN(t)){e.next=26;break}return console.log(">>>> YAAAAAA, \u0111\xe2y l\xe0 link Viettel, qu\xe1 tr\xecnh convert c\xf3 th\u1ec3 l\xe2u h\u01a1n b\xecnh th\u01b0\u1eddng, v\xec ph\u1ea3i convert tu\u1ea7n t\u1ef1 sau m\u1ed7i 0.5 gi\xe2y"),e.prev=5,e.next=8,this.convertToBase64(t,i[0]);case 8:c=e.sent,e.next=24;break;case 11:return e.prev=11,e.t0=e.catch(5),e.prev=13,e.next=16,this.asyncTimeout(500);case 16:return e.next=18,this.convertToBase64(t,i[1]);case 18:c=e.sent,e.next=24;break;case 21:e.prev=21,e.t1=e.catch(13),console.log("Kh\xf4ng th\u1ec3 convert url VIETTEL n\xe0y th\xe0nh base64 sau 2 l\u1ea7n th\u1eed: "+t),c=t;case 24:e.next=59;break;case 26:return e.prev=26,e.next=29,this.convertToBase64(t,i[0]);case 29:c=e.sent,e.next=59;break;case 32:return e.prev=32,e.t2=e.catch(26),e.prev=34,e.next=37,this.convertToBase64(t,i[1]);case 37:c=e.sent,e.next=59;break;case 40:return e.prev=40,e.t3=e.catch(34),e.prev=42,e.next=45,this.convertToBase64(t,i[2]);case 45:c=e.sent,e.next=59;break;case 48:return e.prev=48,e.t4=e.catch(42),e.prev=50,e.next=53,this.convertToBase64(t,i[3]);case 53:c=e.sent,e.next=59;break;case 56:e.prev=56,e.t5=e.catch(50),console.log("Kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh base64 sau v\xe0i l\u1ea7n retry: "+t),c=t;case 59:return e.abrupt("return",c);case 60:return e.abrupt("return",(console.log("\u0110\u1ecbnh d\u1ea1ng file kh\xf4ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3: "+t),""));case 61:case"end":return e.stop()}},e,this,[[5,11],[13,21],[26,32],[34,40],[42,48],[50,56]])}))}},{key:"processUserResult",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,c,a,o,r,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=this.commonService.parseJson(e),c=t(i.pages),n.prev=2,c.s();case 4:if((a=c.n()).done){n.next=25;break}if(!(o=a.value).draw){n.next=15;break}if(n.t0=this.commonService.isViettelCDN(i.pages[0].backgroundImage),!n.t0){n.next=11;break}return n.next=11,this.asyncTimeout(500);case 11:return n.next=13,this.convertAndRetryToBase64(o.draw);case 13:r=n.sent,o.draw=r;case 15:if(n.t1=this.commonService.isViettelCDN(i.pages[0].backgroundImage),!n.t1){n.next=19;break}return n.next=19,this.asyncTimeout(500);case 19:return n.next=21,this.convertAndRetryToBase64(o.backgroundImage);case 21:s=n.sent,o.backgroundImage=s;case 23:n.next=4;break;case 25:n.next=30;break;case 27:n.prev=27,n.t2=n.catch(2),c.e(n.t2);case 30:return n.prev=30,c.f(),n.finish(30);case 33:return n.abrupt("return",i);case 34:case"end":return n.stop()}},n,this,[[2,27,30,33]])}))}},{key:"processGroupImages",value:function(e,n){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var c,a,o,r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!e[0].name.startsWith("[PDFv2]")){i.next=25;break}c=t(e),i.prev=2,c.s();case 4:if((a=c.n()).done){i.next=17;break}if(o=a.value,i.t0=this.commonService.isViettelCDN(e[0].questionContent[0].groupUrl),!i.t0){i.next=10;break}return i.next=10,this.asyncTimeout(500);case 10:if(!o.questionContent[0].groupUrl||!n.includes(o.indexLabel)){i.next=15;break}return i.next=13,this.convertAndRetryToBase64(o.questionContent[0].groupUrl);case 13:r=i.sent,o.questionContent[0].groupUrl=r;case 15:i.next=4;break;case 17:i.next=22;break;case 19:i.prev=19,i.t1=i.catch(2),c.e(i.t1);case 22:return i.prev=22,c.f(),i.finish(22);case 25:case"end":return i.stop()}},i,this,[[2,19,22,25]])}))}},{key:"processQuestionImages",value:function(e){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,c,a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(1!=e[0].isImage){n.next=24;break}i=t(e),n.prev=2,i.s();case 4:if((c=i.n()).done){n.next=16;break}if(a=c.value,n.t0=this.commonService.isViettelCDN(e[0].questionContent[0].url),!n.t0){n.next=10;break}return n.next=10,this.asyncTimeout(500);case 10:return n.next=12,this.convertAndRetryToBase64(a.questionContent[0].url);case 12:o=n.sent,a.questionContent[0].url=o;case 14:n.next=4;break;case 16:n.next=21;break;case 18:n.prev=18,n.t1=n.catch(2),i.e(n.t1);case 21:return n.prev=21,i.f(),n.finish(21);case 24:case"end":return n.stop()}},n,this,[[2,18,21,24]])}))}},{key:"parsingQuestions",value:function(t,e){var n=this;t.forEach(function(t){"string"==typeof t.answerConfig&&(t.answerConfig=n.commonService.parseJson(t.answerConfig)),"string"==typeof t.answerResult&&(t.answerResult=n.commonService.parseJson(t.answerResult)),"string"==typeof t.coordinates&&(t.coordinates=n.commonService.parseJson(t.coordinates)),"string"==typeof t.questionContent&&e&&(t.questionContent=n.commonService.parseJson(t.questionContent))})}},{key:"parseQuestionsFor_PDFv2",value:function(t,e){var n=this;t=e.data.questionObjs;for(var i=0;i<t.length;i++)t[i].indexLabel=i;return t.forEach(function(t){"string"==typeof t.answerConfig&&(t.answerConfig=n.commonService.parseJson(t.answerConfig)),"string"==typeof t.answerResult&&(t.answerResult=n.commonService.parseJson(t.answerResult)),"string"==typeof t.coordinates&&(t.coordinates=n.commonService.parseJson(t.coordinates)),"string"==typeof t.questionContent&&(t.questionContent=n.commonService.parseJson(t.questionContent))}),t}},{key:"resetPaddingTopElements",value:function(t){if(document.getElementById("multipleChoiceWrap")){for(var e=0;e<t.length;e++){var n=document.getElementById("question_item_box_"+t[e].id);n&&(n.style.paddingTop="")}var i=document.getElementById("essayPdfTitle");if(i){i.style.marginTop="";for(var c=document.getElementsByClassName("essayPdfImage"),a=0;a<c.length;a++){c[a].style.marginTop="";for(var o=c[a].children,r=0;r<o.length;r++)"IMG"!==o[r].tagName||o[r].classList.contains("absolute-img")||(o[r].style.height="",o[r].style.width="")}}}}},{key:"asyncTimeout",value:function(t){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0="Waited ",e.next=3,new Promise(function(e){setTimeout(function(){return e(t)},t)});case 3:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1," miliseconds"));case 5:case"end":return e.stop()}},e)}))}},{key:"convertMargitPagePdf",value:function(t){var e;return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,c,a,o,r,s,l,u,b,g,f,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.resetPaddingTopElements(t),n.next=3,this.asyncTimeout(5e3);case 3:if(i=document.getElementById("multipleChoiceWrap")){for(10,15,c=(null==i?void 0:i.getBoundingClientRect().width)/210,a=document.createElement("style"),o=297*c,r=!1,s=0;s<t.length;s++)(l=document.getElementById("question_item_box_"+t[s].id))&&(u=l.getBoundingClientRect().height+10,!1===r&&(r=null===(e=document.getElementById("multipleChoiceWrapHeader"))||void 0===e?void 0:e.getBoundingClientRect().height,r+=40),r+u+15>o&&(l.style.paddingTop=Math.floor(o-r)+"px",r=0),r+=u);if(document.head.appendChild(a),b=document.getElementById("essayPdfTitle"))for(b.style.marginTop=Math.floor(o-r+20)+"px",r=b.getBoundingClientRect().height,g=document.getElementsByClassName("essayPdfImage"),f=0,d=0;d<g.length;d++)g[d].getBoundingClientRect().height>0&&(0===f?(g[d].getBoundingClientRect().height>o-r&&this.changeSizeHeightImage(o-r,g[d]),r+=g[d].getBoundingClientRect().height):(g[d].getBoundingClientRect().height>o&&this.changeSizeHeightImage(o-r,g[d]),g[d].style.marginTop=Math.floor(o-r)+"px",r=g[d].getBoundingClientRect().height),this.floorSizeImage(g[d]),f++)}case 5:case"end":return n.stop()}},n,this)}))}},{key:"changeSizeHeightImage",value:function(t,e){for(var n=e.children,i=0;i<n.length;i++)"IMG"!==n[i].tagName||n[i].classList.contains("absolute-img")||(n[i].style.height=t+"px",n[i].style.width="auto")}},{key:"floorSizeImage",value:function(t){for(var e=t.children,n=0;n<e.length;n++)if("IMG"===e[n].tagName){var i=e[n].getBoundingClientRect(),c=e[n];if(e[n].classList.contains("rotated-img")){e[n].style.width=Math.floor(c.width)+"px";var a=e[n].getAttribute("data-ratio");e[n].style.height=Math.floor(c.width/a)+"px"}else e[n].classList.contains("absolute-img")||(e[n].style.height=Math.floor(i.height)+"px",e[n].style.width=Math.floor(i.width)+"px")}}},{key:"convertMargitPagePdf_forHomeWork",value:function(){var t,e=document.getElementById("multipleChoiceWrap");if(e){var n=(null==e?void 0:e.getBoundingClientRect().width)/210*297,i=!1;i=null===(t=document.getElementById("multipleChoiceWrapHeader"))||void 0===t?void 0:t.getBoundingClientRect().height;var c=document.getElementById("essayPdfTitle");if(c){i+=c.getBoundingClientRect().height;for(var a=document.getElementsByClassName("essayPdfImage"),o=0,r=0;r<a.length;r++)a[r].getBoundingClientRect().height>0&&(0===o?(a[r].getBoundingClientRect().height>n-i&&this.changeSizeHeightImage_hw(n-i,a[r]),i+=a[r].getBoundingClientRect().height):(a[r].getBoundingClientRect().height>n&&this.changeSizeHeightImage_hw(n-i,a[r]),a[r].style.marginTop=Math.floor(n-i)+"px",i=a[r].getBoundingClientRect().height),this.floorSizeImage_hw(a[r]),o++)}}}},{key:"changeSizeHeightImage_hw",value:function(t,e){for(var n=e.children,i=0;i<n.length;i++)"IMG"===n[i].tagName&&(n[i].style.height=t+"px",n[i].style.width="auto")}},{key:"floorSizeImage_hw",value:function(t){for(var e=t.children,n=0;n<e.length;n++)if("IMG"===e[n].tagName){var i=e[n].getBoundingClientRect(),c=e[n];if(e[n].classList.contains("rotated-img")){e[n].style.width=Math.floor(c.width)+"px";var a=e[n].getAttribute("data-ratio");e[n].style.height=Math.floor(c.width/a)+"px"}else e[n].style.height=Math.floor(i.height)+"px",e[n].style.width=Math.floor(i.width)+"px"}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Zb(s.a),r.Zb(l.a))},e.\u0275prov=r.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();