(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{X2wh:function(t,e,i){"use strict";i.d(e,"a",function(){return Jt});var n=i("fXoL"),c=i("tyNb"),o=i("gbi4"),s=i("Avyq"),a=i("yTNM"),l=i("ofXK"),r=i("UXJo"),b=i("NFeN"),d=i("wZkO"),g=i("IU+r"),f=i("Qu3c"),m=i("uZ1F"),p=i("loSA"),u=i("gaSO");function h(t,e){1&t&&(n.Vb(0,"p",6),n.Rc(1,"Ch\u01b0a c\xf3 h\u1ecdc sinh n\xe0o tham gia thi"),n.Ub())}function v(t,e){if(1&t){const t=n.Wb();n.Vb(0,"a",7),n.cc("click",function(){return n.Dc(t),n.gc(2).showCopySuccess()}),n.Vb(1,"mat-icon",8),n.Rc(2,"share"),n.Ub(),n.Vb(3,"span",8),n.Rc(4,"\xa0Copy link \u0111\u1ec1 thi"),n.Ub(),n.Ub()}if(2&t){const t=n.gc(2);n.nc("cdkCopyToClipboard",t.copyLinkToClipboard())}}function w(t,e){1&t&&(n.Vb(0,"p",6),n.Rc(1,"Ch\u01b0a c\xf3 h\u1ecdc sinh n\xe0o n\u1ed9p b\xe0i t\u1eadp"),n.Ub())}function y(t,e){if(1&t){const t=n.Wb();n.Vb(0,"a",7),n.cc("click",function(){return n.Dc(t),n.gc(2).showCopySuccess()}),n.Vb(1,"mat-icon",8),n.Rc(2,"share"),n.Ub(),n.Vb(3,"span",8),n.Rc(4,"\xa0Copy link b\xe0i t\u1eadp"),n.Ub(),n.Ub()}if(2&t){const t=n.gc(2);n.nc("cdkCopyToClipboard",t.copyLinkHomeWorkToClipboard())}}function k(t,e){if(1&t&&(n.Vb(0,"div"),n.Vb(1,"div",3),n.Pc(2,h,2,0,"p",4),n.Pc(3,v,5,1,"a",5),n.Pc(4,w,2,0,"p",4),n.Pc(5,y,5,1,"a",5),n.Ub(),n.Ub()),2&t){const t=n.gc();n.Db(2),n.nc("ngIf",!t.isHomeworkFlow),n.Db(1),n.nc("ngIf",!t.isHomeworkFlow),n.Db(1),n.nc("ngIf",t.isHomeworkFlow),n.Db(1),n.nc("ngIf",t.isHomeworkFlow)}}function P(t,e){if(1&t&&(n.Vb(0,"span",21),n.Qb(1,"azt-create-avatar",22),n.Ub()),2&t){const t=n.gc().$implicit;n.Db(1),n.oc("matTooltip",t.classObj.teacherAvatar.fullName),n.nc("nameCreateAvatar",t.classObj.teacherAvatar.fullName)("size",25)("linkAvatar",t.classObj.teacherAvatar.avatar)}}function C(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div",37),n.cc("click",function(){n.Dc(t);const e=n.gc().$implicit;return n.gc(5).openResultHistoryReview(e)}),n.Vb(1,"mat-icon",38),n.Rc(2,"history"),n.Ub(),n.Ub()}}function U(t,e){1&t&&(n.Vb(0,"span",39),n.Rc(1," (\u0110ang Thi)"),n.Ub())}function V(t,e){1&t&&(n.Vb(0,"p",46),n.Rc(1," Ch\u01b0a ch\u1ea5m "),n.Ub())}function x(t,e){1&t&&(n.Vb(0,"p",47),n.Rc(1," \u0110ang thi "),n.Ub())}function I(t,e){1&t&&n.Qb(0,"span",50)}function D(t,e){if(1&t&&(n.Vb(0,"p",48),n.Rc(1," Ch\u01b0a thi "),n.Pc(2,I,1,0,"span",49),n.Ub()),2&t){const t=n.gc(7);n.Db(2),n.nc("ngIf",t.hasEssayQuestion)}}function _(t,e){if(1&t&&(n.Vb(0,"p",51),n.Rc(1," \u0110i\u1ec3m: "),n.Vb(2,"b"),n.Rc(3),n.Ub(),n.Ub()),2&t){const t=n.gc(2).$implicit;n.Db(3),n.Sc(t.mark)}}function T(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(2).$implicit,e=n.gc(5);n.Db(1),n.Tc(" ",e.calculationTime(t.createdAt)," tr\u01b0\u1edbc ")}}function R(t,e){if(1&t&&(n.Vb(0,"div",40),n.Pc(1,V,2,0,"p",41),n.Pc(2,x,2,0,"p",42),n.Pc(3,D,3,1,"p",43),n.Pc(4,_,4,1,"p",44),n.Pc(5,T,2,1,"p",45),n.Ub()),2&t){const t=n.gc().$implicit;n.Db(1),n.nc("ngIf",t.isNotMarked),n.Db(1),n.nc("ngIf",t.isOnTest),n.Db(1),n.nc("ngIf",t.isNotTested),n.Db(1),n.nc("ngIf",t.isMarked),n.Db(1),n.nc("ngIf",t.isMarked||t.isNotMarked)}}function M(t,e){1&t&&(n.Vb(0,"p",52),n.Rc(1," Th\u1eddi gian l\xe0m b\xe0i: "),n.Ub())}function S(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(2).$implicit,e=n.gc(5);n.Db(1),n.Tc(" ",e.calculationTestedTime(t.startedTest,t.createdAt)," ")}}function O(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(2).$implicit,e=n.gc(5);n.Db(1),n.Tc(" ",e.calculationTestedTime(t.startedTest)," ")}}function N(t,e){if(1&t&&(n.Vb(0,"div",53),n.Pc(1,M,2,0,"p",45),n.Pc(2,S,2,1,"p",45),n.Pc(3,O,2,1,"p",45),n.Ub()),2&t){const t=n.gc().$implicit;n.Db(1),n.nc("ngIf",!t.isNotTested),n.Db(1),n.nc("ngIf",t.isMarked||t.isNotMarked),n.Db(1),n.nc("ngIf",t.isOnTest)}}function L(t,e){1&t&&(n.Vb(0,"p",52),n.Rc(1," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),n.Ub())}function z(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(2).$implicit;n.Db(1),n.Tc(" ",t.files&&t.files.length>0?t.files.length:0," ")}}function A(t,e){if(1&t&&(n.Vb(0,"div",53),n.Pc(1,L,2,0,"p",45),n.Pc(2,z,2,1,"p",45),n.Ub()),2&t){const t=n.gc().$implicit;n.Db(1),n.nc("ngIf",t.isMarked||t.isNotMarked),n.Db(1),n.nc("ngIf",t.isMarked||t.isNotMarked)}}const F=function(t){return{"col-lg-4":t}},B=function(t){return{disableClick:t}},E=function(t){return[t]},H=function(t){return{backto:t}};function j(t,e){if(1&t&&(n.Vb(0,"div",23),n.Vb(1,"div",24),n.Vb(2,"div",25),n.Vb(3,"span",26),n.Qb(4,"azt-create-avatar",27),n.Pc(5,C,3,0,"div",28),n.Ub(),n.Vb(6,"div",29),n.Vb(7,"a",30),n.hc(8,"mylocalize"),n.Vb(9,"div",31),n.Vb(10,"span",32),n.Vb(11,"span",33),n.Rc(12),n.Pc(13,U,2,0,"span",34),n.Ub(),n.Ub(),n.Ub(),n.Pc(14,R,6,5,"div",35),n.Pc(15,N,4,3,"div",36),n.Pc(16,A,3,2,"div",36),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub()),2&t){const t=e.$implicit,i=n.gc(5);n.nc("ngClass",n.sc(15,F,i.isOpenSideNav)),n.Db(1),n.nc("ngClass",n.sc(17,B,t.isNotSubmit||t.mustReSubmit)),n.Db(3),n.nc("linkAvatar",t.avatar)("nameCreateAvatar",t.fullName)("size",30),n.Db(1),n.nc("ngIf",i.checkShowIconHistory(t)),n.Db(2),n.nc("routerLink",n.sc(19,E,n.ic(8,13,"/admin/testbank/test-review/"+i.obj.id+"/"+t.userId+"/"+t.studentId+"/0")))("queryParams",n.sc(21,H,i.backToLink)),n.Db(5),n.Tc("",t.fullName," "),n.Db(1),n.nc("ngIf",1==t.status&&(t.isMarked||t.isNotMarked)),n.Db(1),n.nc("ngIf",!i.isHomeworkFlow),n.Db(1),n.nc("ngIf",!i.isHomeworkFlow),n.Db(1),n.nc("ngIf",!i.isHomeworkFlow&&i.hasEssayQuestion)}}function $(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div",15),n.Vb(1,"div",16),n.Vb(2,"p",17),n.cc("click",function(){n.Dc(t);const i=e.$implicit;return n.gc(4).goToStudentList(i.classObj.id)}),n.Vb(3,"span"),n.Rc(4),n.Ub(),n.Pc(5,P,2,4,"span",18),n.Ub(),n.Ub(),n.Vb(6,"div",19),n.Pc(7,j,17,23,"div",20),n.Ub(),n.Ub()}if(2&t){const t=e.$implicit;n.Db(4),n.Sc(t.classObj.name+"("+t.countSubmitted+"/"+t.classObj.countStudents+")"),n.Db(1),n.nc("ngIf",t.classObj.teacherAvatar),n.Db(2),n.nc("ngForOf",t.results)}}function Q(t,e){if(1&t&&(n.Vb(0,"mat-tab",13),n.Pc(1,$,8,3,"div",14),n.Ub()),2&t){const t=n.gc(3);n.oc("label","Theo l\u1edbp ("+t.totalSubmitByClass+")"),n.Db(1),n.nc("ngForOf",t.studentListsInClass)}}function q(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div",37),n.cc("click",function(){n.Dc(t);const e=n.gc(2).$implicit;return n.gc(4).openResultHistoryReview(e)}),n.Vb(1,"mat-icon",38),n.Rc(2,"history"),n.Ub(),n.Ub()}}function W(t,e){1&t&&(n.Vb(0,"span",39),n.Rc(1," (\u0110ang Thi)"),n.Ub())}function J(t,e){1&t&&(n.Vb(0,"p",46),n.Rc(1," Ch\u01b0a ch\u1ea5m "),n.Ub())}function Y(t,e){1&t&&(n.Vb(0,"p",63),n.Rc(1," \u0110ang thi "),n.Ub())}function G(t,e){1&t&&n.Qb(0,"span",50)}function K(t,e){if(1&t&&(n.Vb(0,"p",48),n.Rc(1," Ch\u01b0a thi "),n.Pc(2,G,1,0,"span",49),n.Ub()),2&t){const t=n.gc(7);n.Db(2),n.nc("ngIf",t.hasEssayQuestion)}}function X(t,e){if(1&t&&(n.Vb(0,"p",51),n.Rc(1," \u0110i\u1ec3m: "),n.Vb(2,"b"),n.Rc(3),n.Ub(),n.Ub()),2&t){const t=n.gc(3).$implicit;n.Db(3),n.Sc(t.mark)}}function Z(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(3).$implicit,e=n.gc(4);n.Db(1),n.Tc(" ",e.calculationTime(t.createdAt)," tr\u01b0\u1edbc ")}}function tt(t,e){if(1&t&&(n.Vb(0,"div",53),n.Pc(1,J,2,0,"p",41),n.Pc(2,Y,2,0,"p",62),n.Pc(3,K,3,1,"p",43),n.Pc(4,X,4,1,"p",44),n.Pc(5,Z,2,1,"p",45),n.Ub()),2&t){const t=n.gc(2).$implicit;n.Db(1),n.nc("ngIf",t.isNotMarked),n.Db(1),n.nc("ngIf",t.isOnTest),n.Db(1),n.nc("ngIf",t.isNotTested),n.Db(1),n.nc("ngIf",t.isMarked),n.Db(1),n.nc("ngIf",t.isMarked||t.isNotMarked)}}function et(t,e){1&t&&(n.Vb(0,"p",52),n.Rc(1," Th\u1eddi gian l\xe0m b\xe0i: "),n.Ub())}function it(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(3).$implicit,e=n.gc(4);n.Db(1),n.Tc(" ",e.calculationTestedTime(t.startedTest,t.createdAt)," ")}}function nt(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(3).$implicit,e=n.gc(4);n.Db(1),n.Tc(" ",e.calculationTestedTime(t.startedTest)," ")}}function ct(t,e){if(1&t&&(n.Vb(0,"div",53),n.Pc(1,et,2,0,"p",45),n.Pc(2,it,2,1,"p",45),n.Pc(3,nt,2,1,"p",45),n.Ub()),2&t){const t=n.gc(2).$implicit;n.Db(1),n.nc("ngIf",!t.isNotTested),n.Db(1),n.nc("ngIf",t.isMarked||t.isNotMarked),n.Db(1),n.nc("ngIf",t.isOnTest)}}function ot(t,e){1&t&&(n.Vb(0,"p",52),n.Rc(1," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),n.Ub())}function st(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(3).$implicit;n.Db(1),n.Tc(" ",t.files&&t.files.length>0?t.files.length:0," ")}}function at(t,e){if(1&t&&(n.Vb(0,"div",53),n.Pc(1,ot,2,0,"p",45),n.Pc(2,st,2,1,"p",45),n.Ub()),2&t){const t=n.gc(2).$implicit;n.Db(1),n.nc("ngIf",t.isMarked||t.isNotMarked),n.Db(1),n.nc("ngIf",t.isMarked||t.isNotMarked)}}function lt(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div"),n.Vb(1,"div",60),n.Vb(2,"div",25),n.Vb(3,"span",26),n.Qb(4,"azt-create-avatar",27),n.Pc(5,q,3,0,"div",28),n.Ub(),n.Vb(6,"div",61),n.cc("click",function(){n.Dc(t);const e=n.gc().$implicit;return n.gc(4).goToResultReview(e)}),n.Vb(7,"div",31),n.Vb(8,"span",32),n.Vb(9,"span",33),n.Rc(10),n.Pc(11,W,2,0,"span",34),n.Ub(),n.Ub(),n.Ub(),n.Pc(12,tt,6,5,"div",36),n.Pc(13,ct,4,3,"div",36),n.Pc(14,at,3,2,"div",36),n.Ub(),n.Ub(),n.Ub(),n.Ub()}if(2&t){const t=n.gc().$implicit,e=n.gc(4);n.Db(1),n.nc("ngClass",n.sc(10,B,t.isNotSubmit||t.mustReSubmit)),n.Db(3),n.nc("linkAvatar",t.avatar)("nameCreateAvatar",t.fullName)("size",30),n.Db(1),n.nc("ngIf",e.checkShowIconHistory(t)),n.Db(5),n.Tc("",t.fullName," "),n.Db(1),n.nc("ngIf",1==t.status&&(t.isMarked||t.isNotMarked)),n.Db(1),n.nc("ngIf",!e.isHomeworkFlow),n.Db(1),n.nc("ngIf",!e.isHomeworkFlow),n.Db(1),n.nc("ngIf",!e.isHomeworkFlow&&e.hasEssayQuestion)}}function rt(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div",37),n.cc("click",function(){n.Dc(t);const e=n.gc(2).$implicit;return n.gc(4).openResultHistoryReview(e)}),n.Vb(1,"mat-icon",38),n.Rc(2,"history"),n.Ub(),n.Ub()}}function bt(t,e){1&t&&(n.Vb(0,"span",39),n.Rc(1," (\u0110ang Thi)"),n.Ub())}function dt(t,e){1&t&&(n.Vb(0,"p",46),n.Rc(1," Ch\u01b0a ch\u1ea5m "),n.Ub())}function gt(t,e){1&t&&(n.Vb(0,"p",63),n.Rc(1," \u0110ang thi "),n.Ub())}function ft(t,e){1&t&&n.Qb(0,"span",50)}function mt(t,e){if(1&t&&(n.Vb(0,"p",48),n.Rc(1," Ch\u01b0a thi "),n.Pc(2,ft,1,0,"span",49),n.Ub()),2&t){const t=n.gc(7);n.Db(2),n.nc("ngIf",t.hasEssayQuestion)}}function pt(t,e){if(1&t&&(n.Vb(0,"p",51),n.Rc(1," \u0110i\u1ec3m: "),n.Vb(2,"b"),n.Rc(3),n.Ub(),n.Ub()),2&t){const t=n.gc(3).$implicit;n.Db(3),n.Sc(t.mark)}}function ut(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(3).$implicit,e=n.gc(4);n.Db(1),n.Tc(" ",e.calculationTime(t.createdAt)," tr\u01b0\u1edbc ")}}function ht(t,e){if(1&t&&(n.Vb(0,"div",53),n.Pc(1,dt,2,0,"p",41),n.Pc(2,gt,2,0,"p",62),n.Pc(3,mt,3,1,"p",43),n.Pc(4,pt,4,1,"p",44),n.Pc(5,ut,2,1,"p",45),n.Ub()),2&t){const t=n.gc(2).$implicit;n.Db(1),n.nc("ngIf",t.isNotMarked),n.Db(1),n.nc("ngIf",t.isOnTest),n.Db(1),n.nc("ngIf",t.isNotTested),n.Db(1),n.nc("ngIf",t.isMarked),n.Db(1),n.nc("ngIf",t.isMarked||t.isNotMarked)}}function vt(t,e){1&t&&(n.Vb(0,"p",52),n.Rc(1," Th\u1eddi gian l\xe0m b\xe0i: "),n.Ub())}function wt(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(3).$implicit,e=n.gc(4);n.Db(1),n.Tc(" ",e.calculationTestedTime(t.startedTest,t.createdAt)," ")}}function yt(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(3).$implicit,e=n.gc(4);n.Db(1),n.Tc(" ",e.calculationTestedTime(t.startedTest)," ")}}function kt(t,e){if(1&t&&(n.Vb(0,"div",53),n.Pc(1,vt,2,0,"p",45),n.Pc(2,wt,2,1,"p",45),n.Pc(3,yt,2,1,"p",45),n.Ub()),2&t){const t=n.gc(2).$implicit;n.Db(1),n.nc("ngIf",!t.isNotTested),n.Db(1),n.nc("ngIf",t.isMarked||t.isNotMarked),n.Db(1),n.nc("ngIf",t.isOnTest)}}function Pt(t,e){1&t&&(n.Vb(0,"p",52),n.Rc(1," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),n.Ub())}function Ct(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(3).$implicit;n.Db(1),n.Tc(" ",t.files&&t.files.length>0?t.files.length:0," ")}}function Ut(t,e){if(1&t&&(n.Vb(0,"div",53),n.Pc(1,Pt,2,0,"p",45),n.Pc(2,Ct,2,1,"p",45),n.Ub()),2&t){const t=n.gc(2).$implicit;n.Db(1),n.nc("ngIf",t.isMarked||t.isNotMarked),n.Db(1),n.nc("ngIf",t.isMarked||t.isNotMarked)}}function Vt(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div",60),n.Vb(1,"div",25),n.Vb(2,"span",26),n.Qb(3,"azt-create-avatar",27),n.Pc(4,rt,3,0,"div",28),n.Ub(),n.Vb(5,"div",61),n.cc("click",function(){n.Dc(t);const e=n.gc().$implicit;return n.gc(4).goToResultReview(e)}),n.Vb(6,"a",64),n.hc(7,"mylocalize"),n.Vb(8,"div",31),n.Vb(9,"span",32),n.Vb(10,"span",33),n.Rc(11),n.Pc(12,bt,2,0,"span",34),n.Ub(),n.Ub(),n.Ub(),n.Pc(13,ht,6,5,"div",36),n.Pc(14,kt,4,3,"div",36),n.Pc(15,Ut,3,2,"div",36),n.Ub(),n.Ub(),n.Ub(),n.Ub()}if(2&t){const t=n.gc().$implicit,e=n.gc(4);n.nc("ngClass",n.sc(14,B,t.isNotSubmit||t.mustReSubmit)),n.Db(3),n.nc("linkAvatar",t.avatar)("nameCreateAvatar",t.fullName)("size",30),n.Db(1),n.nc("ngIf",e.checkShowIconHistory(t)),n.Db(2),n.nc("routerLink",n.sc(16,E,n.ic(7,12,"/admin/testbank/test-review/"+e.obj.id+"/"+t.userId+"/"+t.studentId+"/0")))("queryParams",n.sc(18,H,e.backToLink)),n.Db(5),n.Tc("",t.fullName," "),n.Db(1),n.nc("ngIf",1==t.status&&(t.isMarked||t.isNotMarked)),n.Db(1),n.nc("ngIf",!e.isHomeworkFlow),n.Db(1),n.nc("ngIf",!e.isHomeworkFlow),n.Db(1),n.nc("ngIf",!e.isHomeworkFlow&&e.hasEssayQuestion)}}function xt(t,e){if(1&t&&(n.Vb(0,"div",58),n.Pc(1,lt,15,12,"div",10),n.Pc(2,Vt,16,20,"ng-template",null,59,n.Qc),n.Ub()),2&t){const t=e.$implicit,i=n.zc(3),c=n.gc(4);n.nc("ngClass",n.sc(3,F,c.isOpenSideNav)),n.Db(1),n.nc("ngIf",t.isNotSubmit||t.mustReSubmit)("ngIfElse",i)}}function It(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div",65),n.Vb(1,"azt-paging",66),n.cc("SendPage",function(e){return n.Dc(t),n.gc(4).clickPage(e)}),n.Ub(),n.Ub()}if(2&t){const t=n.gc(4);n.Db(1),n.nc("lengthPage",t.totalPage)("paging",t.curPage)}}function Dt(t,e){if(1&t&&(n.Vb(0,"mat-tab",13),n.Vb(1,"div",54),n.Pc(2,xt,4,5,"div",55),n.Vb(3,"div",56),n.Pc(4,It,2,2,"div",57),n.Ub(),n.Ub(),n.Ub()),2&t){const t=n.gc(3);n.oc("label","T\u1ef1 do ("+t.studentLists.length+")"),n.Db(2),n.nc("ngForOf",t.studentListPage),n.Db(2),n.nc("ngIf",t.totalPage>1)}}function _t(t,e){if(1&t&&(n.Vb(0,"mat-tab-group"),n.Pc(1,Q,2,2,"mat-tab",12),n.Pc(2,Dt,5,3,"mat-tab",12),n.Ub()),2&t){const t=n.gc(2);n.Db(1),n.nc("ngIf",t.examHasClass),n.Db(1),n.nc("ngIf",t.studentLists&&t.studentLists.length>0)}}function Tt(t,e){1&t&&(n.Vb(0,"p",46),n.Rc(1," Ch\u01b0a ch\u1ea5m "),n.Ub())}function Rt(t,e){1&t&&(n.Vb(0,"p",47),n.Rc(1," Ch\u01b0a n\u1ed9p "),n.Ub())}function Mt(t,e){1&t&&(n.Vb(0,"p",47),n.Rc(1," \u0110\xe3 y\xeau c\u1ea7u n\u1ed9p l\u1ea1i "),n.Ub())}function St(t,e){if(1&t&&(n.Vb(0,"p",51),n.Rc(1," \u0110i\u1ec3m: "),n.Vb(2,"b"),n.Qb(3,"azt-check-mark",69),n.Ub(),n.Ub()),2&t){const t=n.gc(2).$implicit;n.Db(3),n.nc("mark",t.point)}}function Ot(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(2).$implicit,e=n.gc(3);n.Db(1),n.Tc(" ",e.calculationTime(t.createdAt)," tr\u01b0\u1edbc ")}}function Nt(t,e){if(1&t&&(n.Vb(0,"div",53),n.Vb(1,"p",52),n.Rc(2," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),n.Ub(),n.Vb(3,"p",52),n.Rc(4),n.Ub(),n.Ub()),2&t){const t=n.gc(2).$implicit,e=n.gc(3);n.Db(4),n.Tc(" ",t.answer.files&&e.formatArray(t.answer.files).length>0?e.formatArray(t.answer.files).length:0," ")}}function Lt(t,e){if(1&t&&(n.Vb(0,"div"),n.Vb(1,"a",64),n.hc(2,"mylocalize"),n.Vb(3,"div",60),n.Vb(4,"div",25),n.Vb(5,"span",26),n.Qb(6,"azt-create-avatar",27),n.Ub(),n.Vb(7,"div",29),n.Vb(8,"div",31),n.Vb(9,"span",32),n.Vb(10,"span",33),n.Rc(11),n.Ub(),n.Ub(),n.Ub(),n.Vb(12,"div",53),n.Pc(13,Tt,2,0,"p",41),n.Pc(14,Rt,2,0,"p",42),n.Pc(15,Mt,2,0,"p",42),n.Pc(16,St,4,1,"p",44),n.Pc(17,Ot,2,1,"p",45),n.Ub(),n.Pc(18,Nt,5,1,"div",36),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Ub()),2&t){const t=n.gc().$implicit,e=n.gc(3);n.Db(1),n.nc("routerLink",n.sc(15,E,n.ic(2,13,"/admin/homework/mark-exercise/"+t.answer.id)))("queryParams",n.sc(17,H,e.backToLink)),n.Db(2),n.nc("ngClass",n.sc(19,B,t.isNotSubmit||t.mustReSubmit)),n.Db(3),n.nc("linkAvatar",t.avatar)("nameCreateAvatar",t.fullName)("size",30),n.Db(5),n.Sc(t.fullName),n.Db(2),n.nc("ngIf",t.isSubmitted),n.Db(1),n.nc("ngIf",t.isNotSubmit),n.Db(1),n.nc("ngIf",t.mustReSubmit),n.Db(1),n.nc("ngIf",t.isMarked),n.Db(1),n.nc("ngIf",null!=t.createdAt),n.Db(1),n.nc("ngIf",t.isMarked||t.isSubmitted)}}function zt(t,e){1&t&&(n.Vb(0,"p",46),n.Rc(1," Ch\u01b0a ch\u1ea5m "),n.Ub())}function At(t,e){1&t&&(n.Vb(0,"p",47),n.Rc(1," Ch\u01b0a n\u1ed9p "),n.Ub())}function Ft(t,e){1&t&&(n.Vb(0,"p",47),n.Rc(1," \u0110\xe3 y\xeau c\u1ea7u n\u1ed9p l\u1ea1i "),n.Ub())}function Bt(t,e){if(1&t&&(n.Vb(0,"p",51),n.Rc(1," \u0110i\u1ec3m: "),n.Vb(2,"b"),n.Rc(3),n.Ub(),n.Ub()),2&t){const t=n.gc(2).$implicit;n.Db(3),n.Sc(t.point)}}function Et(t,e){if(1&t&&(n.Vb(0,"p",52),n.Rc(1),n.Ub()),2&t){const t=n.gc(2).$implicit,e=n.gc(3);n.Db(1),n.Tc(" ",e.calculationTime(t.createdAt)," tr\u01b0\u1edbc ")}}function Ht(t,e){if(1&t&&(n.Vb(0,"div",53),n.Vb(1,"p",52),n.Rc(2," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),n.Ub(),n.Vb(3,"p",52),n.Rc(4),n.Ub(),n.Ub()),2&t){const t=n.gc(2).$implicit,e=n.gc(3);n.Db(4),n.Tc(" ",t.answer.files&&e.formatArray(t.answer.files).length>0?e.formatArray(t.answer.files).length:0," ")}}function jt(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div",60),n.Vb(1,"div",25),n.Vb(2,"span",26),n.Qb(3,"azt-create-avatar",27),n.Ub(),n.Vb(4,"div",61),n.cc("click",function(){n.Dc(t);const e=n.gc().$implicit;return n.gc(3).goToResultReview(e)}),n.Vb(5,"div",31),n.Vb(6,"span",32),n.Vb(7,"span",33),n.Rc(8),n.Ub(),n.Ub(),n.Ub(),n.Vb(9,"div",53),n.Pc(10,zt,2,0,"p",41),n.Pc(11,At,2,0,"p",42),n.Pc(12,Ft,2,0,"p",42),n.Pc(13,Bt,4,1,"p",44),n.Pc(14,Et,2,1,"p",45),n.Ub(),n.Pc(15,Ht,5,1,"div",36),n.Ub(),n.Ub(),n.Ub()}if(2&t){const t=n.gc().$implicit;n.nc("ngClass",n.sc(11,B,t.isNotSubmit||t.mustReSubmit)),n.Db(3),n.nc("linkAvatar",t.avatar)("nameCreateAvatar",t.fullName)("size",30),n.Db(5),n.Sc(t.fullName),n.Db(2),n.nc("ngIf",t.isSubmitted),n.Db(1),n.nc("ngIf",t.isNotSubmit),n.Db(1),n.nc("ngIf",t.mustReSubmit),n.Db(1),n.nc("ngIf",t.isMarked),n.Db(1),n.nc("ngIf",null!=t.createdAt),n.Db(1),n.nc("ngIf",t.isMarked||t.isSubmitted)}}function $t(t,e){if(1&t&&(n.Vb(0,"div",58),n.Pc(1,Lt,19,21,"div",10),n.Pc(2,jt,16,13,"ng-template",null,68,n.Qc),n.Ub()),2&t){const t=e.$implicit,i=n.zc(3),c=n.gc(3);n.nc("ngClass",n.sc(3,F,c.isOpenSideNav)),n.Db(1),n.nc("ngIf",t.answer)("ngIfElse",i)}}function Qt(t,e){if(1&t&&(n.Vb(0,"div",67),n.Pc(1,$t,4,5,"div",55),n.Ub()),2&t){const t=n.gc(2);n.Db(1),n.nc("ngForOf",t.studentLists)}}function qt(t,e){if(1&t&&(n.Vb(0,"div",9),n.Pc(1,_t,3,2,"mat-tab-group",10),n.Pc(2,Qt,2,1,"ng-template",null,11,n.Qc),n.Ub()),2&t){const t=n.zc(3),e=n.gc();n.Db(1),n.nc("ngIf",!e.isHomeworkFlow)("ngIfElse",t)}}const Wt=function(t){return{"mt-3":t}};let Jt=(()=>{class t{constructor(t,e,i,c,o){this.activeRoute=t,this.router=e,this.commonService=i,this.localize=c,this.apiService=o,this.studentLists=[],this.studentListsInClass=[],this.obj={},this.backToLink="",this.totalSubmitted=0,this.totalSubmitByClass=0,this.examHasClass=!1,this.hasEssayQuestion=!1,this.isNotTestedYet=!1,this.isHomeworkFlow=!1,this.searchKey="",this.isOpenSideNav=!0,this.goToResult=new n.o,this.openResultHistory=new n.o,this.studentListPage=[],this.isLoadingPage=!1,this.checkPaging=!1,this.curPage=1,this.totalPage=0}goToResultReview(t){t.isNotSubmit||t.mustReSubmit||this.checkExecuteViewTest()||this.goToResult.emit(t)}clickPage(t){this.createPageStudent(t)}openResultHistoryReview(t){this.openResultHistory.emit(t)}checkValidClickLink(t){return"[]"!=t.answers&&null!=t.answers}checkExecuteViewTest(){return this.commonService.hasConfigAndViewClassroomPermission("exam",this.obj.permissionObj)}checkShowIconHistory(t){let e=!1;return 1!=t.status&&(t.isMarked||t.isNotMarked)&&(e=!0),0==this.obj.examType||1==this.obj.examType?!(!e||!this.commonService.checkEmptyAnswerExamAll(t)):!(!e||""!=t.files&&null!=t.files&&!this.commonService.checkEmptyAnswerExamAll(t))}createPageStudent(t){this.studentListPage=[];let e=this.studentLists.length;if(this.totalPage=Math.ceil(e/100),e>100)for(let i=100*(t-1);i<100*t;i++)this.studentLists.length-1>=i&&this.studentListPage.push(this.studentLists[i]);else this.checkPaging=!1,this.studentListPage=this.studentLists;this.isLoadingPage=!1}copyLinkToClipboard(){return`${location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}/de-thi/${this.obj.hashId}`}copyLinkHomeWorkToClipboard(){return`${location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}/bai-tap/${this.obj.hashId}`}showCopySuccess(){this.commonService.snackSuccess("Sao ch\xe9p th\xe0nh c\xf4ng","")}calculationTime(t,e){return this.commonService.calculationTime(t,e)}calculationTestedTime(t,e){return this.commonService.calculationTestedTime(t,e)}formatArray(t){return JSON.parse(t)}goToStudentList(t){this.commonService.myNavigation("/admin/student/class-details/"+t)}isSearch(t){return 0==t.length}ngOnInit(){this.createPageStudent(this.curPage)}ngOnChanges(){this.createPageStudent(this.curPage)}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(n.Pb(c.a),n.Pb(c.i),n.Pb(o.a),n.Pb(s.e),n.Pb(a.a))},t.\u0275cmp=n.Jb({type:t,selectors:[["app-student-result-view"]],inputs:{studentLists:"studentLists",studentListsInClass:"studentListsInClass",obj:"obj",backToLink:"backToLink",totalSubmitted:"totalSubmitted",totalSubmitByClass:"totalSubmitByClass",examHasClass:"examHasClass",hasEssayQuestion:"hasEssayQuestion",isNotTestedYet:"isNotTestedYet",isHomeworkFlow:"isHomeworkFlow",searchKey:"searchKey",isOpenSideNav:"isOpenSideNav"},outputs:{goToResult:"goToResult",openResultHistory:"openResultHistory"},features:[n.Bb],decls:3,vars:5,consts:[[1,"box-content","py-2","scrollable-content",3,"ngClass"],[4,"ngIf"],["class","pt-0 pb-2 px-3 ",4,"ngIf"],[1,"text-center","mt-3"],["class","h5",4,"ngIf"],["class","clickable","style","user-select: none;",3,"cdkCopyToClipboard","click",4,"ngIf"],[1,"h5"],[1,"clickable",2,"user-select","none",3,"cdkCopyToClipboard","click"],[2,"vertical-align","middle","color","#333333"],[1,"pt-0","pb-2","px-3"],[4,"ngIf","ngIfElse"],["HomeworkFlow",""],[3,"label",4,"ngIf"],[3,"label"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"row","ml-0","mr-0","pl-3"],[1,"h5","clickable","link-stu",3,"click"],["class","ml-2",4,"ngIf"],[1,"row","ml-0","mr-0","pl-0","pr-0"],["class","col-12 col-sm-12 col-md-4 col-lg-3 mb-2 d-flex","style","align-items: stretch;",3,"ngClass",4,"ngFor","ngForOf"],[1,"ml-2"],[2,"cursor","pointer",3,"matTooltip","nameCreateAvatar","size","linkAvatar"],[1,"col-12","col-sm-12","col-md-4","col-lg-3","mb-2","d-flex",2,"align-items","stretch",3,"ngClass"],[1,"box-item",2,"align-self","stretch","width","100%",3,"ngClass"],[1,"student-item"],[1,"stdimg","align-self-center"],[3,"linkAvatar","nameCreateAvatar","size"],["class","text-center",3,"click",4,"ngIf"],[1,"stdinfo"],[2,"width","100%",3,"routerLink","queryParams"],[1,"stdinfo-fullname"],[2,"vertical-align","middle"],[2,"vertical-align","middle","color","#333333","font-weight","400","font-size","15px","word-break","break-word"],["style","vertical-align: middle; color: #9F0000; font-size: 12px;","matTooltip","H\u1ecdc sinh \u0111ang thi l\u1ea1i",4,"ngIf"],["class","d-flex justify-content-between","style","padding-top: 3px;",4,"ngIf"],["class","d-flex justify-content-between",4,"ngIf"],[1,"text-center",3,"click"],["matTooltip","L\u1ecbch s\u1eed thi",2,"vertical-align","middle","margin-top","2px","color","#cccccc"],["matTooltip","H\u1ecdc sinh \u0111ang thi l\u1ea1i",2,"vertical-align","middle","color","#9F0000","font-size","12px"],[1,"d-flex","justify-content-between",2,"padding-top","3px"],["style","color: #F39C12; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","color: #9F0000; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","color: #9C9C9C; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","font-size: 13px; margin-bottom: 2px; color: #9C9C9C",4,"ngIf"],[2,"color","#F39C12","font-size","13px","margin-bottom","2px"],[2,"color","#9F0000","font-size","13px","margin-bottom","2px"],[2,"color","#9C9C9C","font-size","13px","margin-bottom","2px"],["style","padding: 7px;margin-bottom: 2px;",4,"ngIf"],[2,"padding","7px","margin-bottom","2px"],[2,"font-size","13px","margin-bottom","2px"],[2,"font-size","13px","margin-bottom","2px","color","#9C9C9C"],[1,"d-flex","justify-content-between"],[1,"row","ml-0","mr-0","pl-0","pr-0","mt-2",2,"overflow-y","hidden"],["class","col-12 col-sm-12 col-md-4 col-lg-3 mb-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-12","mt-2"],["class","col-md-11 text-left mt-2",4,"ngIf"],[1,"col-12","col-sm-12","col-md-4","col-lg-3","mb-2",3,"ngClass"],["dataDone",""],[1,"box-item",3,"ngClass"],[1,"stdinfo",3,"click"],["style","color: #9F0000; font-size: 13px; margin-bottom: 0px;",4,"ngIf"],[2,"color","#9F0000","font-size","13px","margin-bottom","0px"],[3,"routerLink","queryParams"],[1,"col-md-11","text-left","mt-2"],[3,"lengthPage","paging","SendPage"],[1,"row","ml-0","mr-0","pl-0","pr-0","mt-2"],["answerIdNull",""],[3,"mark"]],template:function(t,e){1&t&&(n.Vb(0,"div",0),n.Pc(1,k,6,4,"div",1),n.Pc(2,qt,4,2,"div",2),n.Ub()),2&t&&(n.nc("ngClass",n.sc(3,Wt,!e.isHomeworkFlow)),n.Db(1),n.nc("ngIf",e.isNotTestedYet),n.Db(1),n.nc("ngIf",!e.isNotTestedYet))},directives:[l.k,l.m,r.a,b.a,d.b,d.a,l.l,g.a,f.a,c.k,m.a,p.a],pipes:[u.o],styles:[".box-content[_ngcontent-%COMP%]{background:inherit;background-color:#f9f9f9;box-sizing:border-box;border:1px solid #e9e9e9;border-radius:5px;box-shadow:none}a[_ngcontent-%COMP%]{color:#000}.disableClick[_ngcontent-%COMP%]{cursor:default!important}.scrollable-content[_ngcontent-%COMP%]{height:calc(100vh - 166px);overflow-y:scroll}.scrollable-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;margin:5px}.scrollable-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 5px #cecece;border-radius:10px}.scrollable-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cfcece;border-radius:10px}.box-item[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border:1px solid #ccc;border-radius:4px;margin-bottom:10px;cursor:pointer;position:relative}.badge-testing[_ngcontent-%COMP%]{position:absolute;top:0;right:6px;border-radius:4px;padding:0 3px}.student-item[_ngcontent-%COMP%]{display:flex;position:relative}.link-stu[_ngcontent-%COMP%], .student-item[_ngcontent-%COMP%]   .deleteBtn[_ngcontent-%COMP%], .student-item[_ngcontent-%COMP%]   .enterClsWrap[_ngcontent-%COMP%]{display:flex}.link-stu[_ngcontent-%COMP%]{align-items:center}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.stdimg[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-right:10px}.stdinfo[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto}.menu-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#828282}.create-avatar[_ngcontent-%COMP%]{vertical-align:middle;display:inline-block;margin-top:2px;border-radius:50%;width:30px;text-transform:uppercase;height:30px;background:#ddd;text-align:center;padding-top:5px}@media screen and (max-width:750px){.scrollable-content[_ngcontent-%COMP%]{min-height:calc(100vh - 170px);height:auto;overflow-y:inherit}.tested_list_container[_ngcontent-%COMP%]{height:auto}}"]}),t})()},unp7:function(t,e,i){"use strict";i.d(e,"a",function(){return l});var n=i("mrSG"),c=i("fXoL"),o=i("gbi4"),s=i("yTNM"),a=function(t){return t[t.Cdn=0]="Cdn",t[t.CdnTimestamp=1]="CdnTimestamp",t[t.Rawlink=2]="Rawlink",t[t.RawlinkTimestamp=3]="RawlinkTimestamp",t}({});let l=(()=>{class t{constructor(t,e){this.commonService=t,this.apiService=e}isSupportedBrowswer(){var t,e,i;navigator.sayswho=(i=(e=navigator.userAgent).match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(i[1])?"IE "+((t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===i[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))?t.slice(1).join(" ").replace("OPR","Opera"):(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&i.splice(1,1,t[1]),i.join(" ")));let n=navigator.sayswho.toString();return!(!["chrome"].includes(n.split(" ")[0].toLowerCase())||parseInt(n.split(" ")[1])<80)}getExtensionFile(t){if(!t)return"";var e=t.split(".");return e.length<=1?"":e[e.length-1].toLocaleLowerCase().split("_")[0]}translateMetaTitle(t){this.commonService.translateMetaData({title:"Export PDF: "+t.data.examObj.name,description:"Export PDF: "+t.data.examObj.name,image:"lang_cms_test_image"})}handleError(t){this.commonService.myTranslate([t.message,"lang_cms_common_ok"]).subscribe(e=>{this.commonService.snackError(e[t.message],e.lang_cms_common_ok)})}convertAnswersArr(t,e){0!=t.length&&t.forEach(t=>{e["id_"+t.QuestionId]=t.AnswerContent[0].Content})}create_pdf(t,e,i){return Object(n.a)(this,void 0,void 0,function*(){i?this.convertMargitPagePdf_forHomeWork():yield this.convertMargitPagePdf(t);var n=document.getElementById(e);if(n)return yield html2pdf().set({pagebreak:{mode:"avoid-all"},image:{type:"jpeg",quality:1},html2canvas:{logging:!0,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"p"}}).from(n).output("blob")})}convertToBase64(t,e){return Object(n.a)(this,void 0,void 0,function*(){let i=t;switch(e){case a.Cdn:i=this.commonService.getMyCdn(t);break;case a.CdnTimestamp:i=this.commonService.getMyCdn(t)+"?t="+Date.now();break;case a.RawlinkTimestamp:i=t+"?t="+Date.now()}const n=yield fetch(i),c=yield n.blob(),o=yield new Promise(t=>{const e=new FileReader;e.readAsDataURL(c),e.onloadend=()=>{t(e.result)}});return o&&"string"==typeof o?o:(console.log("kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh chu\u1ed7i base64: "+t),t)})}convertAndRetryToBase64(t){return Object(n.a)(this,void 0,void 0,function*(){let e=this.getExtensionFile(t);if(["pdf","jpg","jpeg","png"].includes(e)){const e=[a.Cdn,a.CdnTimestamp,a.Rawlink,a.RawlinkTimestamp];let s;if(this.commonService.isViettelCDN(t)){console.log(">>>> YAAAAAA, \u0111\xe2y l\xe0 link Viettel, qu\xe1 tr\xecnh convert c\xf3 th\u1ec3 l\xe2u h\u01a1n b\xecnh th\u01b0\u1eddng, v\xec ph\u1ea3i convert tu\u1ea7n t\u1ef1 sau m\u1ed7i 0.5 gi\xe2y");try{s=yield this.convertToBase64(t,e[0])}catch(i){try{yield this.asyncTimeout(500),s=yield this.convertToBase64(t,e[1])}catch(n){console.log("Kh\xf4ng th\u1ec3 convert url VIETTEL n\xe0y th\xe0nh base64 sau 2 l\u1ea7n th\u1eed: "+t),s=t}}}else try{s=yield this.convertToBase64(t,e[0])}catch(i){try{s=yield this.convertToBase64(t,e[1])}catch(n){try{s=yield this.convertToBase64(t,e[2])}catch(c){try{s=yield this.convertToBase64(t,e[3])}catch(o){console.log("Kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh base64 sau v\xe0i l\u1ea7n retry: "+t),s=t}}}}return s}return console.log("\u0110\u1ecbnh d\u1ea1ng file kh\xf4ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3: "+t),""})}processUserResult(t){return Object(n.a)(this,void 0,void 0,function*(){let e=this.commonService.parseJson(t);if(this.commonService.isViettelCDN(e.pages[0].backgroundImage))for(const t of e.pages){if(yield this.asyncTimeout(500),t.draw){const e=yield this.convertAndRetryToBase64(t.draw);t.draw=e}yield this.asyncTimeout(500);const e=yield this.convertAndRetryToBase64(t.backgroundImage);t.backgroundImage=e}else{const t=e.pages.map(t=>Object(n.a)(this,void 0,void 0,function*(){if(t.draw){const e=yield this.convertAndRetryToBase64(t.draw);t.draw=e}})),i=e.pages.map(t=>Object(n.a)(this,void 0,void 0,function*(){const e=yield this.convertAndRetryToBase64(t.backgroundImage);t.backgroundImage=e}));Promise.all([...t,...i])}return e})}processGroupImages(t,e){return Object(n.a)(this,void 0,void 0,function*(){if(t[0].name.startsWith("[PDFv2]"))if(this.commonService.isViettelCDN(t[0].questionContent[0].groupUrl))for(const e of t){yield this.asyncTimeout(500);const t=yield this.convertAndRetryToBase64(e.questionContent[0].groupUrl);e.questionContent[0].groupUrl=t}else{const i=t.map(t=>Object(n.a)(this,void 0,void 0,function*(){if(t.questionContent[0].groupUrl&&e.includes(t.indexLabel)){const e=yield this.convertAndRetryToBase64(t.questionContent[0].groupUrl);t.questionContent[0].groupUrl=e}}));Promise.all(i)}})}processQuestionImages(t){return Object(n.a)(this,void 0,void 0,function*(){if(1==t[0].isImage)if(this.commonService.isViettelCDN(t[0].questionContent[0].url))for(const e of t){yield this.asyncTimeout(500);const t=yield this.convertAndRetryToBase64(e.questionContent[0].url);e.questionContent[0].url=t}else{const e=t.map(t=>Object(n.a)(this,void 0,void 0,function*(){const e=yield this.convertAndRetryToBase64(t.questionContent[0].url);t.questionContent[0].url=e}));Promise.all(e)}})}parsingQuestions(t,e){t.forEach(t=>{"string"==typeof t.answerConfig&&(t.answerConfig=this.commonService.parseJson(t.answerConfig)),"string"==typeof t.answerResult&&(t.answerResult=this.commonService.parseJson(t.answerResult)),"string"==typeof t.coordinates&&(t.coordinates=this.commonService.parseJson(t.coordinates)),"string"==typeof t.questionContent&&e&&(t.questionContent=this.commonService.parseJson(t.questionContent))})}parseQuestionsFor_PDFv2(t,e){t=e.data.questionObjs;for(let i=0;i<t.length;i++)t[i].indexLabel=i;return t.forEach(t=>{"string"==typeof t.answerConfig&&(t.answerConfig=this.commonService.parseJson(t.answerConfig)),"string"==typeof t.answerResult&&(t.answerResult=this.commonService.parseJson(t.answerResult)),"string"==typeof t.coordinates&&(t.coordinates=this.commonService.parseJson(t.coordinates)),"string"==typeof t.questionContent&&(t.questionContent=this.commonService.parseJson(t.questionContent))}),t}resetPaddingTopElements(t){if(document.getElementById("multipleChoiceWrap")){for(let i=0;i<t.length;i++){var e=document.getElementById("question_item_box_"+t[i].id);e&&(e.style.paddingTop="")}var i=document.getElementById("essayPdfTitle");if(i){i.style.marginTop="";var n=document.getElementsByClassName("essayPdfImage");for(let t=0;t<n.length;t++){n[t].style.marginTop="";var c=n[t].children;for(let t=0;t<c.length;t++)"IMG"!==c[t].tagName||c[t].classList.contains("absolute-img")||(c[t].style.height="",c[t].style.width="")}}}}asyncTimeout(t){return Object(n.a)(this,void 0,void 0,function*(){return`Waited ${yield new Promise(e=>{setTimeout(()=>e(t),t)})} miliseconds`})}convertMargitPagePdf(t){var e;return Object(n.a)(this,void 0,void 0,function*(){this.resetPaddingTopElements(t),yield this.asyncTimeout(5e3);let i=document.getElementById("multipleChoiceWrap");if(i){const n=10,c=15,o=(null==i?void 0:i.getBoundingClientRect().width)/210;let s=document.createElement("style");const a=297*o;let l=!1;for(let i=0;i<t.length;i++){let o=document.getElementById("question_item_box_"+t[i].id);if(o){let t=o.getBoundingClientRect().height+n;!1===l&&(l=null===(e=document.getElementById("multipleChoiceWrapHeader"))||void 0===e?void 0:e.getBoundingClientRect().height,l+=40),l+t+c>a&&(o.style.paddingTop=Math.floor(a-l)+"px",l=0),l+=t}}document.head.appendChild(s);let r=document.getElementById("essayPdfTitle");if(r){r.style.marginTop=Math.floor(a-l+20)+"px",l=r.getBoundingClientRect().height;let t=document.getElementsByClassName("essayPdfImage"),e=0;for(let i=0;i<t.length;i++)t[i].getBoundingClientRect().height>0&&(0===e?(t[i].getBoundingClientRect().height>a-l&&this.changeSizeHeightImage(a-l,t[i]),l+=t[i].getBoundingClientRect().height):(t[i].getBoundingClientRect().height>a&&this.changeSizeHeightImage(a-l,t[i]),t[i].style.marginTop=Math.floor(a-l)+"px",l=t[i].getBoundingClientRect().height),this.floorSizeImage(t[i]),e++)}}})}changeSizeHeightImage(t,e){var i=e.children;for(let n=0;n<i.length;n++)"IMG"!==i[n].tagName||i[n].classList.contains("absolute-img")||(i[n].style.height=t+"px",i[n].style.width="auto")}floorSizeImage(t){var e=t.children;for(let n=0;n<e.length;n++)if("IMG"===e[n].tagName){let t=e[n].getBoundingClientRect(),c=e[n];if(e[n].classList.contains("rotated-img")){e[n].style.width=Math.floor(c.width)+"px";var i=e[n].getAttribute("data-ratio");e[n].style.height=Math.floor(c.width/i)+"px"}else e[n].classList.contains("absolute-img")||(e[n].style.height=Math.floor(t.height)+"px",e[n].style.width=Math.floor(t.width)+"px")}}convertMargitPagePdf_forHomeWork(){var t,e=document.getElementById("multipleChoiceWrap");if(e){const s=(null==e?void 0:e.getBoundingClientRect().width)/210*297;var i=!1;i=null===(t=document.getElementById("multipleChoiceWrapHeader"))||void 0===t?void 0:t.getBoundingClientRect().height;var n=document.getElementById("essayPdfTitle");if(n){i+=n.getBoundingClientRect().height;var c=document.getElementsByClassName("essayPdfImage"),o=0;for(let t=0;t<c.length;t++)c[t].getBoundingClientRect().height>0&&(0===o?(c[t].getBoundingClientRect().height>s-i&&this.changeSizeHeightImage_hw(s-i,c[t]),i+=c[t].getBoundingClientRect().height):(c[t].getBoundingClientRect().height>s&&this.changeSizeHeightImage_hw(s-i,c[t]),c[t].style.marginTop=Math.floor(s-i)+"px",i=c[t].getBoundingClientRect().height),this.floorSizeImage_hw(c[t]),o++)}}}changeSizeHeightImage_hw(t,e){var i=e.children;for(let n=0;n<i.length;n++)"IMG"===i[n].tagName&&(i[n].style.height=t+"px",i[n].style.width="auto")}floorSizeImage_hw(t){var e=t.children;for(let n=0;n<e.length;n++)if("IMG"===e[n].tagName){let t=e[n].getBoundingClientRect(),c=e[n];if(e[n].classList.contains("rotated-img")){e[n].style.width=Math.floor(c.width)+"px";var i=e[n].getAttribute("data-ratio");e[n].style.height=Math.floor(c.width/i)+"px"}else e[n].style.height=Math.floor(t.height)+"px",e[n].style.width=Math.floor(t.width)+"px"}}}return t.\u0275fac=function(e){return new(e||t)(c.Zb(o.a),c.Zb(s.a))},t.\u0275prov=c.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},wAhq:function(t,e,i){"use strict";i.d(e,"a",function(){return x});var n=i("fXoL"),c=i("quSY"),o=i("BTbT"),s=i("gbi4"),a=i("jhN1"),l=i("ofXK"),r=i("NFeN"),b=i("IkSl");function d(t,e){1&t&&(n.Vb(0,"div",2),n.Vb(1,"div",3),n.Vb(2,"span",4),n.Rc(3,"Loading..."),n.Ub(),n.Ub(),n.Ub())}function g(t,e){if(1&t&&(n.Vb(0,"div",20),n.Rc(1),n.Ub()),2&t){const t=n.gc(2);n.Db(1),n.Sc(t.fileOption.name)}}function f(t,e){1&t&&(n.Vb(0,"div",20),n.Rc(1,"D\u1eef li\u1ec7u \u1ea3nh c\u1eaft \u0111\u1ec1"),n.Ub())}function m(t,e){if(1&t&&(n.Vb(0,"div",21),n.Rc(1),n.Ub()),2&t){const t=n.gc(2);n.Db(1),n.Uc("Dung l\u01b0\u1ee3ng: ",t.file_mb," MB | Lo\u1ea1i : ",t.fileOption.mimes,"")}}function p(t,e){1&t&&(n.Vb(0,"div",21),n.Rc(1,"Dung l\u01b0\u1ee3ng: 0.3 MB | Lo\u1ea1i : Images"),n.Ub())}function u(t,e){if(1&t&&(n.Vb(0,"a",22),n.Vb(1,"mat-icon",16),n.Rc(2,"save_alt"),n.Ub(),n.Ub()),2&t){const t=n.gc(2);n.Eb("href",t.root_link,n.Hc)("download",t.fileOption.name)}}function h(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div"),n.Vb(1,"div",28),n.Vb(2,"audio",29),n.Vb(3,"source",30),n.cc("load",function(){return n.Dc(t),n.gc(3).onLoad()}),n.Ub(),n.Rc(4," Your browser does not support the audio element. "),n.Ub(),n.Ub(),n.Ub()}if(2&t){const t=n.gc(3);n.Db(3),n.nc("src",t.cdn_link,n.Hc),n.Eb("type",t.fileOption.mimes)}}function v(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div"),n.Vb(1,"div",31),n.Vb(2,"video",32),n.Vb(3,"source",30),n.cc("load",function(){return n.Dc(t),n.gc(3).onLoad()}),n.Ub(),n.Vb(4,"p",33),n.Rc(5," B\u1ea1n \u0111ang s\u1eed d\u1ee5ng tr\xecnh duy\u1ec7t kh\xf4ng h\u1ed7 tr\u1ee3 xem video tr\u1ef1c tuy\u1ebfn. "),n.Ub(),n.Ub(),n.Ub(),n.Ub()}if(2&t){const t=n.gc(3);n.Db(2),n.oc("poster",t.video_thumb_url,n.Hc),n.Db(1),n.nc("src",t.cdn_link,n.Hc),n.Eb("type",t.fileOption.mimes)}}function w(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div"),n.Vb(1,"iframe",34),n.cc("load",function(){return n.Dc(t),n.gc(3).onLoad()}),n.Ub(),n.Ub()}if(2&t){const t=n.gc(3);n.Db(1),n.nc("src",t.cdn_link,n.Fc)}}function y(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div"),n.Vb(1,"div",31),n.Vb(2,"img",35),n.cc("load",function(){return n.Dc(t),n.gc(3).onLoad()}),n.Ub(),n.Ub(),n.Ub()}if(2&t){const t=n.gc(3);n.Db(2),n.Eb("src",t.cdn_link,n.Hc)}}function k(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div"),n.Vb(1,"div",36),n.Vb(2,"iframe",37),n.cc("load",function(){return n.Dc(t),n.gc(3).onLoad()}),n.Ub(),n.Ub(),n.Ub()}if(2&t){const t=n.gc(3);n.Db(2),n.nc("src",t.cdn_link,n.Fc)}}function P(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div"),n.Vb(1,"div",38),n.Vb(2,"pdf-viewer",39),n.cc("load",function(){return n.Dc(t),n.gc(3).onLoad()}),n.Ub(),n.Ub(),n.Ub()}if(2&t){const t=n.gc(3);n.Db(2),n.nc("src",t.cdn_link)("show-all",!0)}}function C(t,e){if(1&t&&(n.Tb(0),n.Vb(1,"div",23),n.Vb(2,"div",24),n.Pc(3,h,5,2,"div",25),n.Pc(4,v,6,3,"div",25),n.Pc(5,w,2,1,"div",25),n.Pc(6,y,3,1,"div",25),n.Pc(7,k,3,1,"div",25),n.Pc(8,P,3,2,"div",25),n.Qb(9,"div",26),n.Ub(),n.Qb(10,"div",27),n.Ub(),n.Sb()),2&t){const t=n.gc(2);n.Db(3),n.nc("ngIf","audio"===t.typeFile),n.Db(1),n.nc("ngIf","video"===t.typeFile),n.Db(1),n.nc("ngIf","vimeo"===t.typeFile),n.Db(1),n.nc("ngIf","image"===t.typeFile),n.Db(1),n.nc("ngIf","officeapps"===t.typeFile),n.Db(1),n.nc("ngIf","pdf"===t.typeFile)}}function U(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div",23),n.Vb(1,"div",24),n.Vb(2,"div",40),n.Vb(3,"img",41),n.cc("load",function(){return n.Dc(t),n.gc(2).onLoad()}),n.Ub(),n.Ub(),n.Ub(),n.Ub()}if(2&t){const t=n.gc(2);n.Db(3),n.Eb("src",t.linkUrl,n.Hc)}}function V(t,e){if(1&t){const t=n.Wb();n.Vb(0,"div",5),n.Vb(1,"div",6),n.Vb(2,"div",7),n.Vb(3,"div",8),n.Qb(4,"div",9),n.Ub(),n.Pc(5,g,2,1,"div",10),n.Pc(6,f,2,0,"div",10),n.Pc(7,m,2,2,"div",11),n.Pc(8,p,2,0,"div",11),n.Ub(),n.Vb(9,"div",12),n.Vb(10,"span",13),n.Pc(11,u,3,2,"a",14),n.Ub(),n.Vb(12,"span",15),n.cc("click",function(){return n.Dc(t),n.gc().btnClosePreview()}),n.Vb(13,"mat-icon",16),n.Rc(14,"close"),n.Ub(),n.Ub(),n.Ub(),n.Ub(),n.Vb(15,"div",17),n.Pc(16,C,11,6,"ng-container",18),n.Pc(17,U,4,1,"ng-template",null,19,n.Qc),n.Ub(),n.Ub()}if(2&t){const t=n.zc(18),e=n.gc();n.Db(5),n.nc("ngIf",null!=e.fileOption),n.Db(1),n.nc("ngIf",null==e.fileOption),n.Db(1),n.nc("ngIf",null!=e.fileOption),n.Db(1),n.nc("ngIf",null==e.fileOption),n.Db(3),n.nc("ngIf",null!=e.fileOption),n.Db(5),n.nc("ngIf",0==e.typePreview)("ngIfElse",t)}}let x=(()=>{class t{constructor(t,e,i){this.commonService=t,this.dom=e,this.sanitizer=i,this.typePreview=0,this.linkUrl="",this.closePreview=new n.o,this.subscriptions=new c.a,this.typeFile="",this.cdn_link="",this.root_link="",this.file_mb=0,this.video_thumb_url="",this.isVimeoLink=!1,this.isLoading=!0}ngOnInit(){document.body.classList.add("overflow-hidden"),setTimeout(()=>{this.initData()},0),this.video_thumb_url="https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/video-thumb.png"}onLoad(){this.isLoading=!1}initData(){if(0==this.typePreview){if(this.cdn_link=this.commonService.getMyCdn(this.fileOption.url),this.root_link=this.cdn_link,this.file_mb=this.getFileMB(this.fileOption.size),this.typeFile=Object(o.c)(this.fileOption.mimes),this.isVimeoLink=this.cdn_link.includes("https://player.vimeo.com/")||this.cdn_link.includes("https://mega.nz"),this.isVimeoLink&&(this.typeFile="vimeo"),""!=this.cdn_link)switch(this.typeFile){case"pdf":this.cdn_link=this.cdn_link;break;case"officeapps":this.cdn_link=this.dom.bypassSecurityTrustResourceUrl(this.commonService.getLinkEmbedDocument(this.cdn_link));break;case"video":default:this.cdn_link=this.dom.bypassSecurityTrustResourceUrl(this.cdn_link)}}else this.linkUrl=this.commonService.getMyCdn(this.linkUrl);setTimeout(()=>{this.isLoading=!1},200)}removeClassCss(){document.body.classList.remove("overflow-hidden")}objToString(t){let e="";for(const[i,n]of Object.entries(t))e+=`${i}::${n}\n`;return e}btnClosePreview(){this.removeClassCss(),this.closePreview.emit()}getFileMB(t){return t>0?(t/=1048576).toFixed(2):0}reloadFrame(t){let e=document.getElementById(t);e&&e.parentNode.replaceChild(e.cloneNode(),e)}ngOnDestroy(){this.subscriptions.unsubscribe(),this.removeClassCss()}}return t.\u0275fac=function(e){return new(e||t)(n.Pb(s.a),n.Pb(a.b),n.Pb(a.b))},t.\u0275cmp=n.Jb({type:t,selectors:[["azt-preview-media"]],inputs:{fileOption:"fileOption",typePreview:"typePreview",linkUrl:"linkUrl"},outputs:{closePreview:"closePreview"},decls:2,vars:2,consts:[["class","loading-block",4,"ngIf"],["class","file-preview",4,"ngIf"],[1,"loading-block"],["role","status",1,"spinner-border","text-secondary",2,"width","5rem","height","5rem"],[1,"sr-only"],[1,"file-preview"],[1,"file-preview__header","flx","flx-sp-btw"],[1,"file-preview__header-left"],["title","",1,"avatar","avatar--xs"],[1,"avatar-img",2,"background-image",'url("https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/documents.png")',"background-size","cover"],["class","file-preview__header__title",4,"ngIf"],["class","file-preview__header__send-time",4,"ngIf"],[1,"file-preview__header-right"],[1,"file-preview__controls-container"],["class","clickable download","target","_blank",4,"ngIf"],[1,"file-preview__buttons-container",3,"click"],[2,"color","rgb(53, 53, 53)","cursor","pointer"],[1,"file-preview__main","flx",2,"overflow-x","auto","flex","1 1 auto"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"file-preview__header__title"],[1,"file-preview__header__send-time"],["target","_blank",1,"clickable","download"],[1,"file-preview__main-iframe","mx-auto"],[1,"file-preview__notify"],[4,"ngIf"],[1,"tool-hide"],[1,"file-preview__main-comments"],[1,"container-fluid","mt-3"],["controls",""],[3,"src","load"],[1,"pl-2","pr-2","mt-3"],["id","my-video","playsinline","playsinline","controls","","preload","auto","data-setup","{}",1,"video-js",2,"max-height","calc(100vh - 80px)","width","100%","padding-bottom","1rem",3,"poster"],[1,"vjs-no-js"],["frameborder","0","allowfullscreen","",2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem",3,"src","load"],["alt","Responsive image",1,"img-fluid","image-preview",2,"max-height","calc(100vh - 80px)","padding-bottom","1rem",3,"load"],[1,"pl-2","pr-2","mp-0"],["frameborder","0",2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem",3,"src","load"],[1,"container-fluid","mp-0"],[2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem","display","block",3,"src","show-all","load"],[1,"pl-2","pr-2","mt-3","block-img"],["alt","Responsive image",1,"img-fluid","image-preview",3,"load"]],template:function(t,e){1&t&&(n.Pc(0,d,4,0,"div",0),n.Pc(1,V,19,7,"div",1)),2&t&&(n.nc("ngIf",e.isLoading),n.Db(1),n.nc("ngIf",(null!=e.fileOption||""!=e.linkUrl)&&!e.isLoading))},directives:[l.m,r.a,b.a],styles:[".file-preview[_ngcontent-%COMP%]{background:#ecf0f5;position:absolute;width:100%;height:100vh;z-index:9999;display:flex;flex-direction:column;left:0;top:0}.block-img[_ngcontent-%COMP%]{background:#a3a3a3;width:100vw;height:90vh;overflow-y:auto}.loading-block[_ngcontent-%COMP%]{z-index:1000;justify-content:center;align-items:center;left:0;top:0;height:100%;min-height:100vh;background-color:#ecf0f5}.file-preview__main[_ngcontent-%COMP%], .loading-block[_ngcontent-%COMP%]{width:100%;display:flex;position:fixed}.file-preview__main[_ngcontent-%COMP%]{margin-top:65px;min-height:100%;min-width:277px;background:#ecf0f5}.file-preview__header[_ngcontent-%COMP%]{padding-top:10px;height:65px;background:#fff;box-shadow:0 2px 4px 0 rgba(0,0,0,.2);position:fixed;align-items:center;z-index:1;top:0;width:100%}.flx-sp-btw[_ngcontent-%COMP%]{justify-content:space-between}.flx[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.file-preview__header-left[_ngcontent-%COMP%]{margin-left:20px;margin-right:10px;margin-bottom:12px;flex:1 1 50px;min-width:0}.file-preview__header-left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{float:left;margin-right:10px}.avatar--xs[_ngcontent-%COMP%]{width:40px;height:40px;font-size:17px}.avatar[_ngcontent-%COMP%]{position:relative;color:#fff;contain:layout size style}.avatar--xs[_ngcontent-%COMP%] > .avatar-img[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#e5efff}.avatar-img[_ngcontent-%COMP%]{border-radius:100%}.file-preview__header__title[_ngcontent-%COMP%]{font-size:15px;color:#222;font-weight:500}.file-preview__header__send-time[_ngcontent-%COMP%], .file-preview__header__title[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.file-preview__header__send-time[_ngcontent-%COMP%]{padding-top:2px;font-size:13px;color:#a0a0a0}.file-preview__header-right[_ngcontent-%COMP%]{color:#fff;margin-right:15px;white-space:nowrap;display:flex}.file-preview__controls-container[_ngcontent-%COMP%]{margin-right:40px}.file-preview__buttons-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;position:relative}.mp-0[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]}),t})()}}]);