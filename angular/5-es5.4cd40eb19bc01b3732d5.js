!function(){function e(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Q0Xt:function(t,i,s){"use strict";s.d(i,"a",function(){return He});var o=s("quSY"),c=s("PqYM"),r=s("itXk"),l=s("UETp"),u=s("fXoL"),d=s("yTNM"),m=s("0IaG"),b=s("gbi4"),h=s("sYmb"),g=s("Avyq"),f=s("tyNb"),p=s("l7P3"),v=s("s65G"),x=s("RtGS"),w=s("ofXK"),y=s("nzN9"),_=s("hZBc"),k=s("k3bj"),O=s("NFeN"),P=s("wZkO"),I=s("IU+r"),C=s("Qu3c"),D=s("gaSO");function M(e,t){if(1&e&&(u.Vb(0,"div",7),u.Vb(1,"div",3),u.Qb(2,"azt-create-avatar",8),u.Ub(),u.Ub()),2&e){var n=u.gc();u.nc("ngStyle",n.avatarStyle),u.Db(2),u.oc("matTooltip",n.returnTooltip()),u.nc("nameCreateAvatar",n.studentObj.fullName)("size",80)("linkAvatar",n.studentObj.avatar)}}function q(e,t){if(1&e&&(u.Vb(0,"p",9),u.Rc(1),u.hc(2,"date"),u.Ub()),2&e){var n=u.gc();u.Db(1),u.Tc("Ng\xe0y sinh: ",u.jc(2,1,n.birthDay,"dd/MM/yyyy"),"")}}function S(e,t){if(1&e&&(u.Vb(0,"p",10),u.Rc(1),u.hc(2,"anonymousPhone"),u.Ub()),2&e){var n=u.gc();u.Db(1),u.Tc("\u0110i\u1ec7n tho\u1ea1i: ",u.ic(2,1,n.phone),"")}}var j,R=["*"],T=((j=function(){function e(t,i,a,s,o){n(this,e),this.activeRoute=t,this.router=i,this.commonService=a,this.localize=s,this.apiService=o,this.avatarUrl="http://stume.net:8082/azota/images/home/u64.png",this.name="",this.birthDay="",this.phone="",this.showAvatar=!0,this.containerStyle={},this.studentObj={},this.borderStyle={padding:"0px",border:"none"},this.flexStyle={"flex-direction":"row"},this.avatarStyle={}}return a(e,[{key:"returnTooltip",value:function(){return null==this.studentObj.parentPhone?"ID: "+this.studentObj.parentId+" - Phone: "+this.commonService.anonymousPhone(this.studentObj.phone):"ID: "+this.studentObj.parentId+" - Phone: "+this.commonService.anonymousPhone(this.studentObj.parentPhone)+" - Name: "+this.studentObj.parentFullName}},{key:"ngOnInit",value:function(){this.containerStyle=Object.assign(Object.assign({},this.borderStyle),this.flexStyle)}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||j)(u.Pb(f.a),u.Pb(f.i),u.Pb(b.a),u.Pb(g.e),u.Pb(d.a))},j.\u0275cmp=u.Jb({type:j,selectors:[["azt-basic-info-box"]],inputs:{avatarUrl:"avatarUrl",name:"name",birthDay:"birthDay",phone:"phone",showAvatar:"showAvatar",containerStyle:"containerStyle",studentObj:"studentObj",borderStyle:"borderStyle",flexStyle:"flexStyle",avatarStyle:"avatarStyle"},ngContentSelectors:R,decls:9,vars:5,consts:[[1,"azt_container",3,"ngStyle"],["class","avatar azt_item",3,"ngStyle",4,"ngIf"],[1,"info_text","azt_item"],[1,"wrap-content"],[1,"info_text-item","bold"],["class","info_text-item",4,"ngIf"],["class","info_text-item truncate",4,"ngIf"],[1,"avatar","azt_item",3,"ngStyle"],[2,"cursor","pointer",3,"nameCreateAvatar","matTooltip","size","linkAvatar"],[1,"info_text-item"],[1,"info_text-item","truncate"]],template:function(e,t){1&e&&(u.mc(),u.Vb(0,"div",0),u.Pc(1,M,3,5,"div",1),u.Vb(2,"div",2),u.Vb(3,"div",3),u.Vb(4,"p",4),u.Rc(5),u.Ub(),u.Pc(6,q,3,4,"p",5),u.Pc(7,S,3,3,"p",6),u.lc(8),u.Ub(),u.Ub(),u.Ub()),2&e&&(u.nc("ngStyle",t.containerStyle),u.Db(1),u.nc("ngIf",t.showAvatar),u.Db(4),u.Sc(t.name),u.Db(1),u.nc("ngIf",t.birthDay),u.Db(1),u.nc("ngIf",t.phone))},directives:[w.n,w.m,I.a,C.a],pipes:[w.e,D.b],styles:[".azt_container[_ngcontent-%COMP%]{display:flex;align-items:center}.azt_container[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:80px;margin-right:10px}.azt_container[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .wrap-content[_ngcontent-%COMP%]{width:100%;height:80px;border-radius:50%;overflow:hidden}.azt_container[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .wrap-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.azt_container[_ngcontent-%COMP%]   .info_text[_ngcontent-%COMP%]{flex:auto;overflow:hidden}.azt_container[_ngcontent-%COMP%]   .info_text[_ngcontent-%COMP%]   .info_text-item[_ngcontent-%COMP%]{margin-bottom:0}.azt_container[_ngcontent-%COMP%]   .info_text[_ngcontent-%COMP%]   .info_text-item.bold[_ngcontent-%COMP%]{font-weight:500}.azt_container[_ngcontent-%COMP%]   .info_text[_ngcontent-%COMP%]   .info_text-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]}),j),U=s("kmnG"),L=s("d3UM"),E=s("3Pt+"),A=s("FKr1"),V=s("Vwpm"),B=s("gJ4n"),Q=s("AytR");function z(e,t){if(1&e){var n=u.Wb();u.Vb(0,"div",10),u.Vb(1,"mat-icon",11),u.cc("click",function(e){u.Dc(n);var i=t.index;return u.gc().toggleVisibility(e,i)}),u.Rc(2,"visibility"),u.Ub(),u.Vb(3,"span",12),u.Rc(4),u.Vb(5,"span",13),u.Rc(6),u.Ub(),u.Ub(),u.Vb(7,"input",14),u.cc("keyup",function(e){u.Dc(n);var i=t.$implicit;return u.gc().validateForm(e,i.essMaxPoint)}),u.Ub(),u.Ub()}if(2&e){var i=t.$implicit,a=t.index,s=u.gc();u.Db(4),u.Tc("C\xe2u ",i.indexLabel+1," "),u.Db(2),u.Tc("(",i.essMaxPoint," \u0111i\u1ec3m)"),u.Db(1),u.pc("formControlName","cau",a,""),u.nc("readonly",!s.isBackEnd)("max",i.essMaxPoint)}}function F(e,t){if(1&e){var n=u.Wb();u.Vb(0,"div",15),u.Vb(1,"button",16),u.cc("click",function(){return u.Dc(n),u.gc().getMnoteJsonData()}),u.Rc(2),u.Ub(),u.Ub()}if(2&e){var i=u.gc();u.Db(1),u.nc("disabled",i.isLoading),u.Db(1),u.Sc(i.isLoading?"\u0110ang l\u01b0u...":"L\u01b0u \u0111i\u1ec3m")}}function N(e,t){if(1&e){var n=u.Wb();u.Vb(0,"div",21),u.Vb(1,"form",22),u.Vb(2,"label",23),u.Rc(3),u.Vb(4,"span",13),u.Rc(5),u.Ub(),u.Rc(6,":"),u.Ub(),u.Vb(7,"input",24),u.cc("keyup",function(e){u.Dc(n);var t=u.gc().$implicit;return u.gc().validateForm(e,t.essMaxPoint)}),u.Ub(),u.Ub(),u.Ub()}if(2&e){var i=u.gc(),a=i.index,s=i.$implicit,o=u.gc();u.Db(1),u.nc("formGroup",o.form),u.Db(1),u.oc("for","cau_"+a),u.Db(1),u.Tc("Nh\u1eadp \u0111i\u1ec3m c\xe2u ",s.indexLabel+1," "),u.Db(2),u.Tc("(",s.essMaxPoint," \u0111i\u1ec3m)"),u.Db(2),u.pc("formControlName","cau",a,""),u.nc("readonly",!o.isBackEnd)("id","cau_"+a)("max",s.essMaxPoint)}}function W(e,t){if(1&e&&(u.Vb(0,"div",17),u.Vb(1,"div",18),u.Qb(2,"azt-question-item",19),u.Pc(3,N,8,8,"div",20),u.Ub(),u.Ub()),2&e){var n=t.$implicit,i=t.index,a=u.gc();u.Db(1),u.pc("id","q_",i,""),u.Db(1),u.nc("isBackEnd",a.isBackEnd)("examObj",a.examObj)("question",n)("index",n.indexLabel)("configExam",a.configExam)("userAnswersObj",a.userAnswersObj)("place","essay"),u.Db(1),u.nc("ngIf",a.isBackEnd)}}function J(e,t){1&e&&(u.Vb(0,"div",25),u.Vb(1,"b"),u.Rc(2,"\u1ea2nh b\xe0i l\xe0m t\u1ef1 lu\u1eadn: "),u.Ub(),u.Rc(3,"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u \u1ea3nh b\xe0i l\xe0m t\u1ef1 lu\u1eadn c\u1ee7a th\xed sinh."),u.Ub())}function H(e,t){if(1&e){var n=u.Wb();u.Vb(0,"div",26),u.Vb(1,"button",27),u.cc("click",function(){return u.Dc(n),u.gc().getMnoteJsonData()}),u.Rc(2),u.Ub(),u.Ub()}if(2&e){var i=u.gc();u.Db(1),u.nc("disabled",i.isLoading),u.Db(1),u.Sc(i.isLoading?"\u0110ang l\u01b0u...":"L\u01b0u \u0111i\u1ec3m")}}var G,$=function(e){return{display:e}},K=((G=function(){function e(t,i,a){var s=this;n(this,e),this.apiService=t,this.fb=i,this.commonService=a,this.isBackEnd=!0,this.resultID=0,this.files=[],this.questions=[],this.userAnswersObj={},this.examResultObj={},this.iframeSrc="",this.examQuestionObjs=[],this.configExam={},this.examObj={},this.saveResultEvent=new u.o,this.totalMaxPoint=0,this.form=new E.k({}),this.maxPointPerQuestion=[],this.subscriptions=new o.a,this.isLoading=!1,this.jsonData={},this.mnoteJsonData={},this.pagesCount=0,this.handleIframe=function(e){if("MNoteJson"==e.data.cmd&&(s.isLoading=!0,s.mnoteJsonData=e.data.data,s.uploadAll(s.mnoteJsonData.pages)),"MNoteLoadComplete"==e.data){var t=document.getElementById("mNote").contentWindow;if(null!==t)if(s.examResultObj.confirmedAt){if(s.examResultObj.result){var n=s.commonService.parseJson(s.examResultObj.result);if(null!=n){for(var i=0;i<n.pages.length;i++)n.pages[i].backgroundImage&&(n.pages[i].backgroundImage=s.commonService.getMyCdn(n.pages[i].backgroundImage)),n.pages[i].draw&&(n.pages[i].draw=s.commonService.getMyCdn(n.pages[i].draw));n=JSON.stringify(n),s.examResultObj.result=n}}if(s.jsonData=s.commonService.parseJson(s.examResultObj.result),s.jsonData&&s.jsonData.hasOwnProperty("pages"))for(var a=0;a<s.jsonData.pages.length;a++)s.jsonData.pages[a].hasOwnProperty("backgroundImage")&&(s.jsonData.pages[a].backgroundImage=s.commonService.getMyCdn(s.jsonData.pages[a].backgroundImage)),s.jsonData.pages[a].hasOwnProperty("draw")&&(s.jsonData.pages[a].draw=s.commonService.getMyCdn(s.jsonData.pages[a].draw));s.jsonData.cmd="initMNote",s.jsonData.mode="edit",s.jsonData.context="exam",t.postMessage(s.jsonData,"*")}else{var o=[];s.files.forEach(function(e){o.push({backgroundImage:s.commonService.getMyCdn(e.url)})}),t.postMessage({cmd:"initMNote",pages:o,mode:"edit",context:"exam"},"*")}}}}return a(e,[{key:"uploadBase64ToCDN",value:function(e,t){var n=this,i=this.apiService.dataURItoBlob(e),a=Q.a.base_upload_api+"get_public_upload_url_for_mark";a+="?file_name="+encodeURIComponent("essay_note_".concat(t,"_").concat(this.resultID,".png")),a+="&file_size="+encodeURIComponent("10000"),a+="&minetype="+encodeURIComponent("image/png");var s={Authorization:"Bearer "+this.apiService.getToken()};this.apiService.commonHttp(a,s,!1).subscribe(function(e){if(1!=e.success)throw"L\u01b0u d\u1eef li\u1ec7u ch\u1ea5m b\xe0i kh\xf4ng th\xe0nh c\xf4ng!";var a=e.data.url;n.apiService.commonPutHttp(e.data.upload_url,{"Content-Type":"image/png","x-amz-acl":"public-read"},i).subscribe(function(e){if(e&&e.success&&0==e.success)throw"L\u01b0u d\u1eef li\u1ec7u ch\u1ea5m b\xe0i kh\xf4ng th\xe0nh c\xf4ng!";n.mnoteJsonData.pages[t].draw=a,n.pagesCount--,0==n.pagesCount&&n.remark(JSON.stringify(n.mnoteJsonData))})})}},{key:"parseValue",value:function(e){return this.commonService.parseJson(this.examResultObj.essayResult)[e]}},{key:"uploadAll",value:function(e){this.pagesCount=0;for(var t=0;t<e.length;t++)e[t].draw&&this.pagesCount++;if(0==this.pagesCount)this.remark(JSON.stringify(this.mnoteJsonData));else for(var n=0;n<e.length;n++)e[n].draw&&this.uploadBase64ToCDN(e[n].draw,n)}},{key:"getMaxPoint",value:function(e){for(var t=0,n=0;n<this.examQuestionObjs.length;n++)if(this.examQuestionObjs[n].questionId==e){t=this.commonService.parseJson(this.examQuestionObjs[n].config).ScorePerQuestion;break}return t}},{key:"remark",value:function(e){var t=this,n=0;for(var i in this.form.value)n+=""!=this.form.value[i]&&this.form.value[i]?parseFloat(this.form.value[i]):0;this.apiService.saveEssayMark(this.resultID,n,e,JSON.stringify(this.form.value)).subscribe(function(e){1==e.success?(t.commonService.snackSuccess("Ch\u1ea5m \u0111i\u1ec3m t\u1ef1 lu\u1eadn th\xe0nh c\xf4ng",""),t.saveResultEvent.emit(1),t.isLoading=!1):(t.commonService.myTranslate([e.message]).subscribe(function(n){t.commonService.snackError("Ch\u1ea5m \u0111i\u1ec3m t\u1ef1 lu\u1eadn kh\xf4ng th\xe0nh c\xf4ng: "+n[e.message],"")}),t.saveResultEvent.emit(0),t.isLoading=!1)})}},{key:"getMnoteJsonData",value:function(){if(this.commonService.hasMarkPointPermission("exam",this.examObj.permissionObj)||this.commonService.hasConfigAndMarkClassroomPermission("exam",this.examObj.permissionObj)){if(!this.isValidPoint())return void this.commonService.snackError("Ch\u1ea5m \u0111i\u1ec3m v\u01b0\u1ee3t qu\xe1 s\u1ed1 \u0111i\u1ec3m t\u1ed1i \u0111a, vui l\xf2ng ki\u1ec3m tra l\u1ea1i","");if(this.files&&this.files.length>0){var e=document.getElementById("mNote").contentWindow;null!==e&&e.postMessage({cmd:"getMNoteJson"},"*")}else this.isLoading=!0,this.remark("")}else this.commonService.snackError("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n ch\u1ea5m \u0111\u1ec1 thi n\xe0y!","")}},{key:"toggleVisibility",value:function(e,t){var n=e.target,i=document.getElementById("q_"+t);i&&("block"==(null==i?void 0:i.style.display)?(i.style.display="none",n&&(n.textContent="visibility_off")):(i.style.display="block",n&&(n.textContent="visibility")))}},{key:"isValidPoint",value:function(){var e=0,t=this.form.value;for(var n in t){var i=Number(n.substring(3));t[n]>this.maxPointPerQuestion[i]&&e++}return!(e>0)}},{key:"validateForm",value:function(e,t){var n=parseFloat(e.target.value);n>t&&this.commonService.snackError("B\u1ea1n \u0111ang nh\u1eadp \u0111i\u1ec3m qu\xe1 s\u1ed1 \u0111i\u1ec3m t\u1ed1i \u0111a c\u1ee7a c\xe2u h\u1ecfi",""),n<0&&this.commonService.snackError("B\u1ea1n \u0111ang nh\u1eadp nh\u1ecf h\u01a1n 0","")}},{key:"ngOnInit",value:function(){var e=this;this.iframeSrc=this.commonService.getEnvValue("classliveUrl");var t,n={};this.examResultObj.confirmedAt&&(t=this.commonService.parseJson(this.examResultObj.essayResult));for(var i=0;i<this.questions.length;i++){var a="cau"+i;n[a]=new E.h(t?t[a]:"0")}this.form=this.fb.group(n),this.questions.forEach(function(t){var n=e.getMaxPoint(t.id);e.totalMaxPoint+=n,t.essMaxPoint=n,e.maxPointPerQuestion.push(t.essMaxPoint)}),this.form.valueChanges.subscribe(function(t){var n=JSON.stringify(t);n!=e.prevData&&(e.prevData=n,e.form.patchValue(t))})}},{key:"ngOnChanges",value:function(){}},{key:"ngAfterViewInit",value:function(){window.addEventListener("message",this.handleIframe)}},{key:"ngOnDestroy",value:function(){this.subscriptions.unsubscribe(),window.removeEventListener("message",this.handleIframe)}}]),e}()).\u0275fac=function(e){return new(e||G)(u.Pb(d.a),u.Pb(E.g),u.Pb(b.a))},G.\u0275cmp=u.Jb({type:G,selectors:[["azt-mark-essay"]],inputs:{isBackEnd:"isBackEnd",resultID:"resultID",files:"files",questions:"questions",userAnswersObj:"userAnswersObj",examResultObj:"examResultObj",iframeSrc:"iframeSrc",examQuestionObjs:"examQuestionObjs",configExam:"configExam",examObj:"examObj"},outputs:{saveResultEvent:"saveResultEvent"},features:[u.Bb],decls:11,vars:12,consts:[["id","essayBoxButtons"],[1,"listSTT",3,"formGroup"],["class","col-wrap",4,"ngFor","ngForOf"],["class","BWrap-one",4,"ngIf"],["id","showQuestionEssay"],["class","essay_qItem",4,"ngFor","ngForOf"],["class","mb-2 mt-2",4,"ngIf"],[1,"card-box","listPhotos",3,"ngStyle"],["id","mNote","frameborder","0",2,"width","100%","height","100%",3,"src"],["class","BWrap",4,"ngIf"],[1,"col-wrap"],["matTooltip","\u1ea8n/Hi\u1ec7n ph\u1ea7n b\xe0i l\xe0m c\u1ee7a c\xe2u h\u1ecfi n\xe0y",3,"click"],[1,"stt",2,"width","105px"],["matTooltip","\u0110i\u1ec3m t\u1ed1i \u0111a cho c\xe2u h\u1ecfi n\xe0y (theo thang \u0111i\u1ec3m)",1,"maxPoint"],["type","number","min","0","placeholder","Nh\u1eadp \u0111i\u1ec3m",3,"readonly","max","formControlName","keyup"],[1,"BWrap-one"],["id","btn-1",1,"mt-3","btn","btn-primary",3,"disabled","click"],[1,"essay_qItem"],[1,"mt-2",2,"display","block",3,"id"],[3,"isBackEnd","examObj","question","index","configExam","userAnswersObj","place"],["class","block-input",4,"ngIf"],[1,"block-input"],[1,"form-mark",3,"formGroup"],[3,"for"],["min","0","type","number","placeholder","Nh\u1eadp \u0111i\u1ec3m",1,"form-input",3,"readonly","id","max","formControlName","keyup"],[1,"mb-2","mt-2"],[1,"BWrap"],["id","btn-2",1,"mt-3","btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(u.Vb(0,"div",0),u.Vb(1,"form",1),u.Pc(2,z,8,5,"div",2),u.Ub(),u.Pc(3,F,3,2,"div",3),u.Ub(),u.Vb(4,"div",4),u.Pc(5,W,4,9,"div",5),u.Ub(),u.Pc(6,J,4,0,"div",6),u.Vb(7,"div",7),u.Qb(8,"iframe",8),u.hc(9,"safe"),u.Ub(),u.Pc(10,H,3,2,"div",9)),2&e&&(u.Db(1),u.nc("formGroup",t.form),u.Db(1),u.nc("ngForOf",t.questions),u.Db(1),u.nc("ngIf",t.isBackEnd),u.Db(2),u.nc("ngForOf",t.questions),u.Db(1),u.nc("ngIf",t.files&&0==t.files.length),u.Db(1),u.nc("ngStyle",u.sc(10,$,t.files&&0==t.files.length?"none":"block")),u.Db(1),u.nc("src",u.ic(9,8,t.iframeSrc),u.Fc),u.Db(2),u.nc("ngIf",t.isBackEnd))},directives:[E.B,E.s,E.l,w.l,w.m,w.n,O.a,C.a,E.w,E.d,E.r,E.j,B.a],pipes:[D.r],styles:["#essayBoxButtons[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background:#fff;padding:10px;border:1px solid #f1f1f1}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]{flex:auto;display:flex;flex-wrap:wrap;padding-bottom:10px;width:100%;border-bottom:1px solid #f1f1f1}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{margin-right:5px;display:flex;justify-content:center;align-items:center;padding-right:5px;border-right:1px solid #f1f1f1;margin-bottom:5px;width:19.5%}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0 5px;border:1px solid #ccc;height:30px;border-radius:3px;padding-left:5px;width:60px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], #essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{margin-right:3px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   .maxPoint[_ngcontent-%COMP%]{color:#838383;margin-right:3px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   .maxPoint[_ngcontent-%COMP%]:hover{cursor:help}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#585858}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.btn-primary[_ngcontent-%COMP%]{transition:all .5s;display:inline-block;background:#3f51b5;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);font-family:Roboto,Helvetica Neue,sans-serif;font-size:14px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover{background:#0e2399}.form-input[_ngcontent-%COMP%]{margin:0 5px;border:1px solid #ccc;height:30px;border-radius:3px;padding-left:5px;width:60px}.form-mark[_ngcontent-%COMP%]{margin-left:20px}div#showQuestionEssay[_ngcontent-%COMP%]{background-color:#fff;width:100%}.BWrap[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding-bottom:15px}.essay_qItem[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:30px 30px 0}.essay_qItem[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{margin-bottom:1rem;padding-bottom:30px!important}@media screen and (max-width:1474px){#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{margin-bottom:5px}.stt[_ngcontent-%COMP%]{font-size:12px}.maxPoint[_ngcontent-%COMP%]{font-size:10px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:19.4%}}@media screen and (max-width:768px){.stt[_ngcontent-%COMP%]{font-size:13px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:48%}}@media screen and (max-width:480px){#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{border-right:none;margin-bottom:5px}.stt[_ngcontent-%COMP%]{font-size:13px}#essayBoxButtons[_ngcontent-%COMP%]   .listSTT[_ngcontent-%COMP%]   .col-wrap[_ngcontent-%COMP%]{width:99%}}"]}),G);function X(e,t){1&e&&u.Qb(0,"azt-loading-effect")}function Y(e,t){if(1&e&&u.Qb(0,"header-backend",7),2&e){var n=u.gc(2);u.nc("headerTitle",n.headerTitle)("back_link",n.back_link)}}function Z(e,t){if(1&e){var n=u.Wb();u.Vb(0,"header-frontend",8),u.cc("RedirectToLink",function(){return u.Dc(n),u.gc(2).redirectToBackLink()}),u.Ub()}if(2&e){var i=u.gc(2);u.nc("headerTitle",i.headerTitle)("checkUrlFunction",!0)}}function ee(e,t){if(1&e&&u.Qb(0,"azt-basic-info-box",31),2&e){var n=u.gc(5);u.nc("name",n.studentObj.fullName)("avatarUrl",n.studentObj.avatar?n.studentObj.avatar:"https://ui-avatars.com/api/?uppercase=false&color=fff&background=a9a9a9&name="+n.studentObj.fullName)("birthDay",n.studentObj.birthday?n.studentObj.birthday:null)("phone",n.studentObj.phone?n.studentObj.phone:null)("studentObj",n.studentObj)}}function te(e,t){1&e&&(u.Vb(0,"div"),u.Vb(1,"div",32),u.Rc(2," Th\xed sinh ch\u01b0a thi l\u1ea7n n\xe0o. "),u.Ub(),u.Ub())}function ne(e,t){if(1&e&&(u.Vb(0,"span",41),u.Rc(1),u.Ub()),2&e){var n=u.gc(7);u.Db(1),u.Sc(n.examResultObj.mark)}}function ie(e,t){1&e&&(u.Vb(0,"span",41),u.Rc(1,"Ch\u01b0a \u0111\u01b0\u1ee3c xem"),u.Ub())}function ae(e,t){if(1&e){var n=u.Wb();u.Vb(0,"mat-icon",42),u.cc("click",function(){return u.Dc(n),u.gc(7).clickExportPdf()}),u.Rc(1,"file_download"),u.Ub()}}function se(e,t){if(1&e&&(u.Vb(0,"li"),u.Rc(1),u.Ub()),2&e){var n=u.gc(7);u.Db(1),u.Vc(" Tr\u1eafc nghi\u1ec7m: ",n.examResultObj.trueFalseMark," (",n.examResultObj.rightAnswer,"/",n.examResultObj.totalQuestion-n.countEssayQuestion,") ")}}function oe(e,t){if(1&e&&(u.Vb(0,"li"),u.Rc(1),u.Ub()),2&e){var n=u.gc(7);u.Db(1),u.Uc(" T\u1ef1 lu\u1eadn: ",n.examResultObj.confirmedAt?n.examResultObj.essayMark:"Ch\u01b0a ch\u1ea5m"," (",n.countEssayQuestion," c\xe2u) ")}}function ce(e,t){1&e&&(u.Vb(0,"li"),u.Rc(1,"Tr\u1eafc nghi\u1ec7m: Ch\u01b0a \u0111\u01b0\u1ee3c xem"),u.Ub())}function re(e,t){1&e&&(u.Vb(0,"li"),u.Rc(1,"T\u1ef1 lu\u1eadn: Ch\u01b0a \u0111\u01b0\u1ee3c xem"),u.Ub())}function le(e,t){if(1&e&&(u.Vb(0,"li"),u.Rc(1),u.Ub(),u.Vb(2,"li"),u.Rc(3),u.Ub()),2&e){var n=u.gc(7);u.Db(1),u.Tc("S\u1ed1 l\u1ea7n tho\xe1t m\xe0n h\xecnh: ",n.examTracks.exitCount,""),u.Db(2),u.Tc("S\u1ed1 l\u1ea7n tho\xe1t tr\xecnh duy\u1ec7t: ",n.examTracks.blurCount,"")}}var ue=function(e){return{"margin-top":e}};function de(e,t){if(1&e&&(u.Vb(0,"div"),u.Vb(1,"div",35),u.Vb(2,"span"),u.Rc(3,"\u0110i\u1ec3m cu\u1ed1i"),u.Ub(),u.Pc(4,ne,2,1,"span",36),u.Pc(5,ie,2,0,"span",36),u.Ub(),u.Vb(6,"div",37),u.Vb(7,"div",38),u.Vb(8,"span"),u.Rc(9,"Th\xf4ng tin chi ti\u1ebft"),u.Ub(),u.Pc(10,ae,2,0,"mat-icon",39),u.Ub(),u.Vb(11,"ul"),u.Pc(12,se,2,3,"li",33),u.Pc(13,oe,2,2,"li",33),u.Pc(14,ce,2,0,"li",33),u.Pc(15,re,2,0,"li",33),u.Pc(16,le,4,2,"ng-template",40),u.Ub(),u.Ub(),u.Ub()),2&e){var n=u.gc(6);u.Db(1),u.nc("ngStyle",u.sc(9,ue,n.isBackEnd?"15px":"0px")),u.Db(3),u.nc("ngIf",2!=n.examConfig.whenShowResult),u.Db(1),u.nc("ngIf",2==n.examConfig.whenShowResult),u.Db(5),u.nc("ngIf",n.isBackEnd),u.Db(2),u.nc("ngIf",n.multipleChoiceList.length>0&&2!=n.examConfig.whenShowResult),u.Db(1),u.nc("ngIf",n.essayQuestionList.length>0&&2!=n.examConfig.whenShowResult),u.Db(1),u.nc("ngIf",n.multipleChoiceList.length>0&&2==n.examConfig.whenShowResult),u.Db(1),u.nc("ngIf",n.essayQuestionList.length>0&&2==n.examConfig.whenShowResult),u.Db(1),u.nc("ngIf",n.examTracks&&1==n.examObj.autoMonitor)}}function me(e,t){if(1&e){var n=u.Wb();u.Vb(0,"mat-icon",45),u.cc("click",function(){return u.Dc(n),u.gc(7).clickExportPdf()}),u.Rc(1,"file_download"),u.Ub()}}function be(e,t){if(1&e){var n=u.Wb();u.Vb(0,"mat-icon",48),u.cc("click",function(){return u.Dc(n),u.gc(8).clickResultTrack()}),u.Rc(1,"view_timeline"),u.Ub()}}function he(e,t){if(1&e&&(u.Vb(0,"li",46),u.Rc(1),u.Pc(2,be,2,0,"mat-icon",47),u.Ub()),2&e){var n=u.gc(7);u.Db(1),u.Vc(" Tr\u1eafc nghi\u1ec7m: ",n.examResultObj.trueFalseMark," (",n.examResultObj.rightAnswer,"/",n.examResultObj.totalQuestion-n.countEssayQuestion,") "),u.Db(1),u.nc("ngIf",n.checkHasType1Question)}}function ge(e,t){if(1&e&&(u.Vb(0,"span"),u.Qb(1,"azt-create-avatar",49),u.Ub()),2&e){var n=u.gc(8);u.Db(1),u.oc("matTooltip","Ng\u01b0\u1eddi ch\u1ea5m: "+n.markedByObj.fullName),u.nc("nameCreateAvatar",n.markedByObj.fullName)("size",25)("linkAvatar",n.markedByObj.avatar)}}function fe(e,t){if(1&e&&(u.Vb(0,"li"),u.Rc(1),u.Pc(2,ge,2,4,"span",33),u.Ub()),2&e){var n=u.gc(7);u.Db(1),u.Uc(" T\u1ef1 lu\u1eadn: ",n.examResultObj.confirmedAt?n.examResultObj.essayMark:"Ch\u01b0a ch\u1ea5m"," (",n.countEssayQuestion," c\xe2u) "),u.Db(1),u.nc("ngIf",n.examResultObj.confirmedAt)}}function pe(e,t){if(1&e&&(u.Vb(0,"li"),u.Rc(1),u.Ub(),u.Vb(2,"li"),u.Rc(3),u.Ub()),2&e){var n=u.gc(7);u.Db(1),u.Tc("S\u1ed1 l\u1ea7n tho\xe1t m\xe0n h\xecnh: ",n.examTracks.exitCount,""),u.Db(2),u.Tc("S\u1ed1 l\u1ea7n tho\xe1t tr\xecnh duy\u1ec7t: ",n.examTracks.blurCount,"")}}function ve(e,t){if(1&e&&(u.Vb(0,"div"),u.Vb(1,"div",35),u.Vb(2,"span"),u.Rc(3,"\u0110i\u1ec3m cu\u1ed1i"),u.Ub(),u.Vb(4,"span",41),u.Rc(5),u.Ub(),u.Ub(),u.Vb(6,"div",37),u.Vb(7,"div",38),u.Vb(8,"span"),u.Rc(9,"Th\xf4ng tin chi ti\u1ebft"),u.Ub(),u.Pc(10,me,2,0,"mat-icon",43),u.Ub(),u.Vb(11,"ul"),u.Pc(12,he,3,4,"li",44),u.Pc(13,fe,3,3,"li",33),u.Pc(14,pe,4,2,"ng-template",40),u.Ub(),u.Ub(),u.Ub()),2&e){var n=u.gc(6);u.Db(1),u.nc("ngStyle",u.sc(6,ue,n.isBackEnd?"15px":"0px")),u.Db(4),u.Sc(n.examResultObj.mark),u.Db(5),u.nc("ngIf",n.isBackEnd),u.Db(2),u.nc("ngIf",n.multipleChoiceList.length>0),u.Db(1),u.nc("ngIf",n.essayQuestionList.length>0),u.Db(1),u.nc("ngIf",n.examTracks&&1==n.examObj.autoMonitor)}}var xe=function(e){return{select:e}};function we(e,t){if(1&e){var n=u.Wb();u.Vb(0,"li",52),u.cc("click",function(){u.Dc(n);var e=t.$implicit;return u.gc(7).getAndProcessAnswers(e.id)}),u.Rc(1),u.Qb(2,"br"),u.Rc(3),u.hc(4,"date"),u.hc(5,"date"),u.Qb(6,"br"),u.Rc(7),u.Ub()}if(2&e){var i=t.$implicit,a=t.index,s=u.gc(7);u.nc("ngClass",u.sc(11,xe,i.id==s.cur_result)),u.Db(1),u.Tc("L\u1ea7n ",s.examResultObjs.length-a,": "),u.Db(2),u.Uc(" ",u.jc(4,5,i.startedTest,"dd/MM/yyyy, HH:mm")," - ",u.jc(5,8,i.createdAt,"HH:mm")," "),u.Db(4),u.Tc(" Th\u1eddi gian l\xe0m b\xe0i: ",s.calculateTime(i.startedTest,i.createdAt)," ")}}function ye(e,t){if(1&e&&(u.Vb(0,"div",50),u.Vb(1,"div",38),u.Vb(2,"span"),u.Rc(3,"C\xe1c l\u1ea7n thi"),u.Ub(),u.Ub(),u.Vb(4,"ul"),u.Pc(5,we,8,13,"ng-template",51),u.Ub(),u.Ub()),2&e){var n=u.gc(6);u.Db(5),u.nc("ngForOf",n.examResultObjs)}}function _e(e,t){if(1&e&&(u.Pc(0,de,17,11,"div",33),u.Pc(1,ve,15,8,"div",33),u.Pc(2,ye,6,1,"div",34)),2&e){var n=u.gc(5);u.nc("ngIf",!n.isBackEnd),u.Db(1),u.nc("ngIf",n.isBackEnd),u.Db(1),u.nc("ngIf",n.isBackEnd)}}function ke(e,t){if(1&e){var n=u.Wb();u.Vb(0,"mat-icon",53),u.cc("click",function(){return u.Dc(n),u.gc(5).toggleNavInfo()}),u.Rc(1,"cancel"),u.Ub()}}function Oe(e,t){if(1&e&&(u.Vb(0,"div",54),u.Vb(1,"span"),u.Rc(2),u.Ub(),u.Vb(3,"span"),u.Rc(4),u.Ub(),u.Ub()),2&e){var n=u.gc(5);u.Db(2),u.Sc(n.studentObj.fullName),u.Db(2),u.Tc("\u0110i\u1ec3m cu\u1ed1i: ",n.examResultObj.mark,"")}}function Pe(e,t){1&e&&(u.Vb(0,"div",55),u.Rc(1,"Th\xed sinh ch\u01b0a l\xe0m b\xe0i thi!"),u.Ub())}function Ie(e,t){if(1&e){var n=u.Wb();u.Vb(0,"mat-icon",56),u.cc("click",function(){return u.Dc(n),u.gc(5).handleNavigate("next")}),u.Rc(1,"navigate_next"),u.Ub()}}function Ce(e,t){if(1&e){var n=u.Wb();u.Vb(0,"mat-icon",57),u.cc("click",function(){return u.Dc(n),u.gc(5).handleNavigate("prev")}),u.Rc(1,"navigate_before"),u.Ub()}}function De(e,t){if(1&e){var n=u.Wb();u.Vb(0,"div",58),u.Vb(1,"mat-form-field",59),u.Vb(2,"mat-label"),u.Rc(3,"Ch\u1ebf \u0111\u1ed9 xem"),u.Ub(),u.Vb(4,"mat-select",60),u.cc("ngModelChange",function(e){return u.Dc(n),u.gc(5).viewOption=e})("ngModelChange",function(){return u.Dc(n),u.gc(5).onChangeViewOption()}),u.Vb(5,"mat-option",61),u.Rc(6," T\u1ea5t c\u1ea3 "),u.Ub(),u.Vb(7,"mat-option",62),u.Rc(8," C\xe2u sai "),u.Ub(),u.Vb(9,"mat-option",63),u.Rc(10," C\xe2u \u0111\xfang "),u.Ub(),u.Ub(),u.Ub(),u.Ub()}if(2&e){var i=u.gc(5);u.Db(4),u.nc("ngModel",i.viewOption)}}function Me(e,t){1&e&&(u.Vb(0,"div",68),u.Rc(1,"Vui l\xf2ng ch\u1edd m\u1ed9t ch\xfat, h\u1ec7 th\u1ed1ng \u0111ang x\u1eed l\xfd d\u1eef li\u1ec7u...!"),u.Ub())}function qe(e,t){if(1&e&&u.Qb(0,"azt-loaded-img",69),2&e){var n=u.gc(6);u.nc("imgSrc",n.examObj.examHeader)}}var Se=function(e,t){return{correct:e,incorrect:t}},je=function(){return{}};function Re(e,t){if(1&e){var n=u.Wb();u.Vb(0,"azt-question-item",70),u.cc("statusResult",function(e){u.Dc(n);var i=t.$implicit;return u.gc(6).setClassStatusResult(e,i)}),u.Ub()}if(2&e){var i=t.$implicit,a=t.index,s=u.gc(6);u.nc("ngClass",u.tc(9,Se,i.isStatusResult,!i.isStatusResult))("userAnswersObj",0!=s.examResultObjs.length?s.userAnswersObj:u.rc(12,je))("question",i)("configExam",s.examConfig)("isRoleTeacher",s.isRoleTeacher)("index",a)("examObj",s.examObj)("isBackEnd",s.isBackEnd)("cur_result",s.cur_result)}}function Te(e,t){if(1&e&&(u.Vb(0,"mat-tab",64),u.Pc(1,Me,2,0,"div",65),u.Vb(2,"div",66),u.Pc(3,qe,1,1,"azt-loaded-img",67),u.Pc(4,Re,1,13,"ng-template",51),u.Ub(),u.Ub()),2&e){var n=u.gc(5);u.Db(1),u.nc("ngIf",n.isProcessingPdf),u.Db(1),u.Fb(n.viewOption),u.Db(1),u.nc("ngIf",n.examObj.examHeader),u.Db(1),u.nc("ngForOf",n.questionList)}}function Ue(e,t){if(1&e){var n=u.Wb();u.Vb(0,"div",75),u.Vb(1,"azt-mark-essay",76),u.cc("saveResultEvent",function(e){return u.Dc(n),u.gc(6).saveResultEvent(e)}),u.Ub(),u.Ub()}if(2&e){var i=u.gc(6);u.Db(1),u.nc("resultID",i.cur_result)("files",i.files)("questions",i.essayQuestionList)("userAnswersObj",i.userAnswersObj)("iframeSrc",i.iframeSrc)("examQuestionObjs",i.examQuestionObjs)("examResultObj",i.examResultObj)("configExam",i.examConfig)("isBackEnd",i.isBackEnd)("examObj",i.examObj)("isBackEnd",i.isBackEnd)}}function Le(e,t){1&e&&(u.Vb(0,"p",77),u.Rc(1," Kh\xf4ng c\xf3 c\xe2u t\u1ef1 lu\u1eadn "),u.Ub())}function Ee(e,t){if(1&e&&(u.Vb(0,"mat-tab",71),u.Pc(1,Ue,2,11,"div",72),u.Pc(2,Le,2,0,"ng-template",73,74,u.Qc),u.Ub()),2&e){var n=u.zc(3),i=u.gc(5);u.Db(1),u.nc("ngIf",i.essayQuestionList.length>0)("ngIfElse",n)}}function Ae(e,t){if(1&e){var n=u.Wb();u.Vb(0,"div",13),u.Vb(1,"div",14),u.Vb(2,"div",15),u.Pc(3,ee,1,5,"azt-basic-info-box",16),u.Pc(4,te,3,0,"div",0),u.Pc(5,_e,3,3,"ng-template",null,17,u.Qc),u.Pc(7,ke,2,0,"mat-icon",18),u.Ub(),u.Ub(),u.Pc(8,Oe,5,2,"div",19),u.Vb(9,"div",20),u.Vb(10,"div",21),u.Pc(11,Pe,2,0,"div",22),u.Pc(12,Ie,2,0,"mat-icon",23),u.Pc(13,Ce,2,0,"mat-icon",24),u.Vb(14,"div",25),u.Pc(15,De,11,1,"div",26),u.Vb(16,"mat-icon",27),u.cc("click",function(){return u.Dc(n),u.gc(4).toggleNavInfo()}),u.Rc(17,"menu_open"),u.Ub(),u.Vb(18,"mat-tab-group",28),u.Pc(19,Te,5,6,"mat-tab",29),u.Pc(20,Ee,4,2,"mat-tab",30),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub()}if(2&e){var i=u.zc(6),a=u.gc(4);u.Db(3),u.nc("ngIf",a.isBackEnd),u.Db(1),u.nc("ngIf",0==a.examResultObjs.length)("ngIfElse",i),u.Db(3),u.nc("ngIf",a.isToggleNavInfo),u.Db(1),u.nc("ngIf",a.isBackEnd),u.Db(3),u.nc("ngIf",a.examResultObjs.length<=0),u.Db(1),u.nc("ngIf",a.hasNext()),u.Db(1),u.nc("ngIf",a.hasPrev()),u.Db(2),u.nc("ngIf",0!=a.examResultObjs.length),u.Db(4),u.nc("ngIf",a.multipleChoiceList.length>0),u.Db(1),u.nc("ngIf",a.essayQuestionList.length>0)}}function Ve(e,t){1&e&&(u.Vb(0,"div",78),u.Vb(1,"mat-icon",79),u.Rc(2,"error"),u.Ub(),u.Rc(3," B\u1ea1n ch\u01b0a \u0111\u01b0\u1ee3c xem k\u1ebft qu\u1ea3 thi ! "),u.Ub())}var Be=function(e){return{toggleNavInfo:e}};function Qe(e,t){if(1&e&&(u.Vb(0,"div",10),u.Pc(1,Ae,21,11,"div",11),u.Pc(2,Ve,4,0,"ng-template",null,12,u.Qc),u.Ub()),2&e){var n=u.zc(3),i=u.gc(3);u.nc("ngClass",u.sc(3,Be,i.isToggleNavInfo)),u.Db(1),u.nc("ngIf","lang_core_cant_show_answer_when_end_time_not_end"!=i.errorMessage)("ngIfElse",n)}}function ze(e,t){if(1&e&&u.Pc(0,Qe,4,5,"div",9),2&e){var n=u.gc(2);u.nc("ngIf",!n.errorLoadMixedAssets)}}function Fe(e,t){if(1&e&&u.Qb(0,"azt-loading-effect",80),2&e){var n=u.gc(2);u.nc("customText","\u0110ang t\u1ea3i d\u1eef li\u1ec7u \u0111\u1ec1 thi: "+n.loadMixedExamProgress+"%")}}function Ne(e,t){1&e&&(u.Vb(0,"div",81),u.Vb(1,"mat-icon",79),u.Rc(2,"error"),u.Ub(),u.Rc(3," C\xf3 l\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u \u0111\u1ec1 thi, h\xe3y th\u1eed l\u1ea1i b\u1eb1ng c\xe1ch t\u1ea3i l\u1ea1i trang web! "),u.Ub())}function We(e,t){if(1&e&&(u.Pc(0,Y,1,2,"header-backend",2),u.Pc(1,Z,1,2,"header-frontend",3),u.Pc(2,ze,1,1,"ng-template",null,4,u.Qc),u.Pc(4,Fe,1,1,"azt-loading-effect",5),u.Pc(5,Ne,4,0,"div",6)),2&e){var n=u.zc(3),i=u.gc();u.nc("ngIf",i.isBackEnd),u.Db(1),u.nc("ngIf",!i.isBackEnd),u.Db(3),u.nc("ngIf",i.isMixedService_2&&!i.doneLoadMixedExamAssets&&!i.errorLoadMixedAssets)("ngIfElse",n),u.Db(1),u.nc("ngIf",i.errorLoadMixedAssets)}}var Je,He=((Je=function(){function t(e,i,a,s,c,r,l,u,d,m){n(this,t),this.apiService=e,this.dialog=i,this.commonService=a,this.translate=s,this.localize=c,this.activeRoute=r,this.router=l,this.store=u,this.mixService=d,this.mixService2=m,this.isBackEnd=!0,this.subscription=new o.a,this.isRoleTeacher=!0,this.headerTitle="T\xean \u0111\u1ec1 thi",this.back_link="",this.viewOption="viewAll",this.cur_result=0,this.cur_exam=0,this.cur_user=0,this.cur_student=0,this.hash_id=0,this.tenant_id=0,this.cate_id=0,this.tested_user_objs=[],this.studentObj={},this.examResultObjs=[],this.examResultObj={},this.examConfig={},this.questionList=[],this.essayQuestionList=[],this.multipleChoiceList=[],this.userAnswersObj={},this.files=[],this.countEssayQuestion=0,this.iframeSrc="",this.isLoading=!1,this.isProcessingPdf=!1,this.isToggleNavInfo=!1,this.isShowFadingLayer=!1,this.examQuestionObjs=[],this.backtoLink="",this.isMixedService_2=!1,this.doneLoadMixedExamAssets=!1,this.errorLoadMixedAssets=!1,this.countLoadedMixedAssets=0,this.totalMixedExamAssets=0,this.errorMessage="",this.markedByObj=null}return a(t,[{key:"setClassStatusResult",value:function(e,t){Object(c.a)(100).subscribe(function(){return t.isStatusResult=e})}},{key:"calculateTime",value:function(e,t){return this.commonService.calculationTestedTime(e,t)}},{key:"onChangeViewOption",value:function(){}},{key:"saveResultEvent",value:function(e){var t=this;e&&this.apiService.GetExamWithExamAnswer(this.cur_result,1).subscribe(function(e){1==e.success?t.examResultObj=e.data.examResultObj:t.handleError(e)})}},{key:"convertAnswersArr",value:function(e){var t=this;0!=e.length&&e.forEach(function(e){t.userAnswersObj["id_"+e.QuestionId]=e.AnswerContent[0].Content})}},{key:"getAndProcessAnswers",value:function(e){var t=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.cur_exam+"/"+this.cur_user+"/"+this.cur_student+"/"+e)+"?backto="+encodeURIComponent(this.backtoLink);window.location.href=t.toString()}},{key:"checkEssay",value:function(){for(var e=0;e<this.questionList.length;e++)3==this.questionList[e].answerType&&(this.questionList[e].indexLabel=e,this.essayQuestionList.push(this.questionList[e]))}},{key:"checkMultipleChoice",value:function(){for(var e=0;e<this.questionList.length;e++)1!=this.questionList[e].answerType&&4!=this.questionList[e].answerType||(this.questionList[e].indexLabel=e,this.multipleChoiceList.push(this.questionList[e]))}},{key:"processConvertData",value:function(e){var t=this;this.examQuestionObjs=e.data.examQuestionObjs,this.examResultObj=e.data.examResultObj,this.examResultTrack=e.data.resultTracks,this.examConfig=e.data.examObj,this.questionList=e.data.questionObjs,this.questionList.forEach(function(e){e.answerConfig=JSON.parse(e.answerConfig),e.answerResult=JSON.parse(e.answerResult),e.coordinates=JSON.parse(e.coordinates),e.questionContent=JSON.parse(e.questionContent),e.isRoleTeacher=t.isBackEnd}),this.countEssayQuestion=this.essayQuestionCounter(this.questionList),this.commonService.replaceCanvasBackground(this.questionList),this.checkEssay(),this.checkMultipleChoice(),this.convertAnswersArr(JSON.parse(e.data.examResultObj.answers)),this.processUserFiles(e.data.examResultObj.files)}},{key:"essayQuestionCounter",value:function(e){var t=0;return e.forEach(function(e){2!=e.answerType&&3!=e.answerType||t++}),t}},{key:"getAndProcessData",value:function(){var e=this;this.isLoading=!0,this.cur_user=this.activeRoute.snapshot.paramMap.get("user_id"),this.cur_student=this.activeRoute.snapshot.paramMap.get("student_id"),this.cur_result=this.activeRoute.snapshot.paramMap.get("result_id"),this.getTestedUsers(function(){e.apiService.GetLastExamResultOfStudentId(e.cur_exam,e.cur_user,e.cur_student,1).subscribe(function(t){1==t.success?t.data.examResultObjs&&t.data.examResultObjs.length>0?(e.studentObj=t.data.studentObj,e.examResultObjs=t.data.examResultObjs,e.headerTitle=t.data.lastExamResultObj.examObj.name,e.cur_result="0"==e.cur_result?t.data.examResultObjs[0].id:e.cur_result,e.apiService.GetExamWithExamAnswer(e.cur_result,1).subscribe(function(t){1==t.success?(e.examTracks=t.data.examTracks,e.examObj=t.data.examObj,e.markedByObj=t.data.markedByObj,e.processConvertData(t),e.translateMetaTitle(t),e.processMixQuestion(t.data.questionObjs[0].name.startsWith("[PDFv2]")),e.isLoading=!1):(e.isLoading=!1,e.handleError(t))})):(e.isLoading=!1,e.studentObj=t.data.studentObj):(e.isLoading=!1,e.handleError(t))})})}},{key:"getAndProcessDataForStudent",value:function(){var t=this;this.isLoading=!0,Object(r.b)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(function(n){e(n);var i,a=null===(i=t.commonService.getMyParam(t.activeRoute,"hash_id"))||void 0===i?void 0:i.toString();t.tenant_id=Number(t.commonService.getMyParam(t.activeRoute,"tenant_id")),t.cate_id=Number(t.commonService.getMyParam(t.activeRoute,"cate_id")),t.cur_result=Number(t.commonService.getMyParam(t.activeRoute,"result_id")),t.hash_id=a||"";var s=t.commonService.getSimpleSessionStorageWithExpired("result_result_"+t.cur_result);s?(t.examObj=s.examObj,t.headerTitle="K\u1ebft qu\u1ea3: "+s.examObj.name,t.translateMetaTitle({data:s}),t.examResultObjs=[1],t.processConvertData({data:s}),null!=s.questionObjs&&s.questionObjs.length>0&&s.questionObjs[0].name.startsWith("[PDFv2]")&&(t.examObj.labelsUrl.startsWith("[")?function(){t.isMixedService_2=!0;var e=t.commonService.parseJson(t.examObj.labelsUrl);t.totalMixedExamAssets=e.length;for(var n=e.map(function(e){return!0}),i={},a=[],s=0,o=0;o<e.length;o++)i["index_"+o]=t.commonService.getMyCdn(e[o]);var c=function(o){var c=new Image;c.crossOrigin="anonymous";var r=i[o],l=0;c.onload=function(){t.countLoadedMixedAssets++,s++,a[parseInt(o.split("_")[1])]=c,s==e.length&&(t.mixService2.drawMixQuestion(a,t.questionList,t.examObj),setTimeout(function(){t.doneLoadMixedExamAssets=!0},1e3))},c.onerror=function(){l<2?setTimeout(function(){var e="";switch(l){case 0:e=t.commonService.isViettelCDN(e)?t.commonService.getRawCdnLink(r)+"?t="+Date.now():t.commonService.getRawCdnLink(r);break;default:e=t.commonService.getRawCdnLink(r)+"?t="+Date.now()}c.src=e,l++},3e3):(n[parseInt(o.split("_")[1])]=!1,t.errorLoadMixedAssets=!0,t.mixService2.trackPdfV2Error(r))},c.src=r};for(var r in i)c(r)}():t.mixService.drawMixQuestion(t.examObj.labelsUrl,t.questionList,t.examObj)),t.back_link="/de-thi/"+t.hash_id,t.isLoading=!1):t.apiService.GetFrontExamWithExamAnswer(t.hash_id,t.cur_result).subscribe(function(e){1==e.success?(t.examObj=e.data.examObj,t.headerTitle="K\u1ebft qu\u1ea3: "+e.data.examObj.name,t.errorMessage=e.data.errorMessage,t.translateMetaTitle(e),t.examResultObjs=[1],t.processConvertData(e),null!=e.data.questionObjs&&e.data.questionObjs.length>0&&e.data.questionObjs[0].name.startsWith("[PDFv2]")&&(t.examObj.labelsUrl.startsWith("[")?function(){t.isMixedService_2=!0;var e=t.commonService.parseJson(t.examObj.labelsUrl);t.totalMixedExamAssets=e.length;for(var n=e.map(function(e){return!0}),i={},a=[],s=0,o=0;o<e.length;o++)i["index_"+o]=t.commonService.getMyCdn(e[o]);var c=function(o){var c=new Image;c.crossOrigin="anonymous";var r=i[o],l=0;c.onload=function(){t.countLoadedMixedAssets++,s++,a[parseInt(o.split("_")[1])]=c,s==e.length&&(t.mixService2.drawMixQuestion(a,t.questionList,t.examObj),setTimeout(function(){t.doneLoadMixedExamAssets=!0},1e3))},c.onerror=function(){l<=3?setTimeout(function(){c.src=t.commonService.getRawCdnLink(r),l++},3e3):(n[parseInt(o.split("_")[1])]=!1,t.errorLoadMixedAssets=!0,t.mixService2.trackPdfV2Error(r))},c.src=r};for(var r in i)c(r)}():t.mixService.drawMixQuestion(t.examObj.labelsUrl,t.questionList,t.examObj)),t.back_link="/de-thi/"+t.hash_id,t.isLoading=!1):(t.isLoading=!1,t.handleError(e))})})}},{key:"processMixQuestion",value:function(e){var t=this;e&&(this.examObj.labelsUrl.startsWith("[")?function(){t.isMixedService_2=!0;var e=t.commonService.parseJson(t.examObj.labelsUrl);t.totalMixedExamAssets=e.length;for(var n=e.map(function(e){return!0}),i={},a=[],s=0,o=0;o<e.length;o++)i["index_"+o]=t.commonService.getMyCdn(e[o]);var c=function(o){var c=new Image;c.crossOrigin="anonymous";var r=i[o],l=0;c.onload=function(){t.countLoadedMixedAssets++,s++,a[parseInt(o.split("_")[1])]=c,s==e.length&&(t.mixService2.drawMixQuestion(a,t.questionList,t.examObj),setTimeout(function(){t.doneLoadMixedExamAssets=!0},1e3))},c.onerror=function(){l<3?setTimeout(function(){var e="";switch(l){case 0:e=t.commonService.isViettelCDN(e)?t.commonService.getRawCdnLink(r)+"?t="+Date.now():t.commonService.getRawCdnLink(r);break;default:e=t.commonService.getRawCdnLink(r)+"?t="+Date.now()}c.src=e,l++},3e3):(n[parseInt(o.split("_")[1])]=!1,t.errorLoadMixedAssets=!0,t.mixService2.trackPdfV2Error(r))},c.src=r};for(var r in i)c(r)}():this.mixService.drawMixQuestion(this.examObj.labelsUrl,this.questionList,this.examObj))}},{key:"translateMetaTitle",value:function(e){var t=this.isBackEnd?"Ch\u1ea5m \u0111\u1ec1 thi: ":"K\u1ebft qu\u1ea3: ";this.commonService.translateMetaData({title:t+e.data.examObj.name,description:t+e.data.examObj.name,image:"lang_cms_test_image"})}},{key:"processUserFiles",value:function(e){this.files=""!=e?JSON.parse(e):[]}},{key:"progressUserObjsList",value:function(e,t){var n=[];return e.length>0&&(n=e),t.forEach(function(e){e.results.forEach(function(e){n.push(e)})}),n}},{key:"getTestedUsers",value:function(e){var t=this,n=this.commonService.getSimpleSessionStorageWithExpired("tested_exam_result");n?(this.tested_user_objs=n,e()):this.apiService.getTestedUserObjs("test_review",this.cur_exam).subscribe(function(n){1==n.success&&(t.tested_user_objs=t.progressUserObjsList(n.data.studentsNotInClassResults,n.data.studentsInClassResults),t.commonService.saveSimpleSessionStorageWithExpired("tested_exam_result",t.tested_user_objs)),e()})}},{key:"handleError",value:function(e){var t=this;this.commonService.myTranslate([e.message,"lang_cms_common_ok"]).subscribe(function(n){t.commonService.snackError(n[e.message],n.lang_cms_common_ok)})}},{key:"hasNext",value:function(){for(var e=-1,t=0;t<this.tested_user_objs.length;t++)if(this.tested_user_objs[t].userId==this.cur_user&&this.tested_user_objs[t].studentId==this.cur_student){e=t;break}return e<this.tested_user_objs.length-1}},{key:"hasPrev",value:function(){for(var e=-1,t=0;t<this.tested_user_objs.length;t++)if(this.tested_user_objs[t].userId==this.cur_user&&this.tested_user_objs[t].studentId==this.cur_student){e=t;break}return e>0}},{key:"handleNavigate",value:function(e){for(var t=-1,n=0;n<this.tested_user_objs.length;n++)if(this.tested_user_objs[n].userId==this.cur_user&&this.tested_user_objs[n].studentId==this.cur_student){t=n;break}if("next"==e){if(t>=0&&t<=this.tested_user_objs.length-2){var i=this.tested_user_objs[t+1].userId.toString(),a=this.tested_user_objs[t+1].studentId.toString(),s=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.cur_exam+"/"+i+"/"+a+"/0")+"?backto="+encodeURIComponent(this.backtoLink);window.location.href=s.toString()}}else t>0&&t<=this.tested_user_objs.length-1&&(i=this.tested_user_objs[t-1].userId.toString(),a=this.tested_user_objs[t-1].studentId.toString(),s=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.cur_exam+"/"+i+"/"+a+"/0")+"?backto="+encodeURIComponent(this.backtoLink),window.location.href=s.toString())}},{key:"toggleNavInfo",value:function(){this.isToggleNavInfo=!this.isToggleNavInfo}},{key:"clickExportPdf",value:function(){this.commonService.gaEvent("click_exp_pdf_in_test_review");var e=this.localize.translateRoute("/admin/testbank/export-tool")+"/"+this.cur_exam+"/"+this.cur_user+"/"+this.cur_student+"/"+this.cur_result+"?ref=test-review";window.open(e,"_blank")}},{key:"clickResultTrack",value:function(){this.commonService.gaEvent("click_exp_pdf_in_test_review");var e=this.localize.translateRoute("/admin/testbank/test-result-tracking")+"/"+this.cur_exam+"/"+this.cur_user+"/"+this.cur_student+"/"+this.cur_result;window.open(e,"_blank")}},{key:"redirectToBackLink",value:function(){if(!this.backtoLink.includes("enter-question"))return this.commonService.myNavigationWithQueryString("/de-thi/"+this.hash_id,"?backto="+encodeURIComponent(this.backtoLink));this.commonService.myNavigation(this.backtoLink)}},{key:"toggleQA",value:function(){this.store.dispatch(l.c())}},{key:"continueQA",value:function(){this.store.dispatch(l.a({selectTest:{id:this.examObj.id,name:this.examObj.name},resultId:this.cur_result})),this.commonService.myNavigation("/student-qa")}},{key:"ngOnInit",value:function(){var t=this;this.subscription.add(this.store.subscribe(function(e){t.state=e})),this.iframeSrc=this.commonService.getEnvValue("classliveUrl"),Object(r.b)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(function(n){e(n),t.isRoleTeacher=t.isBackEnd,t.backtoLink=t.commonService.getMyQueryParam("backto"),t.isBackEnd?(t.cur_exam=t.activeRoute.snapshot.paramMap.get("exam_id"),t.back_link=t.backtoLink?t.backtoLink:"/admin/testbank/tested-list/0/"+t.cur_exam+"/0",t.getAndProcessData()):t.getAndProcessDataForStudent()})}},{key:"ngAfterContentInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe(),this.commonService.stopIntervalFunc("test_review")}},{key:"loadMixedExamProgress",get:function(){return Math.round(this.countLoadedMixedAssets/this.totalMixedExamAssets*100)}},{key:"checkHasType1Question",get:function(){for(var e=!1,t=0;t<this.questionList.length;t++)if(1==this.questionList[t].answerType){e=!0;break}return e}}]),t}()).\u0275fac=function(e){return new(e||Je)(u.Pb(d.a),u.Pb(m.b),u.Pb(b.a),u.Pb(h.c),u.Pb(g.e),u.Pb(f.a),u.Pb(f.i),u.Pb(p.h),u.Pb(v.a),u.Pb(x.a))},Je.\u0275cmp=u.Jb({type:Je,selectors:[["azt-test-review"]],inputs:{isBackEnd:"isBackEnd"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"headerTitle","back_link",4,"ngIf"],[3,"headerTitle","checkUrlFunction","RedirectToLink",4,"ngIf"],["myContent",""],[3,"customText",4,"ngIf","ngIfElse"],["class","p-5 m-5 text-center alert alert-danger",4,"ngIf"],[3,"headerTitle","back_link"],[3,"headerTitle","checkUrlFunction","RedirectToLink"],["id","test_review_container","class","container-fluid mt-2",3,"ngClass",4,"ngIf"],["id","test_review_container",1,"container-fluid","mt-2",3,"ngClass"],["id","tabRowExam","class","row","style","margin-bottom: 10px;",4,"ngIf","ngIfElse"],["NotTimeYet",""],["id","tabRowExam",1,"row",2,"margin-bottom","10px"],["id","col_std_info",1,"col-md-4","col-lg-3"],["id","tester-info"],[3,"name","avatarUrl","birthDay","phone","studentObj",4,"ngIf"],["allReadyTested",""],["id","close_button",3,"click",4,"ngIf"],["id","short_cut_mobile","class","col-md-4 col-lg-3 mb-3",4,"ngIf"],["id","test_review_area",1,"col-md-8","col-lg-9"],["id","col_examContent_wrap"],["class","text-center",4,"ngIf"],["class","clickable next_icon",3,"click",4,"ngIf"],["class","clickable prev_icon",3,"click",4,"ngIf"],["id","mbTestContent"],["id","filterWrap",4,"ngIf"],[1,"clickable",3,"click"],[1,"test-review-tab"],["label","Tr\u1eafc nghi\u1ec7m",4,"ngIf"],["id","tabEssay","label","T\u1ef1 lu\u1eadn","aria-labelledby","tabEssay",4,"ngIf"],[3,"name","avatarUrl","birthDay","phone","studentObj"],[1,"d-flex","justify-content-center","py-2"],[4,"ngIf"],["class","tested-times","style","overflow: auto;",4,"ngIf"],["id","fullPoint",3,"ngStyle"],["class","point",4,"ngIf"],[1,"tested-times"],[1,"label","d-flex","justify-content-between","align-items-center"],["matTooltip","T\u1ea3i b\xe0i l\xe0m n\xe0y d\u01b0\u1edbi d\u1ea1ng PDF","class","clickable","style","color: darkgrey;",3,"click",4,"ngIf"],[3,"ngIf"],[1,"point"],["matTooltip","T\u1ea3i b\xe0i l\xe0m n\xe0y d\u01b0\u1edbi d\u1ea1ng PDF",1,"clickable",2,"color","darkgrey",3,"click"],["matTooltip","T\u1ea3i b\xe0i l\xe0m d\u01b0\u1edbi d\u1ea1ng pdf","class","clickable","style","color: darkgrey;",3,"click",4,"ngIf"],["class","d-flex justify-content-between align-items-center",4,"ngIf"],["matTooltip","T\u1ea3i b\xe0i l\xe0m d\u01b0\u1edbi d\u1ea1ng pdf",1,"clickable",2,"color","darkgrey",3,"click"],[1,"d-flex","justify-content-between","align-items-center"],["matTooltip","Xem chi ti\u1ebft qu\xe1 tr\xecnh l\xe0m b\xe0i tr\u1eafc nghi\u1ec7m","class","ml-1 clickable","style","color: darkgrey;",3,"click",4,"ngIf"],["matTooltip","Xem chi ti\u1ebft qu\xe1 tr\xecnh l\xe0m b\xe0i tr\u1eafc nghi\u1ec7m",1,"ml-1","clickable",2,"color","darkgrey",3,"click"],[2,"cursor","pointer",3,"matTooltip","nameCreateAvatar","size","linkAvatar"],[1,"tested-times",2,"overflow","auto"],["ngFor","",3,"ngForOf"],[1,"clickable",3,"ngClass","click"],["id","close_button",3,"click"],["id","short_cut_mobile",1,"col-md-4","col-lg-3","mb-3"],[1,"text-center"],[1,"clickable","next_icon",3,"click"],[1,"clickable","prev_icon",3,"click"],["id","filterWrap"],["appearance","fill"],[3,"ngModel","ngModelChange"],["value","viewAll"],["value","viewWrong"],["value","viewRight"],["label","Tr\u1eafc nghi\u1ec7m"],["class","fading_layer",4,"ngIf"],["id","multipleChoiceWrap"],["style","display: block","class","mb-1",3,"imgSrc",4,"ngIf"],[1,"fading_layer"],[1,"mb-1",2,"display","block",3,"imgSrc"],[3,"ngClass","userAnswersObj","question","configExam","isRoleTeacher","index","examObj","isBackEnd","cur_result","statusResult"],["id","tabEssay","label","T\u1ef1 lu\u1eadn","aria-labelledby","tabEssay"],["id","markEssay",4,"ngIf","ngIfElse"],["class","pt-2"],["notHaveEssay",""],["id","markEssay"],[3,"resultID","files","questions","userAnswersObj","iframeSrc","examQuestionObjs","examResultObj","configExam","isBackEnd","examObj","saveResultEvent"],[1,"p-3"],[1,"m-5","text-center","alert","alert-danger"],[2,"vertical-align","bottom"],[3,"customText"],[1,"p-5","m-5","text-center","alert","alert-danger"]],template:function(e,t){if(1&e&&(u.Pc(0,X,1,0,"azt-loading-effect",0),u.Pc(1,We,6,5,"ng-template",null,1,u.Qc)),2&e){var n=u.zc(2);u.nc("ngIf",t.isLoading)("ngIfElse",n)}},directives:[w.m,y.a,_.a,k.a,w.k,O.a,P.b,T,w.n,C.a,I.a,w.l,U.d,U.g,L.a,E.r,E.u,A.n,P.a,V.a,B.a,K],pipes:[w.e],styles:["#test_review_container[_ngcontent-%COMP%]{background:#ecf0f5;flex:auto;padding-top:15px}#tester-info[_ngcontent-%COMP%]{width:300px;padding:15px;background-color:#fff;margin:0 auto;position:sticky;top:10px;max-height:calc(100vh - 10px);display:flex;flex-direction:column;max-width:100%;border-radius:3px;border:1px solid #f1f1f1}#short_cut_mobile[_ngcontent-%COMP%]{display:none}#fullPoint[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #f1f1f1;background-color:#fafafa;padding:10px;margin-top:15px;align-items:center}#fullPoint[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{font-weight:500;font-size:130%}.tested-times[_ngcontent-%COMP%]{margin-top:15px}.tested-times[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{border:1px solid #f1f1f1;background-color:#fafafa;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;border:1px solid #f1f1f1;border-top:none;margin-bottom:0;background-color:#fff;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.select[_ngcontent-%COMP%]{font-weight:500}.tested-times[_ngcontent-%COMP%]:last-child{flex:auto;overflow:auto}#multipleChoiceWrap[_ngcontent-%COMP%]{background-color:#fff;padding:30px;position:relative}.fading_layer[_ngcontent-%COMP%]{position:absolute;z-index:9;background-color:hsla(0,0%,100%,.8901960784313725);width:100%;height:100%;top:0;left:0;padding-top:200px;text-align:center;color:#a9a9a9;font-size:16px}#filterWrap[_ngcontent-%COMP%]{position:absolute;right:0;top:-4px;z-index:2}.viewRight[_ngcontent-%COMP%]   .incorrect[_ngcontent-%COMP%], .viewWrong[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%]{display:none}#col_examContent_wrap[_ngcontent-%COMP%]{width:1100px}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{position:fixed;right:5px;top:50%;z-index:3;font-size:35px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background-color:hsla(0,0%,78.8%,.7725490196078432);border-radius:50%;color:#fff;margin-top:-20px}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon.prev_icon[_ngcontent-%COMP%]{left:5px}#mbTestContent[_ngcontent-%COMP%]{position:relative}#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:none;position:absolute;top:12px;color:#646464;z-index:100}#test_review_container.toggleNavInfo[_ngcontent-%COMP%]   #col_std_info[_ngcontent-%COMP%]{left:0}#close_button[_ngcontent-%COMP%]{color:red;position:absolute;right:5px;top:5px}@media screen and (max-width:320px){#tester-info[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width:480px){#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:inline-block}#boxQAButtons[_ngcontent-%COMP%]{position:fixed;right:20px;z-index:99999999999999;bottom:10px;background-color:#fff;border:1px solid #a3a3a3;padding:5px;border-radius:4px}#test_review_container[_ngcontent-%COMP%]{padding-top:0}#col_std_info[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;z-index:99999;background:rgba(0,0,0,.611764705882353);bottom:0;padding:0;transition:all .5s}#short_cut_mobile[_ngcontent-%COMP%]{display:flex;font-weight:500;font-size:18px;justify-content:space-between;color:#4a4a4a}#header-app-component[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{padding-left:0!important}#tester-info[_ngcontent-%COMP%]{margin:0;position:relative;height:100%;max-height:unset;top:0}#multipleChoiceWrap[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;padding-top:5px}}@media screen and (max-width:1600px){#col_examContent_wrap[_ngcontent-%COMP%]{width:100%}}"]}),Je)},RtGS:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var s=i("mrSG"),o=i("quSY"),c=i("fXoL"),r=i("gbi4"),l=i("yTNM"),u=function(){var e=function(){function e(t,i){var a=this;n(this,e),this.commonService=t,this.apiService=i,this.labelsImgs=[],this.questionLabelMap=[],this.abcdLabelPos={},this.subscription=new o.a,this.drawMixQuestion=function(e,t,n){return Object(s.a)(a,void 0,void 0,regeneratorRuntime.mark(function i(){var a,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:for(this.labelsImgs=e,this.questionLabelMap=t[0].questionContent[0].questionLabelMap?t[0].questionContent[0].questionLabelMap:this.commonService.parseJson(n.questionLabelMap),this.abcdLabelPos=t[0].questionContent[0].abcdLabelPos?t[0].questionContent[0].abcdLabelPos:this.commonService.parseJson(n.abcdLabelPos),a={width:1,height:1,top:1,left:1},t.forEach(function(e){1==e.isImage&&(e.mixDataImg="https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/svgs/Img2_dat-01.svg",e.answerLabelsMockup={"label-A":a,"label-B":a,"label-C":a,"label-D":a,"label-E":a,"label-F":a})}),s=0;s<t.length;s++)1==t[s].answerType?this.drawForType1(t[s].answerConfig,t[s].questionContent[0],s,t):this.prepareImageForOtherTypes(t[s].questionContent[0],s,t);case 4:case"end":return i.stop()}},i,this)}))}}return a(e,[{key:"drawForType1",value:function(e,t,n,i){var a=this,s=e.map(function(e){return a.commonService.parseJson(e.content)}),o=function(){return a.questionLabelMap[n].width>t.metaData.question.remove.width?a.questionLabelMap[n].width-t.metaData.question.remove.width:0},c=document.createElement("canvas");c.width=t.metaData.question.width+o(),c.height=t.metaData.question.height;var r=c.getContext("2d");null==r||r.drawImage(this.labelsImgs[t.metaData.question.posit.locate],t.metaData.question.posit.left,t.metaData.question.posit.top,t.metaData.question.width,t.metaData.question.height,o(),0,t.metaData.question.width,t.metaData.question.height),null==r||r.drawImage(this.labelsImgs[0],this.questionLabelMap[n].left,this.questionLabelMap[n].top,this.questionLabelMap[n].width,this.questionLabelMap[n].height,t.metaData.question.remove.x,t.metaData.question.remove.y,this.questionLabelMap[n].width,this.questionLabelMap[n].height);var l,u,d=s[0],m=0,b=t.metaData.answers[0].x,h=t.metaData.answers[0].y;l=b,m=b+d.width,u=b+d.width;var g=s[0].height-t.metaData.answers[0].height;null==r||r.drawImage(this.labelsImgs[d.posit.locate],d.posit.left,d.posit.top,d.width,d.height,b,h,d.width,d.height);var f=e[0].alpha?e[0].alpha:e[0].key,p=0;if(e[0].alpha)for(var v=e[0].key,x=0;x<e.length;x++)if(v==e[x].alpha){p=x;break}var w={left:void 0!==t.metaData.answers[p].remove.xAns?b+t.metaData.answers[p].remove.xAns:t.metaData.answers[0].remove.x,top:void 0!==t.metaData.answers[p].remove.yAns?h+t.metaData.answers[p].remove.yAns:t.metaData.answers[0].remove.y,width:t.metaData.answers[0].remove.width,height:t.metaData.answers[0].remove.height};null==r||r.drawImage(this.labelsImgs[0],this.abcdLabelPos[f].left,this.abcdLabelPos[f].top,t.metaData.answers[0].remove.width,t.metaData.answers[0].remove.height,w.left,w.top,w.width,w.height),i[n].answerLabelsMockup["label-"+(e[0].alpha?e[0].alpha:e[0].key)]=w;for(var y=1;y<e.length;y++){var _=t.metaData.answers[y].x,k=t.metaData.answers[y].y;if(l+30<_){var O=[u,m];_<Math.max.apply(Math,O)&&((_=Math.max.apply(Math,O))+s[y].width>c.width&&(_-=_+s[y].width-c.width),t.metaData.answers[y].remove.x=_),m+=s[y].width}else if(m=l+s[y].width,k+=g,g+=s[y].height-t.metaData.answers[y].height,k+s[y].height>c.height){var P=k+s[y].height-c.height;k-=P,t.metaData.answers[y].remove.y-=P}null==r||r.drawImage(this.labelsImgs[s[y].posit.locate],s[y].posit.left,s[y].posit.top,s[y].width,s[y].height,_,k,s[y].width,s[y].height);var I=y,C=e[y].alpha?e[y].alpha:e[y].key;if(e[y].alpha)for(var D=e[y].key,M=0;M<e.length;M++)if(D==e[M].alpha){I=M;break}var q={left:void 0!==t.metaData.answers[I].remove.xAns?_+t.metaData.answers[I].remove.xAns:t.metaData.answers[y].remove.x,top:void 0!==t.metaData.answers[I].remove.yAns?k+t.metaData.answers[I].remove.yAns:t.metaData.answers[y].remove.y,width:t.metaData.answers[y].remove.width,height:t.metaData.answers[y].remove.height};null==r||r.drawImage(this.labelsImgs[0],this.abcdLabelPos[C].left,this.abcdLabelPos[C].top,t.metaData.answers[y].remove.width,t.metaData.answers[y].remove.height,q.left,q.top,q.width,q.height),i[n].answerLabelsMockup["label-"+(e[y].alpha?e[y].alpha:e[y].key)]=q,y==e.length-1&&(i[n].mixDataImg=c.toDataURL("image/png"))}}},{key:"prepareImageForOtherTypes",value:function(e,t,n){var i=this,a=function(){return i.questionLabelMap[t].width>e.metaData.question.remove.width?i.questionLabelMap[t].width-e.metaData.question.remove.width:0},s=document.createElement("canvas");s.width=e.metaData.question.width+a(),s.height=e.metaData.question.height;var o=s.getContext("2d"),c=e.metaData.question.urlExcludeLabelOnly,r=function(){null==o||o.drawImage(i.labelsImgs[0],i.questionLabelMap[t].left,i.questionLabelMap[t].top,i.questionLabelMap[t].width,i.questionLabelMap[t].height,e.metaData.question.remove.x,e.metaData.question.remove.y,i.questionLabelMap[t].width,i.questionLabelMap[t].height),n[t].mixDataImg=s.toDataURL("image/png")};if(c){var l=new Image;l.onload=function(){null==o||o.drawImage(l,a(),0),r()},l.src=c}else null==o||o.drawImage(this.labelsImgs[e.metaData.question.posit.locate],e.metaData.question.posit.left,e.metaData.question.posit.top,e.metaData.question.width,e.metaData.question.height,a(),0,e.metaData.question.width,e.metaData.question.height),r()}},{key:"trackPdfV2Error",value:function(e){var t,n;try{t=(n=localStorage.getItem("user_obj"))?JSON.parse(n).id:"unknown"}catch(s){t="browser_not_local_storage"}var i=document.URL.split("?")[0].split("/"),a={userId:t,trackKey:"V2_ERR_DISPLAY",name:"Track l\u1ed7i kh\xf4ng hi\u1ec3n th\u1ecb c\xe2u h\u1ecfi v2",userAgent:navigator.userAgent,content:e,url:document.URL,error:i[i.length-1]};this.subscription.add(this.apiService.saveTrackLog(a).subscribe(function(e){console.log("Track l\u1ed7i th\xe0nh c\xf4ng!")}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Zb(r.a),c.Zb(l.a))},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},SPOn:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var s=i("fXoL"),o=i("gbi4"),c=function(){var e=function(){function e(t){n(this,e),this.commonService=t}return a(e,[{key:"convertUrl",value:function(){this.src=this.commonService.getRawCdnLink(this.src)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Pb(o.a))},e.\u0275dir=s.Kb({type:e,selectors:[["","appImageFallback",""]],hostVars:1,hostBindings:function(e,t){1&e&&s.cc("error",function(){return t.convertUrl()}),2&e&&s.Yb("src",t.src,s.Ic)},inputs:{src:"src"}}),e}()},Vwpm:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var s=i("fXoL"),o=i("ofXK"),c=i("SPOn"),r=i("gaSO");function l(e,t){1&e&&(s.Vb(0,"div",2),s.Qb(1,"img",3),s.Ub())}var u=function(){var e=function(){function e(){n(this,e),this.loading=!0}return a(e,[{key:"onLoad",value:function(){this.loading=!1}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["azt-loaded-img"]],inputs:{imgSrc:"imgSrc",id:"id"},decls:4,vars:8,consts:[["class","px-4 py-3 text-center",4,"ngIf"],["appImageFallback","",2,"width","100%",3,"hidden","src","alt","load"],[1,"px-4","py-3","text-center"],["src","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/svgs/Img2_dat-01.svg","alt","image_loading_placeholer"]],template:function(e,t){1&e&&(s.Vb(0,"div"),s.Pc(1,l,2,0,"div",0),s.Vb(2,"img",1),s.cc("load",function(){return t.onLoad()}),s.hc(3,"mycdn"),s.Ub(),s.Ub()),2&e&&(s.Db(1),s.nc("ngIf",t.loading),s.Db(1),s.Fb(t.id?"img-fluid questionId_"+t.id:"img-fluid"),s.oc("src",s.ic(3,6,t.imgSrc),s.Hc),s.oc("alt",t.imgSrc),s.nc("hidden",t.loading))},directives:[o.m,c.a],pipes:[r.n],styles:[""]}),e}()},gJ4n:function(e,t,i){"use strict";i.d(t,"a",function(){return De});var s=i("fXoL"),o=i("quSY"),c=i("UETp"),r=i("tyNb"),l=i("gbi4"),u=i("Avyq"),d=i("yTNM"),m=i("l7P3"),b=i("ofXK"),h=i("Qu3c"),g=i("SPOn"),f=i("Vwpm"),p=i("gaSO");function v(e,t){if(1&e&&(s.Vb(0,"div",10),s.Qb(1,"img",11),s.hc(2,"mycdn"),s.Ub()),2&e){var n=s.gc(2).$implicit,i=s.gc(2);s.nc("hidden",i.checkHiddenGroup(n.firstInGroupIndexes,i.index)),s.Db(1),s.oc("src",s.ic(2,2,n.groupUrl),s.Hc)}}function x(e,t){if(1&e&&(s.Vb(0,"div",12),s.Qb(1,"iframe",13),s.hc(2,"safe"),s.Ub()),2&e){var n=s.gc(2).$implicit;s.Db(1),s.nc("src",s.ic(2,1,n.url),s.Fc)}}function w(e,t){if(1&e&&s.Qb(0,"azt-loaded-img",15),2&e){var n=s.gc(3).$implicit,i=s.gc(2);s.nc("id",i.question.id)("imgSrc",n.url)}}function y(e,t){if(1&e&&s.Pc(0,w,1,2,"azt-loaded-img",14),2&e){var n=s.gc(2).$implicit;s.nc("ngIf","png"==n.extension||"jpg"==n.extension)}}function _(e,t){if(1&e&&(s.Tb(0),s.Qb(1,"img",16),s.hc(2,"mycdn"),s.Sb()),2&e){var n=s.gc(4);s.Db(1),s.Fb("img-fluid img_respon questionId_"+n.question.id),s.pc("id","questionPlaceholder_",n.index,""),s.oc("src",s.ic(2,5,n.question.mixDataImg),s.Hc)}}function k(e,t){if(1&e&&(s.Vb(0,"div"),s.Pc(1,v,3,4,"div",6),s.Pc(2,x,3,3,"div",7),s.Pc(3,y,1,1,"ng-template",null,8,s.Qc),s.Pc(5,_,3,7,"ng-container",9),s.Ub()),2&e){var n=s.zc(4),i=s.gc().$implicit,a=s.gc(2);s.Db(1),s.nc("ngIf",i.groupUrl),s.Db(1),s.nc("ngIf","mp4"==i.extension),s.Db(3),s.nc("ngIf",a.question.name.startsWith("[PDFv2]"))("ngIfElse",n)}}function O(e,t){if(1&e&&(s.Vb(0,"audio",19),s.Qb(1,"source",20),s.hc(2,"safe"),s.hc(3,"mycdn"),s.Ub()),2&e){var n=s.gc(4);s.oc("id","audio_"+n.question.id),s.Db(1),s.nc("src",s.ic(2,2,s.ic(3,4,n.question.attachments[0].url)),s.Hc)}}function P(e,t){if(1&e&&(s.Vb(0,"div",17),s.Pc(1,O,4,6,"audio",18),s.Ub()),2&e){var n=s.gc(3);s.Db(1),s.nc("ngIf","mp3"==n.question.attachments[0].extension)}}function I(e,t){if(1&e&&(s.Vb(0,"div",3),s.Pc(1,k,6,4,"div",4),s.Pc(2,P,2,1,"div",5),s.Ub()),2&e){var n=t.$implicit,i=s.gc(2);s.Db(1),s.nc("ngIf",n.url&&""!=n.url),s.Db(1),s.nc("ngIf",i.question.attachments&&i.question.attachments.length>0)}}function C(e,t){if(1&e&&(s.Vb(0,"div",1),s.Pc(1,I,3,2,"div",2),s.Ub()),2&e){var n=s.gc();s.oc("id","media_content_"+n.question.id),s.Db(1),s.nc("ngForOf",n.question.questionContent)}}var D,M=((D=function(){function e(t,i,a,s,o){n(this,e),this.activeRoute=t,this.router=i,this.commonService=a,this.localize=s,this.apiService=o,this.question={},this.examConfig={},this.index=0,this.examObj={},this.firstInGroupIndexes=[]}return a(e,[{key:"resizeImg",value:function(e,t,n){var i=document.getElementById("media_content_"+e),a=null==i?void 0:i.offsetWidth;return i?a/t<=1?Math.round(n*(a/t)):Math.round(n):0}},{key:"checkHiddenGroup",value:function(e,t){return e?!e.includes(t):!this.firstInGroupIndexes.includes(t)}},{key:"ngOnInit",value:function(){this.firstInGroupIndexes=this.commonService.parseJson(this.examObj.firstInGroupIndexes)}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||D)(s.Pb(r.a),s.Pb(r.i),s.Pb(l.a),s.Pb(u.e),s.Pb(d.a))},D.\u0275cmp=s.Jb({type:D,selectors:[["azt-question-pdf-item"]],inputs:{question:"question",examConfig:"examConfig",index:"index",examObj:"examObj"},decls:1,vars:1,consts:[["class","question-card mb-0 p-2",3,"id",4,"ngIf"],[1,"question-card","mb-0","p-2",3,"id"],["class","card-body pt-1 pb-1 pl-0 pr-0 MW-800",4,"ngFor","ngForOf"],[1,"card-body","pt-1","pb-1","pl-0","pr-0","MW-800"],[4,"ngIf"],["class","text-center ml-auto mr-auto",4,"ngIf"],["class","image_group mb-3",3,"hidden",4,"ngIf"],["class","embed-responsive embed-responsive-21by9",4,"ngIf"],["originalRender",""],[4,"ngIf","ngIfElse"],[1,"image_group","mb-3",3,"hidden"],["appImageFallback","","alt","",2,"max-width","100%",3,"src"],[1,"embed-responsive","embed-responsive-21by9"],[1,"embed-responsive-item",3,"src"],[3,"id","imgSrc",4,"ngIf"],[3,"id","imgSrc"],["alt","question media",3,"id","src"],[1,"text-center","ml-auto","mr-auto"],["class","audio_src","controls","","preload","true",3,"id",4,"ngIf"],["controls","","preload","true",1,"audio_src",3,"id"],[3,"src"]],template:function(e,t){1&e&&s.Pc(0,C,2,2,"div",0),2&e&&s.nc("ngIf",t.question.questionContent&&t.question.questionContent.length>0)},directives:[b.m,b.l,g.a,f.a],pipes:[p.n,p.r],styles:[".question-card[_ngcontent-%COMP%]{box-shadow:none}.audio_src[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;max-width:70%}"]}),D);function q(e,t){if(1&e&&(s.Vb(0,"div",10),s.Vb(1,"span",11),s.Rc(2),s.Ub(),s.Rc(3,"\xa0"),s.Qb(4,"div",6),s.Ub()),2&e){var n=t.$implicit;s.Db(2),s.Tc("",n.alpha?n.alpha:n.key,"."),s.Db(2),s.nc("innerHtml",n.content,s.Ec)}}function S(e,t){if(1&e&&(s.Vb(0,"audio",14),s.Qb(1,"source",15),s.hc(2,"safe"),s.hc(3,"mycdn"),s.Ub()),2&e){var n=s.gc(2);s.oc("id","audio_"+n.question.id),s.Db(1),s.nc("src",s.ic(2,2,s.ic(3,4,n.question.attachments[0].url)),s.Hc)}}function j(e,t){if(1&e&&(s.Vb(0,"div",12),s.Pc(1,S,4,6,"audio",13),s.Ub()),2&e){var n=s.gc();s.Db(1),s.nc("ngIf","mp3"==n.question.attachments[0].extension)}}var R,T=((R=function(){function e(t,i,a,s,o){n(this,e),this.activeRoute=t,this.router=i,this.commonService=a,this.localize=s,this.apiService=o,this.index=0,this.question={}}return a(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||R)(s.Pb(r.a),s.Pb(r.i),s.Pb(l.a),s.Pb(u.e),s.Pb(d.a))},R.\u0275cmp=s.Jb({type:R,selectors:[["azt-question-docx-item"]],inputs:{index:"index",question:"question"},decls:12,vars:6,consts:[[1,"question-card","question-docx","mb-0","p-2",3,"id"],[1,"content_dx_wrap"],[1,"docx-stt"],[1,"stt",2,"width","105px"],["matTooltip","\u0110i\u1ec3m t\u1ed1i \u0111a cho c\xe2u h\u1ecfi n\xe0y (theo thang \u0111i\u1ec3m)",1,"maxPoint"],[1,"contentDocx"],[3,"innerHtml"],[1,"row","mt-1","justify-content-around"],["class","col-sm-6 col-md-6 d-flex align-items-center",4,"ngFor","ngForOf"],["class","text-center ml-auto mr-auto",4,"ngIf"],[1,"col-sm-6","col-md-6","d-flex","align-items-center"],[2,"vertical-align","middle"],[1,"text-center","ml-auto","mr-auto"],["class","audio_src","controls","","preload","true",3,"id",4,"ngIf"],["controls","","preload","true",1,"audio_src",3,"id"],[3,"src"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Vb(2,"p",2),s.Vb(3,"span",3),s.Rc(4),s.Vb(5,"span",4),s.Rc(6),s.Ub(),s.Ub(),s.Ub(),s.Vb(7,"div",5),s.Qb(8,"div",6),s.Ub(),s.Vb(9,"div",7),s.Pc(10,q,5,2,"div",8),s.Ub(),s.Ub(),s.Pc(11,j,2,1,"div",9),s.Ub()),2&e&&(s.oc("id","media_content_"+t.question.id),s.Db(4),s.Tc("C\xe2u ",t.question.indexLabel+1," "),s.Db(2),s.Tc("(",t.question.essMaxPoint," \u0111i\u1ec3m)"),s.Db(2),s.nc("innerHtml",t.question.questionContent[0].content,s.Ec),s.Db(2),s.nc("ngForOf",t.question.answerConfig),s.Db(1),s.nc("ngIf",t.question.attachments&&t.question.attachments.length>0))},directives:[h.a,b.l,b.m],pipes:[p.r,p.n],styles:[".question-card[_ngcontent-%COMP%]{box-shadow:none}.content_dx_wrap[_ngcontent-%COMP%]{padding:5px 15px}.docx-stt[_ngcontent-%COMP%]{font-weight:450;font-size:16px}.audio_src[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;max-width:70%}"]}),R),U=i("NFeN");function L(e,t){1&e&&(s.Vb(0,"mat-icon",12),s.Rc(1,"close"),s.Ub())}function E(e,t){if(1&e&&s.Pc(0,L,2,0,"mat-icon",11),2&e){var n=s.gc().$implicit,i=s.gc(3);s.nc("ngIf",i.isChosen(n))}}function A(e,t){1&e&&(s.Vb(0,"mat-icon",13),s.Rc(1,"check_circle"),s.Ub())}function V(e,t){if(1&e&&(s.Vb(0,"div",8),s.Pc(1,E,1,1,"ng-template",2),s.Pc(2,A,2,0,"mat-icon",9),s.Vb(3,"span",10),s.Rc(4),s.Ub(),s.Ub()),2&e){var n=t.$implicit,i=s.gc(3);s.Db(1),s.nc("ngIf",!(i.isKey(n)&&i.isChosen(n))),s.Db(1),s.nc("ngIf",i.isKey(n)&&i.isChosen(n)),s.Db(2),s.Tc(" ",n.alpha?n.alpha:n.key?n.key:n," ")}}var B=function(e){return{color:e}},Q=function(e){return{"border-color":e}};function z(e,t){if(1&e&&(s.Vb(0,"div",4),s.Vb(1,"span",5),s.Rc(2),s.Ub(),s.Vb(3,"div",6),s.Pc(4,V,5,3,"div",7),s.Ub(),s.Ub()),2&e){var n=s.gc(2);s.Db(1),s.nc("ngStyle",s.sc(4,B,n.userAnswersObj["id_"+n.question.id]==n.question.answerResult[0]?"#00ac33":"red")),s.Db(1),s.Tc("\u0110\xe1p \xe1n \u0111\xfang: ",n.key,""),s.Db(1),s.nc("ngStyle",s.sc(6,Q,n.userAnswersObj["id_"+n.question.id]==n.question.answerResult[0]?"#00ac33":"red")),s.Db(1),s.nc("ngForOf",n.labelArr)}}function F(e,t){if(1&e&&(s.Vb(0,"span",5),s.Rc(1),s.Ub()),2&e){var n=s.gc(3);s.nc("ngStyle",s.sc(2,B,n.isFillAnswer?"#00ac33":"red")),s.Db(1),s.Tc("\u0110\xe1p \xe1n \u0111\xfang: [",n.keys.join("],["),"]")}}function N(e,t){if(1&e&&(s.Vb(0,"div",4),s.Pc(1,F,2,4,"span",14),s.Vb(2,"div",15),s.Vb(3,"div",16),s.Rc(4),s.Ub(),s.Ub(),s.Ub()),2&e){var n=s.gc(2);s.Db(1),s.nc("ngIf",n.keys),s.Db(1),s.nc("ngStyle",s.sc(3,Q,n.isFillAnswer?"#00ac33":"00ac33")),s.Db(2),s.Tc(" ",n.userAnswersObj["id_"+n.question.id]?n.userAnswersObj["id_"+n.question.id]:"Th\xed sinh kh\xf4ng nh\u1eadp th\xf4ng tin"," ")}}function W(e,t){if(1&e&&(s.Vb(0,"div"),s.Pc(1,z,5,8,"div",3),s.Pc(2,N,5,5,"div",3),s.Ub()),2&e){var n=s.gc();s.Db(1),s.nc("ngIf",1==n.question.answerType),s.Db(1),s.nc("ngIf",4==n.question.answerType)}}function J(e,t){if(1&e&&(s.Vb(0,"span",5),s.Rc(1),s.Ub()),2&e){var n=s.gc(3);s.nc("ngStyle",s.sc(2,B,n.userAnswersObj["id_"+n.question.id]==n.question.answerResult[0]?"#00ac33":"red")),s.Db(1),s.Tc("\u0110\xe1p \xe1n \u0111\xfang: ",n.key,"")}}function H(e,t){1&e&&s.Qb(0,"span",19)}function G(e,t){1&e&&(s.Vb(0,"mat-icon",12),s.Rc(1,"close"),s.Ub())}function $(e,t){if(1&e&&s.Pc(0,G,2,0,"mat-icon",11),2&e){var n=s.gc().$implicit,i=s.gc(3);s.nc("ngIf",i.isChosen(n)&&2!=i.examConfig.whenShowAnswer)}}function K(e,t){1&e&&(s.Vb(0,"mat-icon"),s.Rc(1,"check_circle"),s.Ub())}function X(e,t){if(1&e&&s.Pc(0,K,2,0,"mat-icon",0),2&e){var n=s.gc().$implicit,i=s.gc(3);s.nc("ngIf",i.isChosen(n)&&2==i.examConfig.whenShowAnswer)}}function Y(e,t){1&e&&(s.Vb(0,"mat-icon",13),s.Rc(1,"check_circle"),s.Ub())}function Z(e,t){if(1&e&&(s.Vb(0,"div",8),s.Pc(1,$,1,1,"ng-template",2),s.Pc(2,X,1,1,"ng-template",2),s.Pc(3,Y,2,0,"mat-icon",9),s.Vb(4,"span",10),s.Rc(5),s.Ub(),s.Ub()),2&e){var n=t.$implicit,i=s.gc(3);s.Db(1),s.nc("ngIf",!(i.isKey(n)&&i.isChosen(n))),s.Db(1),s.nc("ngIf",!(i.isKey(n)&&i.isChosen(n))),s.Db(1),s.nc("ngIf",i.isKey(n)&&i.isChosen(n)&&2!=i.examConfig.whenShowAnswer),s.Db(2),s.Tc(" ",n.alpha?n.alpha:n.key?n.key:n," ")}}function ee(e,t){if(1&e&&(s.Vb(0,"div",4),s.Pc(1,J,2,4,"span",14),s.Pc(2,H,1,0,"span",17),s.Vb(3,"div",18),s.Pc(4,Z,6,4,"div",7),s.Ub(),s.Ub()),2&e){var n=s.gc(2);s.Db(1),s.nc("ngIf",2!=n.examConfig.whenShowAnswer),s.Db(1),s.nc("ngIf",n.keys&&2==n.examConfig.whenShowAnswer),s.Db(2),s.nc("ngForOf",n.labelArr)}}function te(e,t){if(1&e&&(s.Vb(0,"span",5),s.Rc(1),s.Ub()),2&e){var n=s.gc(3);s.nc("ngStyle",s.sc(2,B,n.isFillAnswer?"#00ac33":"red")),s.Db(1),s.Tc("\u0110\xe1p \xe1n \u0111\xfang: [",n.keys.join("],["),"]")}}function ne(e,t){1&e&&s.Qb(0,"span",19)}function ie(e,t){if(1&e&&(s.Vb(0,"div",4),s.Pc(1,te,2,4,"span",14),s.Pc(2,ne,1,0,"span",17),s.Vb(3,"div",18),s.Vb(4,"div",16),s.Rc(5),s.Ub(),s.Ub(),s.Ub()),2&e){var n=s.gc(2);s.Db(1),s.nc("ngIf",n.keys&&2!=n.examConfig.whenShowAnswer),s.Db(1),s.nc("ngIf",n.keys&&2==n.examConfig.whenShowAnswer),s.Db(3),s.Tc(" ",n.userAnswersObj["id_"+n.question.id]?n.userAnswersObj["id_"+n.question.id]:"Th\xed sinh kh\xf4ng nh\u1eadp th\xf4ng tin"," ")}}function ae(e,t){if(1&e&&(s.Vb(0,"div"),s.Pc(1,ee,5,3,"div",3),s.Pc(2,ie,6,3,"div",3),s.Ub()),2&e){var n=s.gc();s.Db(1),s.nc("ngIf",1==n.question.answerType),s.Db(1),s.nc("ngIf",4==n.question.answerType)}}function se(e,t){1&e&&s.Qb(0,"div",20)}function oe(e,t){if(1&e&&(s.Qb(0,"div",23),s.hc(1,"formatLineBreak")),2&e){var n=s.gc(2);s.nc("innerHtml","multiple_choice"==n.place?"Xem th\xf4ng tin \u1edf tab t\u1ef1 lu\u1eadn":""!=n.userAnswersObj["id_"+n.question.id]&&n.userAnswersObj["id_"+n.question.id]?s.ic(1,1,n.userAnswersObj["id_"+n.question.id]):"Th\xed sinh kh\xf4ng nh\u1eadp th\xf4ng tin.",s.Ec)}}function ce(e,t){if(1&e&&(s.Qb(0,"div",24),s.hc(1,"formatLineBreak")),2&e){var n=s.gc(2);s.nc("innerHtml",""!=n.userAnswersObj["id_"+n.question.id]&&n.userAnswersObj["id_"+n.question.id]?s.ic(1,1,n.userAnswersObj["id_"+n.question.id]):"Th\xed sinh kh\xf4ng nh\u1eadp th\xf4ng tin.",s.Ec)}}function re(e,t){if(1&e&&(s.Pc(0,oe,2,3,"div",21),s.Pc(1,ce,2,3,"div",22)),2&e){var n=s.gc();s.nc("ngIf",3==n.question.answerType),s.Db(1),s.nc("ngIf",3==n.question.answerType)}}var le,ue=["*"],de=((le=function(){function e(t,i,a,o,c){n(this,e),this.activeRoute=t,this.router=i,this.commonService=a,this.localize=o,this.apiService=c,this.userAnswersObj={},this.question={},this.examConfig={},this.place="multiple_choice",this.statusResult=new s.o,this.key="",this.keys=[],this.labelArr=[],this.isFillAnswer=!1}return a(e,[{key:"showExplainQuestion",value:function(e){}},{key:"isKey",value:function(e){return!!this.question.answerResult&&(e.key?e.key==this.question.answerResult[0]:e==this.question.answerResult[0])}},{key:"isChosen",value:function(e){return!!this.userAnswersObj["id_"+this.question.id]&&(e.key?e.key.toString()==this.userAnswersObj["id_"+this.question.id]:e.toString()==this.userAnswersObj["id_"+this.question.id])}},{key:"findKey",value:function(){if(this.question.answerResult)for(var e=0;e<this.labelArr.length;e++)if(this.question.answerResult[0]==this.labelArr[e].key&&this.labelArr[e].alpha){this.key=this.labelArr[e].alpha;break}}},{key:"actionIsFillAnswer",value:function(e){return void 0!==e&&!!this.userAnswersObj["id_"+this.question.id]&&(this.userAnswersObj["id_"+this.question.id]=this.userAnswersObj["id_"+this.question.id].replace(/\n+/g,"\u21b5"),this.commonService.funcConvertFillAns(e.toString())===this.commonService.funcConvertFillAns(this.userAnswersObj["id_"+this.question.id]))}},{key:"ngOnInit",value:function(){if(this.isFillAnswer=!1,this.question.answerResult&&(this.key=this.question.answerResult[0]),1!=this.question.isImage||this.question.name.startsWith("[PDFv2]")||(this.labelArr=this.question.answerConfig.answer),(0==this.question.isImage||this.question.name.startsWith("[PDFv2]"))&&(this.labelArr=this.question.answerConfig,this.findKey()),1===this.question.answerType)for(var e=0;e<this.labelArr.length&&(this.isFillAnswer=this.isKey(this.labelArr[e])&&this.isChosen(this.labelArr[e]),!0!==this.isFillAnswer);e++);if(4===this.question.answerType&&this.question.answerResult&&this.question.answerResult.length>0){this.keys=this.question.answerResult;for(var t=0;t<this.keys.length;t++)if(this.actionIsFillAnswer(this.keys[t])){this.isFillAnswer=!0;break}}this.statusResult.emit(this.isFillAnswer)}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||le)(s.Pb(r.a),s.Pb(r.i),s.Pb(l.a),s.Pb(u.e),s.Pb(d.a))},le.\u0275cmp=s.Jb({type:le,selectors:[["azt-answer-box"]],inputs:{userAnswersObj:"userAnswersObj",question:"question",examConfig:"examConfig",place:"place"},outputs:{statusResult:"statusResult"},ngContentSelectors:ue,decls:5,vars:4,consts:[[4,"ngIf"],["class","answer-box answer-box-type2 ml-auto",4,"ngIf"],[3,"ngIf"],["class","answer-box-type1 row pl-0 pr-0 ml-0 mr-0",4,"ngIf"],[1,"answer-box-type1","row","pl-0","pr-0","ml-0","mr-0"],[1,"keyText","my-1",3,"ngStyle"],[1,"answer-box","ml-auto","my-1",3,"ngStyle"],["class","label-item",4,"ngFor","ngForOf"],[1,"label-item"],["style","color: #00ac33;",4,"ngIf"],[1,"lalala"],["style","color: red;",4,"ngIf"],[2,"color","red"],[2,"color","#00ac33"],["class","keyText my-1",3,"ngStyle",4,"ngIf"],[1,"answer-box","ml-auto","my-1",2,"padding","0",3,"ngStyle"],[1,"text-answer"],["class","keyText my-1 ml-2",4,"ngIf"],[1,"answer-box","ml-auto","my-1",2,"border-color","00ac33"],[1,"keyText","my-1","ml-2"],[1,"answer-box","answer-box-type2","ml-auto"],["class","answer-box answer-box-type3 ml-auto notForPdfExport",3,"innerHtml",4,"ngIf"],["class","answer-box answer-box-type3 ml-auto forPdfExport",3,"innerHtml",4,"ngIf"],[1,"answer-box","answer-box-type3","ml-auto","notForPdfExport",3,"innerHtml"],[1,"answer-box","answer-box-type3","ml-auto","forPdfExport",3,"innerHtml"]],template:function(e,t){1&e&&(s.mc(),s.lc(0),s.Pc(1,W,3,2,"div",0),s.Pc(2,ae,3,2,"div",0),s.Pc(3,se,1,0,"div",1),s.Pc(4,re,2,2,"ng-template",2)),2&e&&(s.Db(1),s.nc("ngIf",t.examConfig.isRoleTeacher),s.Db(1),s.nc("ngIf",!t.examConfig.isRoleTeacher),s.Db(1),s.nc("ngIf",2==t.question.answerType),s.Db(1),s.nc("ngIf",""!=t.userAnswersObj["id_"+t.question.id]||t.userAnswersObj["id_"+t.question.id]))},directives:[b.m,b.n,b.l,U.a],pipes:[p.k],styles:[".answer-box-type1[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-box-type1[_ngcontent-%COMP%]   .keyText[_ngcontent-%COMP%]{font-weight:500;font-size:18px;flex:auto;text-align:right;margin-right:15px}.answer-box[_ngcontent-%COMP%]{width:300px;display:flex;justify-content:space-between;background-color:#f7f7f7;padding:10px;border:1px solid #f1f1f1;border-radius:3px}.answer-box[_ngcontent-%COMP%]   .label-item[_ngcontent-%COMP%]{font-weight:500;display:flex;align-items:center;font-size:18px;width:40px;justify-content:flex-end}.answer-box.answer-box-type3[_ngcontent-%COMP%]{width:100%}.text-answer[_ngcontent-%COMP%]{width:100%;min-height:40px;max-height:120px;overflow:auto;padding:10px}textarea[_ngcontent-%COMP%]:focus{border:none!important}.forPdfExport[_ngcontent-%COMP%]{display:none}.ans-4[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}@media screen and (max-width:480px){.answer-box[_ngcontent-%COMP%]{width:auto}.text-answer[_ngcontent-%COMP%]{width:180px;max-height:auto}}"]}),le);function me(e,t){if(1&e&&(s.Vb(0,"div",3),s.Qb(1,"azt-loaded-img",4),s.hc(2,"mycdn"),s.Ub()),2&e){var n=s.gc();s.Db(1),s.nc("imgSrc",s.ic(2,1,n.question.answerMedia))}}function be(e,t){if(1&e&&s.Qb(0,"div",5),2&e){var n=s.gc();s.nc("innerHtml",n.question.answerMedia,s.Ec)}}var he,ge=((he=function(){function e(t,i,a,s,o){n(this,e),this.activeRoute=t,this.router=i,this.commonService=a,this.localize=s,this.apiService=o,this.question={}}return a(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnchanges",value:function(){}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||he)(s.Pb(r.a),s.Pb(r.i),s.Pb(l.a),s.Pb(u.e),s.Pb(d.a))},he.\u0275cmp=s.Jb({type:he,selectors:[["azt-explain-box"]],inputs:{question:"question"},decls:3,vars:3,consts:[[1,"alert","alert-info",3,"id"],["style"," width: 100%; overflow: auto; ",4,"ngIf"],["style"," width: 100%; overflow: auto; ",3,"innerHtml",4,"ngIf"],[2,"width","100%","overflow","auto"],[3,"imgSrc"],[2,"width","100%","overflow","auto",3,"innerHtml"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Pc(1,me,3,3,"div",1),s.Pc(2,be,1,1,"div",2),s.Ub()),2&e&&(s.oc("id","explain_"+t.question.id),s.Db(1),s.nc("ngIf",1==t.question.isImage),s.Db(1),s.nc("ngIf",0==t.question.isImage))},directives:[b.m,f.a],pipes:[p.n],styles:[""]}),he);function fe(e,t){if(1&e){var n=s.Wb();s.Vb(0,"div",7),s.cc("click",function(){return s.Dc(n),s.gc().handleSelectQuestion()}),s.Rc(1," H\u1ecfi gi\xe1o vi\xean "),s.Ub()}}function pe(e,t){if(1&e&&s.Qb(0,"azt-question-pdf-item",8),2&e){var n=s.gc();s.nc("examConfig",n.examConfig)("question",n.question)("examObj",n.examObj)("index",n.index)}}function ve(e,t){if(1&e&&s.Qb(0,"azt-question-docx-item",9),2&e){var n=s.gc();s.nc("question",n.question)("index",n.index)}}var xe=function(e){return{width:e}};function we(e,t){if(1&e){var n=s.Wb();s.Vb(0,"span",12),s.cc("click",function(){return s.Dc(n),s.gc(2).showExplain()}),s.Rc(1," Gi\u1ea3i th\xedch "),s.Vb(2,"mat-icon"),s.Rc(3),s.Ub(),s.Ub()}if(2&e){var i=s.gc(2);s.nc("ngStyle",s.sc(3,xe,""==i.question.answerMedia?"0px":"125px")),s.Eb("style",i.question.answerMedia||""!=i.question.answerMedia?"visibility:  visible !important":"visibility:  hidden !important",s.Gc),s.Db(3),s.Sc(i.isShowExplain?"expand_less":"expand_more")}}var ye=function(e){return{"justify-content":e}};function _e(e,t){if(1&e){var n=s.Wb();s.Vb(0,"azt-answer-box",10),s.cc("statusResult",function(e){return s.Dc(n),s.gc().returnStatusResult(e)}),s.Pc(1,we,4,5,"span",11),s.Ub()}if(2&e){var i=s.gc();s.nc("question",i.question)("userAnswersObj",i.userAnswersObj)("place",i.place)("examConfig",i.examConfig)("ngStyle",s.sc(6,ye,2==i.configExam.whenShowAnswer?"flex-end":"space-between")),s.Db(1),s.nc("ngIf",2!=i.configExam.whenShowAnswer)}}var ke=function(e,t){return{width:e,visibility:t}};function Oe(e,t){if(1&e){var n=s.Wb();s.Vb(0,"azt-answer-box",13),s.cc("statusResult",function(e){return s.Dc(n),s.gc().returnStatusResult(e)}),s.Vb(1,"span",12),s.cc("click",function(){return s.Dc(n),s.gc().showExplain()}),s.Rc(2," Gi\u1ea3i th\xedch "),s.Vb(3,"mat-icon"),s.Rc(4),s.Ub(),s.Ub(),s.Ub()}if(2&e){var i=s.gc();s.nc("question",i.question)("userAnswersObj",i.userAnswersObj)("place",i.place)("examConfig",i.examConfig),s.Db(1),s.nc("ngStyle",s.tc(6,ke,""==i.question.answerMedia?"0px":"125px",i.question.answerMedia||""!=i.question.answerMedia?"visible":"hidden")),s.Db(3),s.Sc(i.isShowExplain?"expand_less":"expand_more")}}function Pe(e,t){if(1&e&&s.Qb(0,"azt-explain-box",14),2&e){var n=s.gc();s.nc("question",n.question)}}var Ie,Ce=function(e,t){return{border:e,"margin-bottom":t}},De=((Ie=function(){function e(t,i,a,c,r,l){n(this,e),this.activeRoute=t,this.router=i,this.commonService=a,this.localize=c,this.apiService=r,this.store=l,this.question={},this.examObj={},this.userAnswersObj={},this.configExam={},this.index=0,this.isDisplayInExportMode=!1,this.place="multiple_choice",this.statusResult=new s.o,this.isShowExplain=!1,this.examConfig={},this.subscription=new o.a}return a(e,[{key:"showExplain",value:function(){this.isShowExplain=!this.isShowExplain}},{key:"checkResultAns",value:function(){}},{key:"returnStatusResult",value:function(e){this.statusResult.emit(e)}},{key:"handleSelectQuestion",value:function(){var e=document.getElementById("question_item_box_"+this.question.id),t=null==e?void 0:e.querySelector("img.questionId_"+this.question.id);this.store.dispatch(c.b({question:{data:{id:this.question.id},url:t?t.src:"",stt:this.index}})),this.store.dispatch(c.a({selectTest:{id:this.examObj.id,name:this.examObj.name},resultId:this.cur_result}));var n={};n.tenantId=this.activeRoute.snapshot.paramMap.get("tenant_id"),n.cate_id=this.activeRoute.snapshot.paramMap.get("cate_id"),n.hashId=this.activeRoute.snapshot.paramMap.get("hash_id"),n.resultId=this.activeRoute.snapshot.paramMap.get("result_id"),this.commonService.myNavigation("/student-qa/create-question/".concat(n.tenantId,"/").concat(n.cate_id,"/").concat(n.hashId,"/").concat(n.resultId))}},{key:"isChecked",value:function(e){return!!this.state.tbFront.selectedQuestion&&this.state.tbFront.selectedQuestion.data.id==e}},{key:"ngOnInit",value:function(){var e=this;this.examConfig=this.configExam,this.examConfig.isRoleTeacher=this.question.isRoleTeacher,this.isDisplayInExportMode&&(this.examConfig.isRoleTeacher=!0),this.subscription.add(this.store.subscribe(function(t){e.state=t}))}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||Ie)(s.Pb(r.a),s.Pb(r.i),s.Pb(l.a),s.Pb(u.e),s.Pb(d.a),s.Pb(m.h))},Ie.\u0275cmp=s.Jb({type:Ie,selectors:[["azt-question-item"]],inputs:{isBackEnd:"isBackEnd",question:"question",cur_result:"cur_result",examObj:"examObj",userAnswersObj:"userAnswersObj",configExam:"configExam",index:"index",isDisplayInExportMode:"isDisplayInExportMode",place:"place"},outputs:{statusResult:"statusResult"},decls:7,vars:11,consts:[[1,"question-item-box",3,"ngStyle","id"],["matTooltip","\u0110\u1eb7t c\xe2u h\u1ecfi cho gi\xe1o vi\xean v\u1ec1 c\xe2u h\u1ecfi n\xe0y","class","selectToAsk clickable",3,"click",4,"ngIf"],[3,"examConfig","question","examObj","index",4,"ngIf"],[3,"question","index",4,"ngIf"],["style","padding-right: 20px;  padding-left: 20px;",3,"question","userAnswersObj","place","examConfig","ngStyle","statusResult",4,"ngIf"],["style","padding-right: 20px; padding-left: 20px;",3,"question","userAnswersObj","place","examConfig","statusResult",4,"ngIf"],[3,"question",4,"ngIf"],["matTooltip","\u0110\u1eb7t c\xe2u h\u1ecfi cho gi\xe1o vi\xean v\u1ec1 c\xe2u h\u1ecfi n\xe0y",1,"selectToAsk","clickable",3,"click"],[3,"examConfig","question","examObj","index"],[3,"question","index"],[2,"padding-right","20px","padding-left","20px",3,"question","userAnswersObj","place","examConfig","ngStyle","statusResult"],["class","explainTxt clickable",3,"ngStyle","click",4,"ngIf"],[1,"explainTxt","clickable",3,"ngStyle","click"],[2,"padding-right","20px","padding-left","20px",3,"question","userAnswersObj","place","examConfig","statusResult"],[3,"question"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Pc(1,fe,2,0,"div",1),s.Pc(2,pe,1,4,"azt-question-pdf-item",2),s.Pc(3,ve,1,2,"azt-question-docx-item",3),s.Pc(4,_e,2,8,"azt-answer-box",4),s.Pc(5,Oe,5,9,"azt-answer-box",5),s.Pc(6,Pe,1,1,"azt-explain-box",6),s.Ub()),2&e&&(s.nc("ngStyle",s.tc(8,Ce,1!=t.question.isImage||t.isBackEnd?"none":"1px solid rgb(241 241 241)",1!=t.question.isImage||t.isBackEnd?0:"10px"))("id","question_item_box_"+t.question.id),s.Db(1),s.nc("ngIf",1==t.question.isImage&&!t.isBackEnd),s.Db(1),s.nc("ngIf",1==t.question.isImage),s.Db(1),s.nc("ngIf",0==t.question.isImage),s.Db(1),s.nc("ngIf",!t.question.isRoleTeacher),s.Db(1),s.nc("ngIf",t.question.isRoleTeacher),s.Db(1),s.nc("ngIf",t.isShowExplain))},directives:[b.n,b.m,h.a,M,T,de,U.a,ge],styles:["azt-answer-box[_ngcontent-%COMP%]{justify-content:space-between;margin-bottom:10px}.explainTxt[_ngcontent-%COMP%], azt-answer-box[_ngcontent-%COMP%]{display:flex;align-items:center}.explainTxt[_ngcontent-%COMP%]{width:125px;color:#42aba2;font-weight:500}.question-item-box[_ngcontent-%COMP%]{display:block;position:relative}.question-item-box[_ngcontent-%COMP%]   .selectToAsk[_ngcontent-%COMP%]{position:absolute;top:-1px;right:-1px;padding:5px;color:#fff;background-color:rgba(255,166,0,.747)}"]}),Ie)},s65G:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var s=i("mrSG"),o=i("quSY"),c=i("fXoL"),r=i("gbi4"),l=i("yTNM"),u=function(){var e=function(){function e(t,i){var a=this;n(this,e),this.commonService=t,this.apiService=i,this.labelsImg=new Image,this.questionLabelMap=[],this.abcdLabelPos={},this.subscription=new o.a,this.drawMixQuestion=function(e,t,n){return Object(s.a)(a,void 0,void 0,regeneratorRuntime.mark(function i(){var a,o=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:this.questionLabelMap=t[0].questionContent[0].questionLabelMap?t[0].questionContent[0].questionLabelMap:this.commonService.parseJson(n.questionLabelMap),this.abcdLabelPos=t[0].questionContent[0].abcdLabelPos?t[0].questionContent[0].abcdLabelPos:this.commonService.parseJson(n.abcdLabelPos),a={width:1,height:1,top:1,left:1},t.forEach(function(e){1==e.isImage&&(e.mixDataImg="https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/svgs/Img2_dat-01.svg",e.answerLabelsMockup={"label-A":a,"label-B":a,"label-C":a,"label-D":a,"label-E":a,"label-F":a})}),this.labelsImg.crossOrigin="anonymous",this.labelsImg.onload=function(){return Object(s.a)(o,void 0,void 0,regeneratorRuntime.mark(function e(){var n,i,a,o,c,r,l,u=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],i=[],a=0;a<t.length;a++)i.push({originalIndex:a,question:t[a]}),5!=i.length&&a!=t.length-1||(n.push(i),i=[]);o=function(e){return Object(s.a)(u,void 0,void 0,regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(i=0;i<e.length;i++)1==e[i].question.isImage&&(1==e[i].question.answerType?this.prepareImageToDrawForType1(e[i].question.answerConfig,e[i].question.questionContent[0],e[i].originalIndex,t):this.prepareImageForOtherTypes(e[i].question.questionContent[0],e[i].originalIndex,t));return n.abrupt("return",new Promise(function(e,t){setTimeout(e,3e3)}).then(function(){console.log("Start process next chunk!")}));case 2:case"end":return n.stop()}},n,this)}))},c=0,r=n;case 4:if(!(c<r.length)){e.next=11;break}return l=r[c],e.next=8,o(l);case 8:c++,e.next=4;break;case 11:case"end":return e.stop()}},e)}))},this.makeRetry(this.labelsImg,3,2e3),this.labelsImg.src=this.commonService.getMyCdn(e);case 3:case"end":return i.stop()}},i,this)}))}}return a(e,[{key:"cancelSubscription",value:function(){this.subscription.unsubscribe()}},{key:"makeRetry",value:function(e,t,n,i,a,s,o,c){var r=this;e.crossOrigin="anonymous",e.setAttribute("totalRetry","0"),e.onerror=function(){var l=parseInt(e.getAttribute("totalRetry"));if(++l<=t)setTimeout(function(){if(l>Math.floor(t/2))e.src=r.commonService.getRawCdnLink(e.src);else{var n=e.src.split("?")[0];e.src=n+"?t="+Date.now()}e.setAttribute("totalRetry",l.toString())},n);else{var u,d;try{u=(d=localStorage.getItem("user_obj"))?JSON.parse(d).id:"unknown"}catch(p){u="browser_not_local_storage"}var m=document.URL.split("?")[0].split("/"),b={userId:u,trackKey:"V2_ERR_DISPLAY",name:"Track l\u1ed7i kh\xf4ng hi\u1ec3n th\u1ecb c\xe2u h\u1ecfi v2",userAgent:navigator.userAgent,content:e.src,url:document.URL,error:m[m.length-1]};if(r.subscription.add(r.apiService.saveTrackLog(b).subscribe(function(e){console.log("Track l\u1ed7i th\xe0nh c\xf4ng!")})),(i||0===i)&&a&&s&&o){o[i].mixDataImg="https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/svgs/Img_dat-01.svg";var h=document.getElementById("questionPlaceholder_"+i);null==h||h.setAttribute("loadSuccess","0");var g=document.getElementById("media_content_all_"+o[i].id);null==g||g.setAttribute("loadSuccess","0");var f=function(e){"0"===(null==e?void 0:e.getAttribute("loadSuccess"))&&(c?r.prepareImageForOtherTypes(s,i,o):r.prepareImageToDrawForType1(a,s,i,o))};g?g.onclick=function(){f(g)}:h&&(h.onclick=function(){f(h)})}}}}},{key:"prepareImageToDrawForType1",value:function(e,t,n,i){var a=this,s=1+e.length,o=0,c=new Image;c.crossOrigin="anonymous",c.onload=function(){++o==s&&a.drawEachQuestion(e,t,n,c,r,i)},this.makeRetry(c,3,1e3,n,e,t,i),c.src=this.commonService.getMyCdn(t.metaData.question.url);for(var r=[],l=0;l<e.length;l++)r[l]=new Image,r[l].crossOrigin="anonymous",r[l].onload=function(){++o==s&&a.drawEachQuestion(e,t,n,c,r,i)},this.makeRetry(r[l],3,1e3,n,e,t,i),r[l].src=this.commonService.getMyCdn(e[l].content)}},{key:"prepareImageForOtherTypes",value:function(e,t,n){var i=this,a=document.createElement("canvas");a.width=e.metaData.question.width+10,a.height=e.metaData.question.height;var s=a.getContext("2d"),o=new Image;o.crossOrigin="anonymous",o.onload=function(){null==s||s.drawImage(o,10,0),null==s||s.drawImage(i.labelsImg,i.questionLabelMap[t].left,i.questionLabelMap[t].top,i.questionLabelMap[t].width,i.questionLabelMap[t].height,e.metaData.question.remove.x,e.metaData.question.remove.y,i.questionLabelMap[t].width,i.questionLabelMap[t].height),n[t].mixDataImg=a.toDataURL("image/png")},this.makeRetry(o,3,1e3,void 0,void 0,void 0,void 0,"others"),o.src=this.commonService.getMyCdn(e.metaData.question.url)}},{key:"drawEachQuestion",value:function(e,t,n,i,a,s){var o=document.createElement("canvas");o.width=t.metaData.question.width+15,o.height=t.metaData.question.height;var c=o.getContext("2d");null==c||c.drawImage(i,15,0),null==c||c.drawImage(this.labelsImg,this.questionLabelMap[n].left,this.questionLabelMap[n].top,this.questionLabelMap[n].width,this.questionLabelMap[n].height,t.metaData.question.remove.x,t.metaData.question.remove.y,this.questionLabelMap[n].width,this.questionLabelMap[n].height);var r,l,u=a[0],d=0,m=t.metaData.answers[0].x,b=t.metaData.answers[0].y;r=m,d=m+u.width,l=m+u.width;var h=a[0].height-t.metaData.answers[0].height;null==c||c.drawImage(u,m,b);var g=e[0].alpha?e[0].alpha:e[0].key,f=0;if(e[0].alpha)for(var p=e[0].key,v=0;v<e.length;v++)if(p==e[v].alpha){f=v;break}var x={left:void 0!==t.metaData.answers[f].remove.xAns?m+t.metaData.answers[f].remove.xAns:t.metaData.answers[0].remove.x,top:void 0!==t.metaData.answers[f].remove.yAns?b+t.metaData.answers[f].remove.yAns:t.metaData.answers[0].remove.y,width:t.metaData.answers[0].remove.width,height:t.metaData.answers[0].remove.height};null==c||c.drawImage(this.labelsImg,this.abcdLabelPos[g].left,this.abcdLabelPos[g].top,t.metaData.answers[0].remove.width,t.metaData.answers[0].remove.height,x.left,x.top,x.width,x.height),s[n].answerLabelsMockup["label-"+(e[0].alpha?e[0].alpha:e[0].key)]=x;for(var w=1;w<e.length;w++){var y=t.metaData.answers[w].x,_=t.metaData.answers[w].y;if(r+30<y){var k=[l,d];y<Math.max.apply(Math,k)&&((y=Math.max.apply(Math,k))+a[w].width>o.width&&(y-=y+a[w].width-o.width),t.metaData.answers[w].remove.x=y),d+=a[w].width}else if(d=r+a[w].width,_+=h,h+=a[w].height-t.metaData.answers[w].height,_+a[w].height>o.height){var O=_+a[w].height-o.height;_-=O,t.metaData.answers[w].remove.y-=O}null==c||c.drawImage(a[w],y,_);var P=w,I=e[w].alpha?e[w].alpha:e[w].key;if(e[w].alpha)for(var C=e[w].key,D=0;D<e.length;D++)if(C==e[D].alpha){P=D;break}var M={left:void 0!==t.metaData.answers[P].remove.xAns?y+t.metaData.answers[P].remove.xAns:t.metaData.answers[w].remove.x,top:void 0!==t.metaData.answers[P].remove.yAns?_+t.metaData.answers[P].remove.yAns:t.metaData.answers[w].remove.y,width:t.metaData.answers[w].remove.width,height:t.metaData.answers[w].remove.height};if(null==c||c.drawImage(this.labelsImg,this.abcdLabelPos[I].left,this.abcdLabelPos[I].top,t.metaData.answers[w].remove.width,t.metaData.answers[w].remove.height,M.left,M.top,M.width,M.height),s[n].answerLabelsMockup["label-"+(e[w].alpha?e[w].alpha:e[w].key)]=M,w==e.length-1){s[n].mixDataImg=o.toDataURL("image/png");var q=document.getElementById("media_content_all_"+s[n].id);null==q||q.setAttribute("loadSuccess","1");var S=document.getElementById("questionPlaceholder_"+n);null==S||S.setAttribute("loadSuccess","1")}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Zb(r.a),c.Zb(l.a))},e.\u0275prov=c.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();