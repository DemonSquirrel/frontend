(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Iab2:function(t,e,n){var i,o;void 0===(o="function"==typeof(i=function(){"use strict";function e(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){s(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,c=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(t,c,s){var a=o.URL||o.webkitURL,r=document.createElement("a");r.download=c=c||t.name||"download",r.rel="noopener","string"==typeof t?(r.href=t,r.origin===location.origin?i(r):n(r.href)?e(t,c,s):i(r,r.target="_blank")):(r.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(r.href)},4e4),setTimeout(function(){i(r)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,c){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,c),o);else if(n(t))e(t,o,c);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){i(s)})}}:function(t,n,i,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,i);var a="application/octet-stream"===t.type,r=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&r||c)&&"undefined"!=typeof FileReader){var b=new FileReader;b.onloadend=function(){var t=b.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},b.readAsDataURL(t)}else{var g=o.URL||o.webkitURL,d=g.createObjectURL(t);s?s.location=d:location.href=d,s=null,setTimeout(function(){g.revokeObjectURL(d)},4e4)}});o.saveAs=s.saveAs=s,t.exports=s})?i.apply(e,[]):i)||(t.exports=o)},X2wh:function(t,e,n){"use strict";n.d(e,"a",function(){return Jt});var i=n("fXoL"),o=n("tyNb"),c=n("gbi4"),s=n("Avyq"),a=n("yTNM"),r=n("ofXK"),l=n("UXJo"),b=n("NFeN"),g=n("wZkO"),d=n("IU+r"),u=n("Qu3c"),m=n("uZ1F"),f=n("loSA"),p=n("gaSO");function h(t,e){1&t&&(i.Vb(0,"p",6),i.Rc(1,"Ch\u01b0a c\xf3 h\u1ecdc sinh n\xe0o tham gia thi"),i.Ub())}function v(t,e){if(1&t){const t=i.Wb();i.Vb(0,"a",7),i.cc("click",function(){return i.Dc(t),i.gc(2).showCopySuccess()}),i.Vb(1,"mat-icon",8),i.Rc(2,"share"),i.Ub(),i.Vb(3,"span",8),i.Rc(4,"\xa0Copy link \u0111\u1ec1 thi"),i.Ub(),i.Ub()}if(2&t){const t=i.gc(2);i.nc("cdkCopyToClipboard",t.copyLinkToClipboard())}}function y(t,e){1&t&&(i.Vb(0,"p",6),i.Rc(1,"Ch\u01b0a c\xf3 h\u1ecdc sinh n\xe0o n\u1ed9p b\xe0i t\u1eadp"),i.Ub())}function k(t,e){if(1&t){const t=i.Wb();i.Vb(0,"a",7),i.cc("click",function(){return i.Dc(t),i.gc(2).showCopySuccess()}),i.Vb(1,"mat-icon",8),i.Rc(2,"share"),i.Ub(),i.Vb(3,"span",8),i.Rc(4,"\xa0Copy link b\xe0i t\u1eadp"),i.Ub(),i.Ub()}if(2&t){const t=i.gc(2);i.nc("cdkCopyToClipboard",t.copyLinkHomeWorkToClipboard())}}function w(t,e){if(1&t&&(i.Vb(0,"div"),i.Vb(1,"div",3),i.Pc(2,h,2,0,"p",4),i.Pc(3,v,5,1,"a",5),i.Pc(4,y,2,0,"p",4),i.Pc(5,k,5,1,"a",5),i.Ub(),i.Ub()),2&t){const t=i.gc();i.Db(2),i.nc("ngIf",!t.isHomeworkFlow),i.Db(1),i.nc("ngIf",!t.isHomeworkFlow),i.Db(1),i.nc("ngIf",t.isHomeworkFlow),i.Db(1),i.nc("ngIf",t.isHomeworkFlow)}}function C(t,e){if(1&t&&(i.Vb(0,"span",21),i.Qb(1,"azt-create-avatar",22),i.Ub()),2&t){const t=i.gc().$implicit;i.Db(1),i.oc("matTooltip",t.classObj.teacherAvatar.fullName),i.nc("nameCreateAvatar",t.classObj.teacherAvatar.fullName)("size",25)("linkAvatar",t.classObj.teacherAvatar.avatar)}}function P(t,e){if(1&t){const t=i.Wb();i.Vb(0,"div",37),i.cc("click",function(){i.Dc(t);const e=i.gc().$implicit;return i.gc(5).openResultHistoryReview(e)}),i.Vb(1,"mat-icon",38),i.Rc(2,"history"),i.Ub(),i.Ub()}}function T(t,e){1&t&&(i.Vb(0,"span",39),i.Rc(1," (\u0110ang Thi)"),i.Ub())}function I(t,e){1&t&&(i.Vb(0,"p",46),i.Rc(1," Ch\u01b0a ch\u1ea5m "),i.Ub())}function R(t,e){1&t&&(i.Vb(0,"p",47),i.Rc(1," \u0110ang thi "),i.Ub())}function U(t,e){1&t&&i.Qb(0,"span",50)}function V(t,e){if(1&t&&(i.Vb(0,"p",48),i.Rc(1," Ch\u01b0a thi "),i.Pc(2,U,1,0,"span",49),i.Ub()),2&t){const t=i.gc(7);i.Db(2),i.nc("ngIf",t.hasEssayQuestion)}}function D(t,e){if(1&t&&(i.Vb(0,"p",51),i.Rc(1," \u0110i\u1ec3m: "),i.Vb(2,"b"),i.Rc(3),i.Ub(),i.Ub()),2&t){const t=i.gc(2).$implicit;i.Db(3),i.Sc(t.mark)}}function x(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(2).$implicit,e=i.gc(5);i.Db(1),i.Tc(" ",e.calculationTime(t.createdAt)," tr\u01b0\u1edbc ")}}function S(t,e){if(1&t&&(i.Vb(0,"div",40),i.Pc(1,I,2,0,"p",41),i.Pc(2,R,2,0,"p",42),i.Pc(3,V,3,1,"p",43),i.Pc(4,D,4,1,"p",44),i.Pc(5,x,2,1,"p",45),i.Ub()),2&t){const t=i.gc().$implicit;i.Db(1),i.nc("ngIf",t.isNotMarked),i.Db(1),i.nc("ngIf",t.isOnTest),i.Db(1),i.nc("ngIf",t.isNotTested),i.Db(1),i.nc("ngIf",t.isMarked),i.Db(1),i.nc("ngIf",t.isMarked||t.isNotMarked)}}function M(t,e){1&t&&(i.Vb(0,"p",52),i.Rc(1," Th\u1eddi gian l\xe0m b\xe0i: "),i.Ub())}function O(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(2).$implicit,e=i.gc(5);i.Db(1),i.Tc(" ",e.calculationTestedTime(t.startedTest,t.createdAt)," ")}}function L(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(2).$implicit,e=i.gc(5);i.Db(1),i.Tc(" ",e.calculationTestedTime(t.startedTest)," ")}}function N(t,e){if(1&t&&(i.Vb(0,"div",53),i.Pc(1,M,2,0,"p",45),i.Pc(2,O,2,1,"p",45),i.Pc(3,L,2,1,"p",45),i.Ub()),2&t){const t=i.gc().$implicit;i.Db(1),i.nc("ngIf",!t.isNotTested),i.Db(1),i.nc("ngIf",t.isMarked||t.isNotMarked),i.Db(1),i.nc("ngIf",t.isOnTest)}}function A(t,e){1&t&&(i.Vb(0,"p",52),i.Rc(1," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),i.Ub())}function B(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(2).$implicit;i.Db(1),i.Tc(" ",t.files&&t.files.length>0?t.files.length:0," ")}}function E(t,e){if(1&t&&(i.Vb(0,"div",53),i.Pc(1,A,2,0,"p",45),i.Pc(2,B,2,1,"p",45),i.Ub()),2&t){const t=i.gc().$implicit;i.Db(1),i.nc("ngIf",t.isMarked||t.isNotMarked),i.Db(1),i.nc("ngIf",t.isMarked||t.isNotMarked)}}const j=function(t){return{"col-lg-4":t}},H=function(t){return{disableClick:t}},_=function(t){return[t]},F=function(t){return{backto:t}};function $(t,e){if(1&t&&(i.Vb(0,"div",23),i.Vb(1,"div",24),i.Vb(2,"div",25),i.Vb(3,"span",26),i.Qb(4,"azt-create-avatar",27),i.Pc(5,P,3,0,"div",28),i.Ub(),i.Vb(6,"div",29),i.Vb(7,"a",30),i.hc(8,"mylocalize"),i.Vb(9,"div",31),i.Vb(10,"span",32),i.Vb(11,"span",33),i.Rc(12),i.Pc(13,T,2,0,"span",34),i.Ub(),i.Ub(),i.Ub(),i.Pc(14,S,6,5,"div",35),i.Pc(15,N,4,3,"div",36),i.Pc(16,E,3,2,"div",36),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Ub()),2&t){const t=e.$implicit,n=i.gc(5);i.nc("ngClass",i.sc(15,j,n.isOpenSideNav)),i.Db(1),i.nc("ngClass",i.sc(17,H,t.isNotSubmit||t.mustReSubmit)),i.Db(3),i.nc("linkAvatar",t.avatar)("nameCreateAvatar",t.fullName)("size",30),i.Db(1),i.nc("ngIf",n.checkShowIconHistory(t)),i.Db(2),i.nc("routerLink",i.sc(19,_,i.ic(8,13,"/admin/testbank/test-review/"+n.obj.id+"/"+t.userId+"/"+t.studentId+"/0")))("queryParams",i.sc(21,F,n.backToLink)),i.Db(5),i.Tc("",t.fullName," "),i.Db(1),i.nc("ngIf",1==t.status&&(t.isMarked||t.isNotMarked)),i.Db(1),i.nc("ngIf",!n.isHomeworkFlow),i.Db(1),i.nc("ngIf",!n.isHomeworkFlow),i.Db(1),i.nc("ngIf",!n.isHomeworkFlow&&n.hasEssayQuestion)}}function z(t,e){if(1&t){const t=i.Wb();i.Vb(0,"div",15),i.Vb(1,"div",16),i.Vb(2,"p",17),i.cc("click",function(){i.Dc(t);const n=e.$implicit;return i.gc(4).goToStudentList(n.classObj.id)}),i.Vb(3,"span"),i.Rc(4),i.Ub(),i.Pc(5,C,2,4,"span",18),i.Ub(),i.Ub(),i.Vb(6,"div",19),i.Pc(7,$,17,23,"div",20),i.Ub(),i.Ub()}if(2&t){const t=e.$implicit;i.Db(4),i.Sc(t.classObj.name+"("+t.countSubmitted+"/"+t.classObj.countStudents+")"),i.Db(1),i.nc("ngIf",t.classObj.teacherAvatar),i.Db(2),i.nc("ngForOf",t.results)}}function q(t,e){if(1&t&&(i.Vb(0,"mat-tab",13),i.Pc(1,z,8,3,"div",14),i.Ub()),2&t){const t=i.gc(3);i.oc("label","Theo l\u1edbp ("+t.totalSubmitByClass+")"),i.Db(1),i.nc("ngForOf",t.studentListsInClass)}}function Q(t,e){if(1&t){const t=i.Wb();i.Vb(0,"div",37),i.cc("click",function(){i.Dc(t);const e=i.gc(2).$implicit;return i.gc(4).openResultHistoryReview(e)}),i.Vb(1,"mat-icon",38),i.Rc(2,"history"),i.Ub(),i.Ub()}}function W(t,e){1&t&&(i.Vb(0,"span",39),i.Rc(1," (\u0110ang Thi)"),i.Ub())}function J(t,e){1&t&&(i.Vb(0,"p",46),i.Rc(1," Ch\u01b0a ch\u1ea5m "),i.Ub())}function G(t,e){1&t&&(i.Vb(0,"p",63),i.Rc(1," \u0110ang thi "),i.Ub())}function K(t,e){1&t&&i.Qb(0,"span",50)}function X(t,e){if(1&t&&(i.Vb(0,"p",48),i.Rc(1," Ch\u01b0a thi "),i.Pc(2,K,1,0,"span",49),i.Ub()),2&t){const t=i.gc(7);i.Db(2),i.nc("ngIf",t.hasEssayQuestion)}}function Y(t,e){if(1&t&&(i.Vb(0,"p",51),i.Rc(1," \u0110i\u1ec3m: "),i.Vb(2,"b"),i.Rc(3),i.Ub(),i.Ub()),2&t){const t=i.gc(3).$implicit;i.Db(3),i.Sc(t.mark)}}function Z(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(3).$implicit,e=i.gc(4);i.Db(1),i.Tc(" ",e.calculationTime(t.createdAt)," tr\u01b0\u1edbc ")}}function tt(t,e){if(1&t&&(i.Vb(0,"div",53),i.Pc(1,J,2,0,"p",41),i.Pc(2,G,2,0,"p",62),i.Pc(3,X,3,1,"p",43),i.Pc(4,Y,4,1,"p",44),i.Pc(5,Z,2,1,"p",45),i.Ub()),2&t){const t=i.gc(2).$implicit;i.Db(1),i.nc("ngIf",t.isNotMarked),i.Db(1),i.nc("ngIf",t.isOnTest),i.Db(1),i.nc("ngIf",t.isNotTested),i.Db(1),i.nc("ngIf",t.isMarked),i.Db(1),i.nc("ngIf",t.isMarked||t.isNotMarked)}}function et(t,e){1&t&&(i.Vb(0,"p",52),i.Rc(1," Th\u1eddi gian l\xe0m b\xe0i: "),i.Ub())}function nt(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(3).$implicit,e=i.gc(4);i.Db(1),i.Tc(" ",e.calculationTestedTime(t.startedTest,t.createdAt)," ")}}function it(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(3).$implicit,e=i.gc(4);i.Db(1),i.Tc(" ",e.calculationTestedTime(t.startedTest)," ")}}function ot(t,e){if(1&t&&(i.Vb(0,"div",53),i.Pc(1,et,2,0,"p",45),i.Pc(2,nt,2,1,"p",45),i.Pc(3,it,2,1,"p",45),i.Ub()),2&t){const t=i.gc(2).$implicit;i.Db(1),i.nc("ngIf",!t.isNotTested),i.Db(1),i.nc("ngIf",t.isMarked||t.isNotMarked),i.Db(1),i.nc("ngIf",t.isOnTest)}}function ct(t,e){1&t&&(i.Vb(0,"p",52),i.Rc(1," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),i.Ub())}function st(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(3).$implicit;i.Db(1),i.Tc(" ",t.files&&t.files.length>0?t.files.length:0," ")}}function at(t,e){if(1&t&&(i.Vb(0,"div",53),i.Pc(1,ct,2,0,"p",45),i.Pc(2,st,2,1,"p",45),i.Ub()),2&t){const t=i.gc(2).$implicit;i.Db(1),i.nc("ngIf",t.isMarked||t.isNotMarked),i.Db(1),i.nc("ngIf",t.isMarked||t.isNotMarked)}}function rt(t,e){if(1&t){const t=i.Wb();i.Vb(0,"div"),i.Vb(1,"div",60),i.Vb(2,"div",25),i.Vb(3,"span",26),i.Qb(4,"azt-create-avatar",27),i.Pc(5,Q,3,0,"div",28),i.Ub(),i.Vb(6,"div",61),i.cc("click",function(){i.Dc(t);const e=i.gc().$implicit;return i.gc(4).goToResultReview(e)}),i.Vb(7,"div",31),i.Vb(8,"span",32),i.Vb(9,"span",33),i.Rc(10),i.Pc(11,W,2,0,"span",34),i.Ub(),i.Ub(),i.Ub(),i.Pc(12,tt,6,5,"div",36),i.Pc(13,ot,4,3,"div",36),i.Pc(14,at,3,2,"div",36),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&t){const t=i.gc().$implicit,e=i.gc(4);i.Db(1),i.nc("ngClass",i.sc(10,H,t.isNotSubmit||t.mustReSubmit)),i.Db(3),i.nc("linkAvatar",t.avatar)("nameCreateAvatar",t.fullName)("size",30),i.Db(1),i.nc("ngIf",e.checkShowIconHistory(t)),i.Db(5),i.Tc("",t.fullName," "),i.Db(1),i.nc("ngIf",1==t.status&&(t.isMarked||t.isNotMarked)),i.Db(1),i.nc("ngIf",!e.isHomeworkFlow),i.Db(1),i.nc("ngIf",!e.isHomeworkFlow),i.Db(1),i.nc("ngIf",!e.isHomeworkFlow&&e.hasEssayQuestion)}}function lt(t,e){if(1&t){const t=i.Wb();i.Vb(0,"div",37),i.cc("click",function(){i.Dc(t);const e=i.gc(2).$implicit;return i.gc(4).openResultHistoryReview(e)}),i.Vb(1,"mat-icon",38),i.Rc(2,"history"),i.Ub(),i.Ub()}}function bt(t,e){1&t&&(i.Vb(0,"span",39),i.Rc(1," (\u0110ang Thi)"),i.Ub())}function gt(t,e){1&t&&(i.Vb(0,"p",46),i.Rc(1," Ch\u01b0a ch\u1ea5m "),i.Ub())}function dt(t,e){1&t&&(i.Vb(0,"p",63),i.Rc(1," \u0110ang thi "),i.Ub())}function ut(t,e){1&t&&i.Qb(0,"span",50)}function mt(t,e){if(1&t&&(i.Vb(0,"p",48),i.Rc(1," Ch\u01b0a thi "),i.Pc(2,ut,1,0,"span",49),i.Ub()),2&t){const t=i.gc(7);i.Db(2),i.nc("ngIf",t.hasEssayQuestion)}}function ft(t,e){if(1&t&&(i.Vb(0,"p",51),i.Rc(1," \u0110i\u1ec3m: "),i.Vb(2,"b"),i.Rc(3),i.Ub(),i.Ub()),2&t){const t=i.gc(3).$implicit;i.Db(3),i.Sc(t.mark)}}function pt(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(3).$implicit,e=i.gc(4);i.Db(1),i.Tc(" ",e.calculationTime(t.createdAt)," tr\u01b0\u1edbc ")}}function ht(t,e){if(1&t&&(i.Vb(0,"div",53),i.Pc(1,gt,2,0,"p",41),i.Pc(2,dt,2,0,"p",62),i.Pc(3,mt,3,1,"p",43),i.Pc(4,ft,4,1,"p",44),i.Pc(5,pt,2,1,"p",45),i.Ub()),2&t){const t=i.gc(2).$implicit;i.Db(1),i.nc("ngIf",t.isNotMarked),i.Db(1),i.nc("ngIf",t.isOnTest),i.Db(1),i.nc("ngIf",t.isNotTested),i.Db(1),i.nc("ngIf",t.isMarked),i.Db(1),i.nc("ngIf",t.isMarked||t.isNotMarked)}}function vt(t,e){1&t&&(i.Vb(0,"p",52),i.Rc(1," Th\u1eddi gian l\xe0m b\xe0i: "),i.Ub())}function yt(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(3).$implicit,e=i.gc(4);i.Db(1),i.Tc(" ",e.calculationTestedTime(t.startedTest,t.createdAt)," ")}}function kt(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(3).$implicit,e=i.gc(4);i.Db(1),i.Tc(" ",e.calculationTestedTime(t.startedTest)," ")}}function wt(t,e){if(1&t&&(i.Vb(0,"div",53),i.Pc(1,vt,2,0,"p",45),i.Pc(2,yt,2,1,"p",45),i.Pc(3,kt,2,1,"p",45),i.Ub()),2&t){const t=i.gc(2).$implicit;i.Db(1),i.nc("ngIf",!t.isNotTested),i.Db(1),i.nc("ngIf",t.isMarked||t.isNotMarked),i.Db(1),i.nc("ngIf",t.isOnTest)}}function Ct(t,e){1&t&&(i.Vb(0,"p",52),i.Rc(1," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),i.Ub())}function Pt(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(3).$implicit;i.Db(1),i.Tc(" ",t.files&&t.files.length>0?t.files.length:0," ")}}function Tt(t,e){if(1&t&&(i.Vb(0,"div",53),i.Pc(1,Ct,2,0,"p",45),i.Pc(2,Pt,2,1,"p",45),i.Ub()),2&t){const t=i.gc(2).$implicit;i.Db(1),i.nc("ngIf",t.isMarked||t.isNotMarked),i.Db(1),i.nc("ngIf",t.isMarked||t.isNotMarked)}}function It(t,e){if(1&t){const t=i.Wb();i.Vb(0,"div",60),i.Vb(1,"div",25),i.Vb(2,"span",26),i.Qb(3,"azt-create-avatar",27),i.Pc(4,lt,3,0,"div",28),i.Ub(),i.Vb(5,"div",61),i.cc("click",function(){i.Dc(t);const e=i.gc().$implicit;return i.gc(4).goToResultReview(e)}),i.Vb(6,"a",64),i.hc(7,"mylocalize"),i.Vb(8,"div",31),i.Vb(9,"span",32),i.Vb(10,"span",33),i.Rc(11),i.Pc(12,bt,2,0,"span",34),i.Ub(),i.Ub(),i.Ub(),i.Pc(13,ht,6,5,"div",36),i.Pc(14,wt,4,3,"div",36),i.Pc(15,Tt,3,2,"div",36),i.Ub(),i.Ub(),i.Ub(),i.Ub()}if(2&t){const t=i.gc().$implicit,e=i.gc(4);i.nc("ngClass",i.sc(14,H,t.isNotSubmit||t.mustReSubmit)),i.Db(3),i.nc("linkAvatar",t.avatar)("nameCreateAvatar",t.fullName)("size",30),i.Db(1),i.nc("ngIf",e.checkShowIconHistory(t)),i.Db(2),i.nc("routerLink",i.sc(16,_,i.ic(7,12,"/admin/testbank/test-review/"+e.obj.id+"/"+t.userId+"/"+t.studentId+"/0")))("queryParams",i.sc(18,F,e.backToLink)),i.Db(5),i.Tc("",t.fullName," "),i.Db(1),i.nc("ngIf",1==t.status&&(t.isMarked||t.isNotMarked)),i.Db(1),i.nc("ngIf",!e.isHomeworkFlow),i.Db(1),i.nc("ngIf",!e.isHomeworkFlow),i.Db(1),i.nc("ngIf",!e.isHomeworkFlow&&e.hasEssayQuestion)}}function Rt(t,e){if(1&t&&(i.Vb(0,"div",58),i.Pc(1,rt,15,12,"div",10),i.Pc(2,It,16,20,"ng-template",null,59,i.Qc),i.Ub()),2&t){const t=e.$implicit,n=i.zc(3),o=i.gc(4);i.nc("ngClass",i.sc(3,j,o.isOpenSideNav)),i.Db(1),i.nc("ngIf",t.isNotSubmit||t.mustReSubmit)("ngIfElse",n)}}function Ut(t,e){if(1&t){const t=i.Wb();i.Vb(0,"div",65),i.Vb(1,"azt-paging",66),i.cc("SendPage",function(e){return i.Dc(t),i.gc(4).clickPage(e)}),i.Ub(),i.Ub()}if(2&t){const t=i.gc(4);i.Db(1),i.nc("lengthPage",t.totalPage)("paging",t.curPage)}}function Vt(t,e){if(1&t&&(i.Vb(0,"mat-tab",13),i.Vb(1,"div",54),i.Pc(2,Rt,4,5,"div",55),i.Vb(3,"div",56),i.Pc(4,Ut,2,2,"div",57),i.Ub(),i.Ub(),i.Ub()),2&t){const t=i.gc(3);i.oc("label","T\u1ef1 do ("+t.studentLists.length+")"),i.Db(2),i.nc("ngForOf",t.studentListPage),i.Db(2),i.nc("ngIf",t.totalPage>1)}}function Dt(t,e){if(1&t&&(i.Vb(0,"mat-tab-group"),i.Pc(1,q,2,2,"mat-tab",12),i.Pc(2,Vt,5,3,"mat-tab",12),i.Ub()),2&t){const t=i.gc(2);i.Db(1),i.nc("ngIf",t.examHasClass),i.Db(1),i.nc("ngIf",t.studentLists&&t.studentLists.length>0)}}function xt(t,e){1&t&&(i.Vb(0,"p",46),i.Rc(1," Ch\u01b0a ch\u1ea5m "),i.Ub())}function St(t,e){1&t&&(i.Vb(0,"p",47),i.Rc(1," Ch\u01b0a n\u1ed9p "),i.Ub())}function Mt(t,e){1&t&&(i.Vb(0,"p",47),i.Rc(1," \u0110\xe3 y\xeau c\u1ea7u n\u1ed9p l\u1ea1i "),i.Ub())}function Ot(t,e){if(1&t&&(i.Vb(0,"p",51),i.Rc(1," \u0110i\u1ec3m: "),i.Vb(2,"b"),i.Qb(3,"azt-check-mark",69),i.Ub(),i.Ub()),2&t){const t=i.gc(2).$implicit;i.Db(3),i.nc("mark",t.point)}}function Lt(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(2).$implicit,e=i.gc(3);i.Db(1),i.Tc(" ",e.calculationTime(t.createdAt)," tr\u01b0\u1edbc ")}}function Nt(t,e){if(1&t&&(i.Vb(0,"div",53),i.Vb(1,"p",52),i.Rc(2," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),i.Ub(),i.Vb(3,"p",52),i.Rc(4),i.Ub(),i.Ub()),2&t){const t=i.gc(2).$implicit,e=i.gc(3);i.Db(4),i.Tc(" ",t.answer.files&&e.formatArray(t.answer.files).length>0?e.formatArray(t.answer.files).length:0," ")}}function At(t,e){if(1&t&&(i.Vb(0,"div"),i.Vb(1,"a",64),i.hc(2,"mylocalize"),i.Vb(3,"div",60),i.Vb(4,"div",25),i.Vb(5,"span",26),i.Qb(6,"azt-create-avatar",27),i.Ub(),i.Vb(7,"div",29),i.Vb(8,"div",31),i.Vb(9,"span",32),i.Vb(10,"span",33),i.Rc(11),i.Ub(),i.Ub(),i.Ub(),i.Vb(12,"div",53),i.Pc(13,xt,2,0,"p",41),i.Pc(14,St,2,0,"p",42),i.Pc(15,Mt,2,0,"p",42),i.Pc(16,Ot,4,1,"p",44),i.Pc(17,Lt,2,1,"p",45),i.Ub(),i.Pc(18,Nt,5,1,"div",36),i.Ub(),i.Ub(),i.Ub(),i.Ub(),i.Ub()),2&t){const t=i.gc().$implicit,e=i.gc(3);i.Db(1),i.nc("routerLink",i.sc(15,_,i.ic(2,13,"/admin/homework/mark-exercise/"+t.answer.id)))("queryParams",i.sc(17,F,e.backToLink)),i.Db(2),i.nc("ngClass",i.sc(19,H,t.isNotSubmit||t.mustReSubmit)),i.Db(3),i.nc("linkAvatar",t.avatar)("nameCreateAvatar",t.fullName)("size",30),i.Db(5),i.Sc(t.fullName),i.Db(2),i.nc("ngIf",t.isSubmitted),i.Db(1),i.nc("ngIf",t.isNotSubmit),i.Db(1),i.nc("ngIf",t.mustReSubmit),i.Db(1),i.nc("ngIf",t.isMarked),i.Db(1),i.nc("ngIf",null!=t.createdAt),i.Db(1),i.nc("ngIf",t.isMarked||t.isSubmitted)}}function Bt(t,e){1&t&&(i.Vb(0,"p",46),i.Rc(1," Ch\u01b0a ch\u1ea5m "),i.Ub())}function Et(t,e){1&t&&(i.Vb(0,"p",47),i.Rc(1," Ch\u01b0a n\u1ed9p "),i.Ub())}function jt(t,e){1&t&&(i.Vb(0,"p",47),i.Rc(1," \u0110\xe3 y\xeau c\u1ea7u n\u1ed9p l\u1ea1i "),i.Ub())}function Ht(t,e){if(1&t&&(i.Vb(0,"p",51),i.Rc(1," \u0110i\u1ec3m: "),i.Vb(2,"b"),i.Rc(3),i.Ub(),i.Ub()),2&t){const t=i.gc(2).$implicit;i.Db(3),i.Sc(t.point)}}function _t(t,e){if(1&t&&(i.Vb(0,"p",52),i.Rc(1),i.Ub()),2&t){const t=i.gc(2).$implicit,e=i.gc(3);i.Db(1),i.Tc(" ",e.calculationTime(t.createdAt)," tr\u01b0\u1edbc ")}}function Ft(t,e){if(1&t&&(i.Vb(0,"div",53),i.Vb(1,"p",52),i.Rc(2," S\u1ed1 t\u1ec7p tin \u0111\xe3 n\u1ed9p: "),i.Ub(),i.Vb(3,"p",52),i.Rc(4),i.Ub(),i.Ub()),2&t){const t=i.gc(2).$implicit,e=i.gc(3);i.Db(4),i.Tc(" ",t.answer.files&&e.formatArray(t.answer.files).length>0?e.formatArray(t.answer.files).length:0," ")}}function $t(t,e){if(1&t){const t=i.Wb();i.Vb(0,"div",60),i.Vb(1,"div",25),i.Vb(2,"span",26),i.Qb(3,"azt-create-avatar",27),i.Ub(),i.Vb(4,"div",61),i.cc("click",function(){i.Dc(t);const e=i.gc().$implicit;return i.gc(3).goToResultReview(e)}),i.Vb(5,"div",31),i.Vb(6,"span",32),i.Vb(7,"span",33),i.Rc(8),i.Ub(),i.Ub(),i.Ub(),i.Vb(9,"div",53),i.Pc(10,Bt,2,0,"p",41),i.Pc(11,Et,2,0,"p",42),i.Pc(12,jt,2,0,"p",42),i.Pc(13,Ht,4,1,"p",44),i.Pc(14,_t,2,1,"p",45),i.Ub(),i.Pc(15,Ft,5,1,"div",36),i.Ub(),i.Ub(),i.Ub()}if(2&t){const t=i.gc().$implicit;i.nc("ngClass",i.sc(11,H,t.isNotSubmit||t.mustReSubmit)),i.Db(3),i.nc("linkAvatar",t.avatar)("nameCreateAvatar",t.fullName)("size",30),i.Db(5),i.Sc(t.fullName),i.Db(2),i.nc("ngIf",t.isSubmitted),i.Db(1),i.nc("ngIf",t.isNotSubmit),i.Db(1),i.nc("ngIf",t.mustReSubmit),i.Db(1),i.nc("ngIf",t.isMarked),i.Db(1),i.nc("ngIf",null!=t.createdAt),i.Db(1),i.nc("ngIf",t.isMarked||t.isSubmitted)}}function zt(t,e){if(1&t&&(i.Vb(0,"div",58),i.Pc(1,At,19,21,"div",10),i.Pc(2,$t,16,13,"ng-template",null,68,i.Qc),i.Ub()),2&t){const t=e.$implicit,n=i.zc(3),o=i.gc(3);i.nc("ngClass",i.sc(3,j,o.isOpenSideNav)),i.Db(1),i.nc("ngIf",t.answer)("ngIfElse",n)}}function qt(t,e){if(1&t&&(i.Vb(0,"div",67),i.Pc(1,zt,4,5,"div",55),i.Ub()),2&t){const t=i.gc(2);i.Db(1),i.nc("ngForOf",t.studentLists)}}function Qt(t,e){if(1&t&&(i.Vb(0,"div",9),i.Pc(1,Dt,3,2,"mat-tab-group",10),i.Pc(2,qt,2,1,"ng-template",null,11,i.Qc),i.Ub()),2&t){const t=i.zc(3),e=i.gc();i.Db(1),i.nc("ngIf",!e.isHomeworkFlow)("ngIfElse",t)}}const Wt=function(t){return{"mt-3":t}};let Jt=(()=>{class t{constructor(t,e,n,o,c){this.activeRoute=t,this.router=e,this.commonService=n,this.localize=o,this.apiService=c,this.studentLists=[],this.studentListsInClass=[],this.classObj={},this.obj={},this.backToLink="",this.totalSubmitted=0,this.totalSubmitByClass=0,this.examHasClass=!1,this.hasEssayQuestion=!1,this.isNotTestedYet=!1,this.isHomeworkFlow=!1,this.searchKey="",this.isOpenSideNav=!0,this.goToResult=new i.o,this.openResultHistory=new i.o,this.studentListPage=[],this.isLoadingPage=!1,this.checkPaging=!1,this.curPage=1,this.totalPage=0,this.studentListsOfSort=[]}goToResultReview(t){t.isNotSubmit||t.mustReSubmit||this.checkExecuteViewTest()||this.goToResult.emit(t)}clickPage(t){this.createPageStudent(t)}openResultHistoryReview(t){this.openResultHistory.emit(t)}checkValidClickLink(t){return"[]"!=t.answers&&null!=t.answers}checkExecuteViewTest(){return this.commonService.hasConfigAndViewClassroomPermission("exam",this.obj.permissionObj)}checkShowIconHistory(t){let e=!1;return 1!=t.status&&(t.isMarked||t.isNotMarked)&&(e=!0),0==this.obj.examType||1==this.obj.examType?!(!e||!this.commonService.checkEmptyAnswerExamAll(t)):!(!e||""!=t.files&&null!=t.files&&!this.commonService.checkEmptyAnswerExamAll(t))}createPageStudent(t){this.studentListPage=[];let e=this.studentLists.length;if(this.totalPage=Math.ceil(e/100),e>100)for(let n=100*(t-1);n<100*t;n++)this.studentLists.length-1>=n&&this.studentListPage.push(this.studentLists[n]);else this.checkPaging=!1,this.studentListPage=this.studentLists;this.isLoadingPage=!1}copyLinkToClipboard(){return`${location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}/de-thi/${this.obj.hashId}`}copyLinkHomeWorkToClipboard(){return`${location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}/bai-tap/${this.obj.hashId}`}showCopySuccess(){this.commonService.snackSuccess("Sao ch\xe9p th\xe0nh c\xf4ng","")}calculationTime(t,e){return this.commonService.calculationTime(t,e)}calculationTestedTime(t,e){return this.commonService.calculationTestedTime(t,e)}formatArray(t){return JSON.parse(t)}goToStudentList(t){this.commonService.myNavigation("/admin/student/class-details/"+t)}isSearch(t){return 0==t.length}checkSortListStudent(){for(let t=0;t<this.studentListsInClass.length;t++)1==this.studentListsInClass[t].classObj.sortType?this.studentListsInClass[t].results=this.commonService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(this.studentListsInClass[t].results),"pos","id"):0==this.studentListsInClass[t].classObj.sortType&&(this.studentListsInClass[t].results=this.commonService.sortFirstNameStudents(this.commonService.myClone(this.studentListsInClass[t].results)))}ngOnInit(){this.createPageStudent(this.curPage),this.checkSortListStudent()}ngOnChanges(){this.createPageStudent(this.curPage)}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(i.Pb(o.a),i.Pb(o.i),i.Pb(c.a),i.Pb(s.e),i.Pb(a.a))},t.\u0275cmp=i.Jb({type:t,selectors:[["app-student-result-view"]],inputs:{studentLists:"studentLists",studentListsInClass:"studentListsInClass",classObj:"classObj",obj:"obj",backToLink:"backToLink",totalSubmitted:"totalSubmitted",totalSubmitByClass:"totalSubmitByClass",examHasClass:"examHasClass",hasEssayQuestion:"hasEssayQuestion",isNotTestedYet:"isNotTestedYet",isHomeworkFlow:"isHomeworkFlow",searchKey:"searchKey",isOpenSideNav:"isOpenSideNav"},outputs:{goToResult:"goToResult",openResultHistory:"openResultHistory"},features:[i.Bb],decls:3,vars:5,consts:[[1,"box-content","py-2","scrollable-content",3,"ngClass"],[4,"ngIf"],["class","pt-0 pb-2 px-3 ",4,"ngIf"],[1,"text-center","mt-3"],["class","h5",4,"ngIf"],["class","clickable","style","user-select: none;",3,"cdkCopyToClipboard","click",4,"ngIf"],[1,"h5"],[1,"clickable",2,"user-select","none",3,"cdkCopyToClipboard","click"],[2,"vertical-align","middle","color","#333333"],[1,"pt-0","pb-2","px-3"],[4,"ngIf","ngIfElse"],["HomeworkFlow",""],[3,"label",4,"ngIf"],[3,"label"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mt-3"],[1,"row","ml-0","mr-0","pl-3"],[1,"h5","clickable","link-stu",3,"click"],["class","ml-2",4,"ngIf"],[1,"row","ml-0","mr-0","pl-0","pr-0"],["class","col-12 col-sm-12 col-md-4 col-lg-3 mb-2 d-flex","style","align-items: stretch;",3,"ngClass",4,"ngFor","ngForOf"],[1,"ml-2"],[2,"cursor","pointer",3,"matTooltip","nameCreateAvatar","size","linkAvatar"],[1,"col-12","col-sm-12","col-md-4","col-lg-3","mb-2","d-flex",2,"align-items","stretch",3,"ngClass"],[1,"box-item",2,"align-self","stretch","width","100%",3,"ngClass"],[1,"student-item"],[1,"stdimg","align-self-center"],[3,"linkAvatar","nameCreateAvatar","size"],["class","text-center",3,"click",4,"ngIf"],[1,"stdinfo"],[2,"width","100%",3,"routerLink","queryParams"],[1,"stdinfo-fullname"],[2,"vertical-align","middle"],[2,"vertical-align","middle","color","#333333","font-weight","400","font-size","15px","word-break","break-word"],["style","vertical-align: middle; color: #9F0000; font-size: 12px;","matTooltip","H\u1ecdc sinh \u0111ang thi l\u1ea1i",4,"ngIf"],["class","d-flex justify-content-between","style","padding-top: 3px;",4,"ngIf"],["class","d-flex justify-content-between",4,"ngIf"],[1,"text-center",3,"click"],["matTooltip","L\u1ecbch s\u1eed thi",2,"vertical-align","middle","margin-top","2px","color","#cccccc"],["matTooltip","H\u1ecdc sinh \u0111ang thi l\u1ea1i",2,"vertical-align","middle","color","#9F0000","font-size","12px"],[1,"d-flex","justify-content-between",2,"padding-top","3px"],["style","color: #F39C12; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","color: #9F0000; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","color: #9C9C9C; font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","font-size: 13px; margin-bottom: 2px;",4,"ngIf"],["style","font-size: 13px; margin-bottom: 2px; color: #9C9C9C",4,"ngIf"],[2,"color","#F39C12","font-size","13px","margin-bottom","2px"],[2,"color","#9F0000","font-size","13px","margin-bottom","2px"],[2,"color","#9C9C9C","font-size","13px","margin-bottom","2px"],["style","padding: 7px;margin-bottom: 2px;",4,"ngIf"],[2,"padding","7px","margin-bottom","2px"],[2,"font-size","13px","margin-bottom","2px"],[2,"font-size","13px","margin-bottom","2px","color","#9C9C9C"],[1,"d-flex","justify-content-between"],[1,"row","ml-0","mr-0","pl-0","pr-0","mt-2",2,"overflow-y","hidden"],["class","col-12 col-sm-12 col-md-4 col-lg-3 mb-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-12","mt-2"],["class","col-md-11 text-left mt-2",4,"ngIf"],[1,"col-12","col-sm-12","col-md-4","col-lg-3","mb-2",3,"ngClass"],["dataDone",""],[1,"box-item",3,"ngClass"],[1,"stdinfo",3,"click"],["style","color: #9F0000; font-size: 13px; margin-bottom: 0px;",4,"ngIf"],[2,"color","#9F0000","font-size","13px","margin-bottom","0px"],[3,"routerLink","queryParams"],[1,"col-md-11","text-left","mt-2"],[3,"lengthPage","paging","SendPage"],[1,"row","ml-0","mr-0","pl-0","pr-0","mt-2"],["answerIdNull",""],[3,"mark"]],template:function(t,e){1&t&&(i.Vb(0,"div",0),i.Pc(1,w,6,4,"div",1),i.Pc(2,Qt,4,2,"div",2),i.Ub()),2&t&&(i.nc("ngClass",i.sc(3,Wt,!e.isHomeworkFlow)),i.Db(1),i.nc("ngIf",e.isNotTestedYet),i.Db(1),i.nc("ngIf",!e.isNotTestedYet))},directives:[r.k,r.m,l.a,b.a,g.b,g.a,r.l,d.a,u.a,o.k,m.a,f.a],pipes:[p.p],styles:[".box-content[_ngcontent-%COMP%]{background:inherit;background-color:#f9f9f9;box-sizing:border-box;border:1px solid #e9e9e9;border-radius:5px;box-shadow:none}a[_ngcontent-%COMP%]{color:#000}.disableClick[_ngcontent-%COMP%]{cursor:default!important}.scrollable-content[_ngcontent-%COMP%]{height:calc(100vh - 166px);overflow-y:scroll}.scrollable-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;margin:5px}.scrollable-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 5px #cecece;border-radius:10px}.scrollable-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cfcece;border-radius:10px}.box-item[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border:1px solid #ccc;border-radius:4px;margin-bottom:10px;cursor:pointer;position:relative}.badge-testing[_ngcontent-%COMP%]{position:absolute;top:0;right:6px;border-radius:4px;padding:0 3px}.student-item[_ngcontent-%COMP%]{display:flex;position:relative}.link-stu[_ngcontent-%COMP%], .student-item[_ngcontent-%COMP%]   .deleteBtn[_ngcontent-%COMP%], .student-item[_ngcontent-%COMP%]   .enterClsWrap[_ngcontent-%COMP%]{display:flex}.link-stu[_ngcontent-%COMP%]{align-items:center}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.stdimg[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-right:10px}.stdinfo[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:auto}.menu-icon[_ngcontent-%COMP%]{vertical-align:middle;color:#828282}.create-avatar[_ngcontent-%COMP%]{vertical-align:middle;display:inline-block;margin-top:2px;border-radius:50%;width:30px;text-transform:uppercase;height:30px;background:#ddd;text-align:center;padding-top:5px}@media screen and (max-width:750px){.scrollable-content[_ngcontent-%COMP%]{min-height:calc(100vh - 170px);height:auto;overflow-y:inherit}.tested_list_container[_ngcontent-%COMP%]{height:auto}}"]}),t})()},unp7:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("mrSG"),o=n("fXoL"),c=n("gbi4"),s=n("yTNM"),a=function(t){return t[t.Cdn=0]="Cdn",t[t.CdnTimestamp=1]="CdnTimestamp",t[t.Rawlink=2]="Rawlink",t[t.RawlinkTimestamp=3]="RawlinkTimestamp",t}({});let r=(()=>{class t{constructor(t,e){this.commonService=t,this.apiService=e}isSupportedBrowswer(){var t,e,n;navigator.sayswho=(n=(e=navigator.userAgent).match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(n[1])?"IE "+((t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===n[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" ")));let i=navigator.sayswho.toString();return!(!["chrome"].includes(i.split(" ")[0].toLowerCase())||parseInt(i.split(" ")[1])<80)}getExtensionFile(t){if(!t)return"";var e=t.split(".");return e.length<=1?"":e[e.length-1].toLocaleLowerCase().split("_")[0]}translateMetaTitle(t){this.commonService.translateMetaData({title:"Export PDF: "+t.data.examObj.name,description:"Export PDF: "+t.data.examObj.name,image:"lang_cms_test_image"})}handleError(t){this.commonService.myTranslate([t.message,"lang_cms_common_ok"]).subscribe(e=>{this.commonService.snackError(e[t.message],e.lang_cms_common_ok)})}convertAnswersArr(t,e){0!=t.length&&t.forEach(t=>{e["id_"+t.QuestionId]=t.AnswerContent[0].Content})}create_pdf(t,e,n){return Object(i.a)(this,void 0,void 0,function*(){n?this.convertMargitPagePdf_forHomeWork():yield this.convertMargitPagePdf(t);var i=document.getElementById(e);if(i)return yield html2pdf().set({pagebreak:{mode:"avoid-all"},image:{type:"jpeg",quality:1},html2canvas:{logging:!0,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"p"}}).from(i).output("blob")})}convertToBase64(t,e){return Object(i.a)(this,void 0,void 0,function*(){let n=t;switch(e){case a.Cdn:n=this.commonService.getMyCdn(t);break;case a.CdnTimestamp:n=this.commonService.getMyCdn(t)+"?t="+Date.now();break;case a.RawlinkTimestamp:n=t+"?t="+Date.now()}const i=yield fetch(n),o=yield i.blob(),c=yield new Promise(t=>{const e=new FileReader;e.readAsDataURL(o),e.onloadend=()=>{t(e.result)}});return c&&"string"==typeof c?c:(console.log("kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh chu\u1ed7i base64: "+t),t)})}convertAndRetryToBase64(t){return Object(i.a)(this,void 0,void 0,function*(){let e=this.getExtensionFile(t);if(["pdf","jpg","jpeg","png"].includes(e)){const e=[a.Cdn,a.CdnTimestamp,a.Rawlink,a.RawlinkTimestamp];let s;if(this.commonService.isViettelCDN(t)){console.log(">>>> YAAAAAA, \u0111\xe2y l\xe0 link Viettel, qu\xe1 tr\xecnh convert c\xf3 th\u1ec3 l\xe2u h\u01a1n b\xecnh th\u01b0\u1eddng, v\xec ph\u1ea3i convert tu\u1ea7n t\u1ef1 sau m\u1ed7i 0.5 gi\xe2y");try{s=yield this.convertToBase64(t,e[0])}catch(n){try{yield this.asyncTimeout(500),s=yield this.convertToBase64(t,e[1])}catch(i){console.log("Kh\xf4ng th\u1ec3 convert url VIETTEL n\xe0y th\xe0nh base64 sau 2 l\u1ea7n th\u1eed: "+t),s=t}}}else try{s=yield this.convertToBase64(t,e[0])}catch(n){try{s=yield this.convertToBase64(t,e[1])}catch(i){try{s=yield this.convertToBase64(t,e[2])}catch(o){try{s=yield this.convertToBase64(t,e[3])}catch(c){console.log("Kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh base64 sau v\xe0i l\u1ea7n retry: "+t),s=t}}}}return s}return console.log("\u0110\u1ecbnh d\u1ea1ng file kh\xf4ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3: "+t),""})}processUserResult(t){return Object(i.a)(this,void 0,void 0,function*(){let e=this.commonService.parseJson(t);if(this.commonService.isViettelCDN(e.pages[0].backgroundImage))for(const t of e.pages){if(yield this.asyncTimeout(500),t.draw){const e=yield this.convertAndRetryToBase64(t.draw);t.draw=e}yield this.asyncTimeout(500);const e=yield this.convertAndRetryToBase64(t.backgroundImage);t.backgroundImage=e}else{const t=e.pages.map(t=>Object(i.a)(this,void 0,void 0,function*(){if(t.draw){const e=yield this.convertAndRetryToBase64(t.draw);t.draw=e}})),n=e.pages.map(t=>Object(i.a)(this,void 0,void 0,function*(){const e=yield this.convertAndRetryToBase64(t.backgroundImage);t.backgroundImage=e}));Promise.all([...t,...n])}return e})}processGroupImages(t,e){return Object(i.a)(this,void 0,void 0,function*(){if(t[0].name.startsWith("[PDFv2]"))if(this.commonService.isViettelCDN(t[0].questionContent[0].groupUrl))for(const e of t){yield this.asyncTimeout(500);const t=yield this.convertAndRetryToBase64(e.questionContent[0].groupUrl);e.questionContent[0].groupUrl=t}else{const n=t.map(t=>Object(i.a)(this,void 0,void 0,function*(){if(t.questionContent[0].groupUrl&&e.includes(t.indexLabel)){const e=yield this.convertAndRetryToBase64(t.questionContent[0].groupUrl);t.questionContent[0].groupUrl=e}}));Promise.all(n)}})}processQuestionImages(t){return Object(i.a)(this,void 0,void 0,function*(){if(1==t[0].isImage)if(this.commonService.isViettelCDN(t[0].questionContent[0].url))for(const e of t){yield this.asyncTimeout(500);const t=yield this.convertAndRetryToBase64(e.questionContent[0].url);e.questionContent[0].url=t}else{const e=t.map(t=>Object(i.a)(this,void 0,void 0,function*(){const e=yield this.convertAndRetryToBase64(t.questionContent[0].url);t.questionContent[0].url=e}));Promise.all(e)}})}parsingQuestions(t,e){t.forEach(t=>{"string"==typeof t.answerConfig&&(t.answerConfig=this.commonService.parseJson(t.answerConfig)),"string"==typeof t.answerResult&&(t.answerResult=this.commonService.parseJson(t.answerResult)),"string"==typeof t.coordinates&&(t.coordinates=this.commonService.parseJson(t.coordinates)),"string"==typeof t.questionContent&&e&&(t.questionContent=this.commonService.parseJson(t.questionContent))})}parseQuestionsFor_PDFv2(t,e){t=e.data.questionObjs;for(let n=0;n<t.length;n++)t[n].indexLabel=n;return t.forEach(t=>{"string"==typeof t.answerConfig&&(t.answerConfig=this.commonService.parseJson(t.answerConfig)),"string"==typeof t.answerResult&&(t.answerResult=this.commonService.parseJson(t.answerResult)),"string"==typeof t.coordinates&&(t.coordinates=this.commonService.parseJson(t.coordinates)),"string"==typeof t.questionContent&&(t.questionContent=this.commonService.parseJson(t.questionContent))}),t}resetPaddingTopElements(t){if(document.getElementById("multipleChoiceWrap")){for(let n=0;n<t.length;n++){var e=document.getElementById("question_item_box_"+t[n].id);e&&(e.style.paddingTop="")}var n=document.getElementById("essayPdfTitle");if(n){n.style.marginTop="";var i=document.getElementsByClassName("essayPdfImage");for(let t=0;t<i.length;t++){i[t].style.marginTop="";var o=i[t].children;for(let t=0;t<o.length;t++)"IMG"!==o[t].tagName||o[t].classList.contains("absolute-img")||(o[t].style.height="",o[t].style.width="")}}}}asyncTimeout(t){return Object(i.a)(this,void 0,void 0,function*(){return`Waited ${yield new Promise(e=>{setTimeout(()=>e(t),t)})} miliseconds`})}convertMargitPagePdf(t){var e;return Object(i.a)(this,void 0,void 0,function*(){this.resetPaddingTopElements(t),yield this.asyncTimeout(5e3);let n=document.getElementById("multipleChoiceWrap");if(n){const i=10,o=15,c=(null==n?void 0:n.getBoundingClientRect().width)/210;let s=document.createElement("style");const a=297*c;let r=!1;for(let n=0;n<t.length;n++){let c=document.getElementById("question_item_box_"+t[n].id);if(c){let t=c.getBoundingClientRect().height+i;!1===r&&(r=null===(e=document.getElementById("multipleChoiceWrapHeader"))||void 0===e?void 0:e.getBoundingClientRect().height,r+=40),r+t+o>a&&(c.style.paddingTop=Math.floor(a-r)+"px",r=0),r+=t}}document.head.appendChild(s);let l=document.getElementById("essayPdfTitle");if(l){l.style.marginTop=Math.floor(a-r+20)+"px",r=l.getBoundingClientRect().height;let t=document.getElementsByClassName("essayPdfImage"),e=0;for(let n=0;n<t.length;n++)t[n].getBoundingClientRect().height>0&&(0===e?(t[n].getBoundingClientRect().height>a-r&&this.changeSizeHeightImage(a-r,t[n]),r+=t[n].getBoundingClientRect().height):(t[n].getBoundingClientRect().height>a&&this.changeSizeHeightImage(a-r,t[n]),t[n].style.marginTop=Math.floor(a-r)+"px",r=t[n].getBoundingClientRect().height),this.floorSizeImage(t[n]),e++)}}})}changeSizeHeightImage(t,e){var n=e.children;for(let i=0;i<n.length;i++)"IMG"!==n[i].tagName||n[i].classList.contains("absolute-img")||(n[i].style.height=t+"px",n[i].style.width="auto")}floorSizeImage(t){var e=t.children;for(let i=0;i<e.length;i++)if("IMG"===e[i].tagName){let t=e[i].getBoundingClientRect(),o=e[i];if(e[i].classList.contains("rotated-img")){e[i].style.width=Math.floor(o.width)+"px";var n=e[i].getAttribute("data-ratio");e[i].style.height=Math.floor(o.width/n)+"px"}else e[i].classList.contains("absolute-img")||(e[i].style.height=Math.floor(t.height)+"px",e[i].style.width=Math.floor(t.width)+"px")}}convertMargitPagePdf_forHomeWork(){var t,e=document.getElementById("multipleChoiceWrap");if(e){const s=(null==e?void 0:e.getBoundingClientRect().width)/210*297;var n=!1;n=null===(t=document.getElementById("multipleChoiceWrapHeader"))||void 0===t?void 0:t.getBoundingClientRect().height;var i=document.getElementById("essayPdfTitle");if(i){n+=i.getBoundingClientRect().height;var o=document.getElementsByClassName("essayPdfImage"),c=0;for(let t=0;t<o.length;t++)o[t].getBoundingClientRect().height>0&&(0===c?(o[t].getBoundingClientRect().height>s-n&&this.changeSizeHeightImage_hw(s-n,o[t]),n+=o[t].getBoundingClientRect().height):(o[t].getBoundingClientRect().height>s&&this.changeSizeHeightImage_hw(s-n,o[t]),o[t].style.marginTop=Math.floor(s-n)+"px",n=o[t].getBoundingClientRect().height),this.floorSizeImage_hw(o[t]),c++)}}}changeSizeHeightImage_hw(t,e){var n=e.children;for(let i=0;i<n.length;i++)"IMG"===n[i].tagName&&(n[i].style.height=t+"px",n[i].style.width="auto")}floorSizeImage_hw(t){var e=t.children;for(let i=0;i<e.length;i++)if("IMG"===e[i].tagName){let t=e[i].getBoundingClientRect(),o=e[i];if(e[i].classList.contains("rotated-img")){e[i].style.width=Math.floor(o.width)+"px";var n=e[i].getAttribute("data-ratio");e[i].style.height=Math.floor(o.width/n)+"px"}else e[i].style.height=Math.floor(t.height)+"px",e[i].style.width=Math.floor(t.width)+"px"}}}return t.\u0275fac=function(e){return new(e||t)(o.Zb(c.a),o.Zb(s.a))},t.\u0275prov=o.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);